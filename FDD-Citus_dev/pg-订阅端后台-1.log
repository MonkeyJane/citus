[BEGIN] 2019/7/4 星期四 下午 2:54:26
[cituscluster@center1 ~]$ ps -ef | grep postgres
cituscl+   6124      1  0 20:06 pts/1    00:00:00 /opt/pgsql-10.1/bin/postgres
cituscl+   6127   6124  0 20:06 ?        00:00:00 postgres: checkpointer process  
cituscl+   6128   6124  0 20:06 ?        00:00:00 postgres: writer process   
cituscl+   6129   6124  0 20:06 ?        00:00:00 postgres: wal writer process  
cituscl+   6130   6124  0 20:06 ?        00:00:00 postgres: autovacuum launcher process  
cituscl+   6131   6124  0 20:06 ?        00:00:00 postgres: stats collector process  
cituscl+   6132   6124  0 20:06 ?        00:00:05 postgres: bgworker: task tracker  
cituscl+   6133   6124  0 20:06 ?        00:00:00 postgres: bgworker: logical replication launcher  
cituscl+   8537   5756  0 23:50 pts/1    00:00:00 psql -d postgres
cituscl+   8538   6124  0 23:50 ?        00:00:00 postgres: cituscluster postgres [local] idle
cituscl+   8636   8544  0 23:54 pts/0    00:00:00 grep --color=auto postgres
[cituscluster@center1 ~]$ ps -ef | grep postgres
cituscl+   6124      1  0 Jul03 pts/1    00:00:00 /opt/pgsql-10.1/bin/postgres
cituscl+   6127   6124  0 Jul03 ?        00:00:02 postgres: checkpointer process  
cituscl+   6128   6124  0 Jul03 ?        00:00:01 postgres: writer process   
cituscl+   6129   6124  0 Jul03 ?        00:00:08 postgres: wal writer process  
cituscl+   6130   6124  0 Jul03 ?        00:00:00 postgres: autovacuum launcher process  
cituscl+   6131   6124  0 Jul03 ?        00:00:00 postgres: stats collector process  
cituscl+   6132   6124  0 Jul03 ?        00:00:05 postgres: bgworker: task tracker  
cituscl+   6133   6124  0 Jul03 ?        00:00:00 postgres: bgworker: logical replication launcher  
cituscl+   8537   5756  0 Jul03 pts/1    00:00:00 psql -d postgres
cituscl+   8538   6124  0 Jul03 ?        00:00:00 postgres: cituscluster postgres [local] idle
cituscl+   8694   8650  0 Jul03 pts/2    00:00:00 psql -d postgres
cituscl+   8695   6124  0 Jul03 ?        00:00:00 postgres: cituscluster postgres [local] idle
cituscl+   8804   6124  0 00:00 ?        00:00:00 postgres: bgworker: logical replication worker for subscription 60216  
cituscl+   8805   6124 42 00:00 ?        00:01:27 postgres: bgworker: logical replication worker for subscription 60216 sync 43814  
cituscl+   8855   6124 43 00:03 ?        00:00:18 postgres: bgworker: logical replication worker for subscription 60216 sync 43822  
cituscl+   8856   6124  5 00:03 ?        00:00:00 postgres: autovacuum worker process   postgres
cituscl+   8858   8544  0 00:04 pts/0    00:00:00 grep --color=auto postgres
[cituscluster@center1 ~]$ ps -ef | grep postgres
cituscl+   6124      1  0 Jul03 pts/1    00:00:00 /opt/pgsql-10.1/bin/postgres
cituscl+   6127   6124  0 Jul03 ?        00:00:07 postgres: checkpointer process  
cituscl+   6128   6124  0 Jul03 ?        00:00:05 postgres: writer process   
cituscl+   6129   6124  0 Jul03 ?        00:00:14 postgres: wal writer process  
cituscl+   6130   6124  0 Jul03 ?        00:00:00 postgres: autovacuum launcher process  
cituscl+   6131   6124  0 Jul03 ?        00:00:00 postgres: stats collector process  
cituscl+   6132   6124  0 Jul03 ?        00:00:05 postgres: bgworker: task tracker  
cituscl+   6133   6124  0 Jul03 ?        00:00:00 postgres: bgworker: logical replication launcher  
cituscl+   8537   5756  0 Jul03 pts/1    00:00:00 psql -d postgres
cituscl+   8538   6124  0 Jul03 ?        00:00:01 postgres: cituscluster postgres [local] idle
cituscl+   8694   8650  0 Jul03 pts/2    00:00:00 psql -d postgres
cituscl+   8695   6124  0 Jul03 ?        00:00:00 postgres: cituscluster postgres [local] idle
cituscl+   8804   6124  0 00:00 ?        00:00:00 postgres: bgworker: logical replication worker for subscription 60216  
cituscl+   8855   6124 43 00:03 ?        00:03:37 postgres: bgworker: logical replication worker for subscription 60216 sync 43822  
cituscl+   8935   6124 44 00:11 ?        00:00:10 postgres: bgworker: logical replication worker for subscription 60216 sync 43764  
cituscl+   8945   8544  0 00:11 pts/0    00:00:00 grep --color=auto postgres
[cituscluster@center1 ~]$ ps -ef | grep postgres
cituscl+   6124      1  0 Jul03 pts/1    00:00:00 /opt/pgsql-10.1/bin/postgres
cituscl+   6127   6124  0 Jul03 ?        00:00:07 postgres: checkpointer process  
cituscl+   6128   6124  0 Jul03 ?        00:00:05 postgres: writer process   
cituscl+   6129   6124  0 Jul03 ?        00:00:14 postgres: wal writer process  
cituscl+   6130   6124  0 Jul03 ?        00:00:00 postgres: autovacuum launcher process  
cituscl+   6131   6124  0 Jul03 ?        00:00:00 postgres: stats collector process  
cituscl+   6132   6124  0 Jul03 ?        00:00:05 postgres: bgworker: task tracker  
cituscl+   6133   6124  0 Jul03 ?        00:00:00 postgres: bgworker: logical replication launcher  
cituscl+   8537   5756  0 Jul03 pts/1    00:00:00 psql -d postgres
cituscl+   8538   6124  0 Jul03 ?        00:00:01 postgres: cituscluster postgres [local] idle
cituscl+   8694   8650  0 Jul03 pts/2    00:00:00 psql -d postgres
cituscl+   8695   6124  0 Jul03 ?        00:00:00 postgres: cituscluster postgres [local] idle
cituscl+   8804   6124  0 00:00 ?        00:00:00 postgres: bgworker: logical replication worker for subscription 60216  
cituscl+   8855   6124 43 00:03 ?        00:03:38 postgres: bgworker: logical replication worker for subscription 60216 sync 43822  
cituscl+   8935   6124 45 00:11 ?        00:00:11 postgres: bgworker: logical replication worker for subscription 60216 sync 43764  
cituscl+   8947   8544  0 00:11 pts/0    00:00:00 grep --color=auto postgres
[cituscluster@center1 ~]$ ps -ef | grep postgres
cituscl+   6124      1  0 Jul03 pts/1    00:00:00 /opt/pgsql-10.1/bin/postgres
cituscl+   6127   6124  0 Jul03 ?        00:00:07 postgres: checkpointer process  
cituscl+   6128   6124  0 Jul03 ?        00:00:06 postgres: writer process   
cituscl+   6129   6124  0 Jul03 ?        00:00:15 postgres: wal writer process  
cituscl+   6130   6124  0 Jul03 ?        00:00:00 postgres: autovacuum launcher process  
cituscl+   6131   6124  0 Jul03 ?        00:00:00 postgres: stats collector process  
cituscl+   6132   6124  0 Jul03 ?        00:00:05 postgres: bgworker: task tracker  
cituscl+   6133   6124  0 Jul03 ?        00:00:00 postgres: bgworker: logical replication launcher  
cituscl+   8537   5756  0 Jul03 pts/1    00:00:01 psql -d postgres
cituscl+   8538   6124  0 Jul03 ?        00:00:01 postgres: cituscluster postgres [local] idle
cituscl+   8694   8650  0 Jul03 pts/2    00:00:00 psql -d postgres
cituscl+   8695   6124  0 Jul03 ?        00:00:00 postgres: cituscluster postgres [local] idle
cituscl+   8804   6124  0 00:00 ?        00:00:00 postgres: bgworker: logical replication worker for subscription 60216  
cituscl+   8855   6124 43 00:03 ?        00:03:52 postgres: bgworker: logical replication worker for subscription 60216 sync 43822  
cituscl+   8935   6124 43 00:11 ?        00:00:25 postgres: bgworker: logical replication worker for subscription 60216 sync 43764  
cituscl+   8948   6124  6 00:11 ?        00:00:01 postgres: autovacuum worker process   postgres
cituscl+   8950   8544  0 00:12 pts/0    00:00:00 grep --color=auto postgres
[cituscluster@center1 ~]$ ps -ef | grep postgres
cituscl+   6124      1  0 Jul03 pts/1    00:00:00 /opt/pgsql-10.1/bin/postgres
cituscl+   6127   6124  0 Jul03 ?        00:00:11 postgres: checkpointer process  
cituscl+   6128   6124  0 Jul03 ?        00:00:13 postgres: writer process   
cituscl+   6129   6124  0 Jul03 ?        00:00:21 postgres: wal writer process  
cituscl+   6130   6124  0 Jul03 ?        00:00:00 postgres: autovacuum launcher process  
cituscl+   6131   6124  0 Jul03 ?        00:00:01 postgres: stats collector process  
cituscl+   6132   6124  0 Jul03 ?        00:00:05 postgres: bgworker: task tracker  
cituscl+   6133   6124  0 Jul03 ?        00:00:00 postgres: bgworker: logical replication launcher  
cituscl+   8537   5756  0 Jul03 pts/1    00:00:01 psql -d postgres
cituscl+   8538   6124  0 Jul03 ?        00:00:01 postgres: cituscluster postgres [local] idle
cituscl+   8694   8650  0 Jul03 pts/2    00:00:00 psql -d postgres
cituscl+   8695   6124  0 Jul03 ?        00:00:00 postgres: cituscluster postgres [local] idle
cituscl+   8804   6124  0 00:00 ?        00:00:00 postgres: bgworker: logical replication worker for subscription 60216  
cituscl+   9021   6124 91 00:18 ?        00:00:31 postgres: bgworker: logical replication worker for subscription 60216 sync 43764  
cituscl+   9022   6124  5 00:18 ?        00:00:01 postgres: autovacuum worker process   postgres
cituscl+   9024   8544  0 00:19 pts/0    00:00:00 grep --color=auto postgres
[cituscluster@center1 ~]$ pstack 9021
#0  0x000000000080c605 in itemoffcompare (itemidp1=0x7ffc7cf82d7c, itemidp2=0x7ffc7cf82bfc) at bufpage.c:430
#1  0x00000000009bc577 in pg_qsort (a=0x7ffc7cf82bfc, n=77, es=6, cmp=0x80c601 <itemoffcompare>) at qsort.c:177
#2  0x00000000009bc7cc in pg_qsort (a=0x7ffc7cf82a10, n=159, es=6, cmp=0x80c601 <itemoffcompare>) at qsort.c:217
#3  0x00000000009bc742 in pg_qsort (a=0x7ffc7cf82a10, n=366, es=6, cmp=0x80c601 <itemoffcompare>) at qsort.c:203
#4  0x000000000080c65e in compactify_tuples (itemidbase=0x7ffc7cf82a10, nitems=366, page=0x7fe728ad6680 "\003") at bufpage.c:448
#5  0x000000000080d488 in PageIndexMultiDelete (page=0x7fe728ad6680 "\003", itemnos=0x7ffc7cf83490, nitems=41) at bufpage.c:943
#6  0x00000000004d81a1 in _bt_delitems_delete (rel=0x7fe7327af500, buf=15837, itemnos=0x7ffc7cf83490, nitems=41, heapRel=0x7fe7327ab498) at nbtpage.c:876
#7  0x00000000004d6db0 in _bt_vacuum_one_page (rel=0x7fe7327af500, buffer=15837, heapRel=0x7fe7327ab498) at nbtinsert.c:2199
#8  0x00000000004d3fa4 in _bt_findinsertloc (rel=0x7fe7327af500, bufptr=0x7ffc7cf845ac, offsetptr=0x7ffc7cf845aa, keysz=1, scankey=0x2554c78, newtup=0x2554c58, stack=0x2554d38, heapRel=0x7fe7327ab498) at nbtinsert.c:617
#9  0x00000000004d3691 in _bt_doinsert (rel=0x7fe7327af500, itup=0x2554c58, checkUnique=UNIQUE_CHECK_YES, heapRel=0x7fe7327ab498) at nbtinsert.c:203
#10 0x00000000004da5d1 in btinsert (rel=0x7fe7327af500, values=0x7ffc7cf84700, isnull=0x7ffc7cf846e0 "", ht_ctid=0x255f674, heapRel=0x7fe7327ab498, checkUnique=UNIQUE_CHECK_YES, indexInfo=0x2536f60) at nbtree.c:330
#11 0x00000000004d2131 in index_insert (indexRelation=0x7fe7327af500, values=0x7ffc7cf84700, isnull=0x7ffc7cf846e0 "", heap_t_ctid=0x255f674, heapRelation=0x7fe7327ab498, checkUnique=UNIQUE_CHECK_YES, indexInfo=0x2536f60) at indexam.c:210
#12 0x000000000067718f in ExecInsertIndexTuples (slot=0x2526078, tupleid=0x255f674, estate=0x2550bc8, noDupErr=0 '\000', specConflict=0x0, arbiterIndexes=0x0) at execIndexing.c:386
#13 0x00000000005e8a24 in CopyFromInsertBatch (cstate=0x25271f8, estate=0x2550bc8, mycid=0, hi_options=0, resultRelInfo=0x2536be0, myslot=0x2526078, bistate=0x2554c08, nBufferedTuples=1000, bufferedTuples=0x2552bd8, firstBufferedLineNo=2325001) at copy.c:2942
#14 0x00000000005e85ab in CopyFrom (cstate=0x25271f8) at copy.c:2768
#15 0x00000000007b50cd in copy_table (rel=0x7fe7327ab498) at tablesync.c:804
#16 0x00000000007b5423 in LogicalRepSyncTableStart (origin_startpos=0x7ffc7cf84bd8) at tablesync.c:921
#17 0x00000000007b7bff in ApplyWorkerMain (main_arg=1) at worker.c:1577
#18 0x000000000077a272 in StartBackgroundWorker () at bgworker.c:835
#19 0x000000000078c035 in do_start_bgworker (rw=0x24828f0) at postmaster.c:5680
#20 0x000000000078c36f in maybe_start_bgworkers () at postmaster.c:5884
#21 0x000000000078b455 in sigusr1_handler (postgres_signal_arg=10) at postmaster.c:5073
#22 <signal handler called>
#23 0x00007fe7319f0c53 in __select_nocancel () from /lib64/libc.so.6
#24 0x00000000007872c2 in ServerLoop () at postmaster.c:1717
#25 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x243dc20) at postmaster.c:1361
#26 0x00000000006cf26f in main (argc=1, argv=0x243dc20) at main.c:228
[cituscluster@center1 ~]$ ps -ef | grep postgres
cituscl+   6124      1  0 Jul03 pts/1    00:00:00 /opt/pgsql-10.1/bin/postgres
cituscl+   6127   6124  0 Jul03 ?        00:00:11 postgres: checkpointer process  
cituscl+   6128   6124  0 Jul03 ?        00:00:14 postgres: writer process   
cituscl+   6129   6124  0 Jul03 ?        00:00:22 postgres: wal writer process  
cituscl+   6130   6124  0 Jul03 ?        00:00:00 postgres: autovacuum launcher process  
cituscl+   6131   6124  0 Jul03 ?        00:00:01 postgres: stats collector process  
cituscl+   6132   6124  0 Jul03 ?        00:00:05 postgres: bgworker: task tracker  
cituscl+   6133   6124  0 Jul03 ?        00:00:00 postgres: bgworker: logical replication launcher  
cituscl+   8537   5756  0 Jul03 pts/1    00:00:01 psql -d postgres
cituscl+   8538   6124  0 Jul03 ?        00:00:01 postgres: cituscluster postgres [local] idle
cituscl+   8694   8650  0 Jul03 pts/2    00:00:00 psql -d postgres
cituscl+   8695   6124  0 Jul03 ?        00:00:00 postgres: cituscluster postgres [local] idle
cituscl+   8804   6124  0 00:00 ?        00:00:00 postgres: bgworker: logical replication worker for subscription 60216  
cituscl+   9021   6124 83 00:18 ?        00:01:25 postgres: bgworker: logical replication worker for subscription 60216 sync 43764  
cituscl+   9022   6124  5 00:18 ?        00:00:04 postgres: autovacuum worker process   postgres
cituscl+   9057   8544  3 00:20 pts/0    00:00:00 grep --color=auto postgres
[cituscluster@center1 ~]$ ps -ef | grep postgres
cituscl+   6124      1  0 Jul03 pts/1    00:00:00 /opt/pgsql-10.1/bin/postgres
cituscl+   6127   6124  0 Jul03 ?        00:00:11 postgres: checkpointer process  
cituscl+   6128   6124  0 Jul03 ?        00:00:14 postgres: writer process   
cituscl+   6129   6124  0 Jul03 ?        00:00:22 postgres: wal writer process  
cituscl+   6130   6124  0 Jul03 ?        00:00:00 postgres: autovacuum launcher process  
cituscl+   6131   6124  0 Jul03 ?        00:00:01 postgres: stats collector process  
cituscl+   6132   6124  0 Jul03 ?        00:00:05 postgres: bgworker: task tracker  
cituscl+   6133   6124  0 Jul03 ?        00:00:00 postgres: bgworker: logical replication launcher  
cituscl+   8537   5756  0 Jul03 pts/1    00:00:01 psql -d postgres
cituscl+   8538   6124  0 Jul03 ?        00:00:01 postgres: cituscluster postgres [local] idle
cituscl+   8694   8650  0 Jul03 pts/2    00:00:00 psql -d postgres
cituscl+   8695   6124  0 Jul03 ?        00:00:00 postgres: cituscluster postgres [local] idle
cituscl+   8804   6124  0 00:00 ?        00:00:00 postgres: bgworker: logical replication worker for subscription 60216  
cituscl+   9022   6124  5 00:18 ?        00:00:05 postgres: autovacuum worker process   postgres
cituscl+   9068   8544  0 00:20 pts/0    00:00:00 grep --color=auto postgres
[cituscluster@center1 ~]$ ps -ef | grep postgres
cituscl+   6124      1  0 Jul03 pts/1    00:00:00 /opt/pgsql-10.1/bin/postgres
cituscl+   6127   6124  0 Jul03 ?        00:00:11 postgres: checkpointer process  
cituscl+   6128   6124  0 Jul03 ?        00:00:14 postgres: writer process   
cituscl+   6129   6124  0 Jul03 ?        00:00:22 postgres: wal writer process  
cituscl+   6130   6124  0 Jul03 ?        00:00:00 postgres: autovacuum launcher process  
cituscl+   6131   6124  0 Jul03 ?        00:00:01 postgres: stats collector process  
cituscl+   6132   6124  0 Jul03 ?        00:00:05 postgres: bgworker: task tracker  
cituscl+   6133   6124  0 Jul03 ?        00:00:00 postgres: bgworker: logical replication launcher  
cituscl+   8537   5756  0 Jul03 pts/1    00:00:01 psql -d postgres
cituscl+   8538   6124  0 Jul03 ?        00:00:01 postgres: cituscluster postgres [local] idle
cituscl+   8694   8650  0 Jul03 pts/2    00:00:00 psql -d postgres
cituscl+   8695   6124  0 Jul03 ?        00:00:00 postgres: cituscluster postgres [local] idle
cituscl+   8804   6124  0 00:00 ?        00:00:00 postgres: bgworker: logical replication worker for subscription 60216  
cituscl+   9022   6124  5 00:18 ?        00:00:05 postgres: autovacuum worker process   postgres
cituscl+   9070   8544  0 00:20 pts/0    00:00:00 grep --color=auto postgres
[cituscluster@center1 ~]$ ps -ef | grep postgres
cituscl+   6124      1  0 Jul03 pts/1    00:00:00 /opt/pgsql-10.1/bin/postgres
cituscl+   6127   6124  0 Jul03 ?        00:00:11 postgres: checkpointer process  
cituscl+   6128   6124  0 Jul03 ?        00:00:14 postgres: writer process   
cituscl+   6129   6124  0 Jul03 ?        00:00:22 postgres: wal writer process  
cituscl+   6130   6124  0 Jul03 ?        00:00:00 postgres: autovacuum launcher process  
cituscl+   6131   6124  0 Jul03 ?        00:00:01 postgres: stats collector process  
cituscl+   6132   6124  0 Jul03 ?        00:00:05 postgres: bgworker: task tracker  
cituscl+   6133   6124  0 Jul03 ?        00:00:00 postgres: bgworker: logical replication launcher  
cituscl+   8537   5756  0 Jul03 pts/1    00:00:01 psql -d postgres
cituscl+   8538   6124  0 Jul03 ?        00:00:01 postgres: cituscluster postgres [local] idle
cituscl+   8694   8650  0 Jul03 pts/2    00:00:00 psql -d postgres
cituscl+   8695   6124  0 Jul03 ?        00:00:00 postgres: cituscluster postgres [local] idle
cituscl+   8804   6124  0 00:00 ?        00:00:00 postgres: bgworker: logical replication worker for subscription 60216  
cituscl+   9022   6124  5 00:18 ?        00:00:05 postgres: autovacuum worker process   postgres
cituscl+   9072   8544  0 00:20 pts/0    00:00:00 grep --color=auto postgres
[cituscluster@center1 ~]$ ps -ef | grep postgres
cituscl+   6124      1  0 Jul03 pts/1    00:00:00 /opt/pgsql-10.1/bin/postgres
cituscl+   6127   6124  0 Jul03 ?        00:00:11 postgres: checkpointer process  
cituscl+   6128   6124  0 Jul03 ?        00:00:14 postgres: writer process   
cituscl+   6129   6124  0 Jul03 ?        00:00:22 postgres: wal writer process  
cituscl+   6130   6124  0 Jul03 ?        00:00:00 postgres: autovacuum launcher process  
cituscl+   6131   6124  0 Jul03 ?        00:00:01 postgres: stats collector process  
cituscl+   6132   6124  0 Jul03 ?        00:00:05 postgres: bgworker: task tracker  
cituscl+   6133   6124  0 Jul03 ?        00:00:00 postgres: bgworker: logical replication launcher  
cituscl+   8537   5756  0 Jul03 pts/1    00:00:01 psql -d postgres
cituscl+   8538   6124  0 Jul03 ?        00:00:01 postgres: cituscluster postgres [local] idle
cituscl+   8694   8650  0 Jul03 pts/2    00:00:00 psql -d postgres
cituscl+   8695   6124  0 Jul03 ?        00:00:00 postgres: cituscluster postgres [local] idle
cituscl+   8804   6124  0 00:00 ?        00:00:00 postgres: bgworker: logical replication worker for subscription 60216  
cituscl+   9022   6124  5 00:18 ?        00:00:05 postgres: autovacuum worker process   postgres
cituscl+   9073   6124  0 00:20 ?        00:00:00 postgres: bgworker: logical replication worker for subscription 60216 sync 43764  
cituscl+   9075   8544  0 00:20 pts/0    00:00:00 grep --color=auto postgres
[cituscluster@center1 ~]$ pstack 9073
#0  0x000000000097610d in hash_search_with_hash_value (hashp=0x243ee68, keyPtr=0x7ffc7cf84270, hashvalue=1910985352, action=HASH_FIND, foundPtr=0x0) at dynahash.c:968
#1  0x00000000007dac88 in BufTableLookup (tagPtr=0x7ffc7cf84270, hashcode=1910985352) at buf_table.c:96
#2  0x00000000007dc385 in BufferAlloc (smgr=0x25037c8, relpersistence=112 'p', forkNum=MAIN_FORKNUM, blockNum=14140, strategy=0x0, foundPtr=0x7ffc7cf84323 "\001\374\177") at bufmgr.c:1013
#3  0x00000000007dba9b in ReadBuffer_common (smgr=0x25037c8, relpersistence=112 'p', forkNum=MAIN_FORKNUM, blockNum=14140, mode=RBM_NORMAL, strategy=0x0, hit=0x7ffc7cf8441b "") at bufmgr.c:745
#4  0x00000000007db8d5 in ReadBufferExtended (reln=0x7fe7327af500, forkNum=MAIN_FORKNUM, blockNum=14140, mode=RBM_NORMAL, strategy=0x0) at bufmgr.c:664
#5  0x00000000007db7ba in ReadBuffer (reln=0x7fe7327af500, blockNum=14140) at bufmgr.c:596
#6  0x00000000007dcd9e in ReleaseAndReadBuffer (buffer=4020, relation=0x7fe7327af500, blockNum=14140) at bufmgr.c:1545
#7  0x00000000004d7ee2 in _bt_relandgetbuf (rel=0x7fe7327af500, obuf=4020, blkno=14140, access=1) at nbtpage.c:708
#8  0x00000000004dbf95 in _bt_search (rel=0x7fe7327af500, keysz=1, scankey=0x2554c78, nextkey=0 '\000', bufP=0x7ffc7cf845ac, access=2, snapshot=0x0) at nbtsearch.c:170
#9  0x00000000004d3522 in _bt_doinsert (rel=0x7fe7327af500, itup=0x2554c58, checkUnique=UNIQUE_CHECK_YES, heapRel=0x7fe7327ab498) at nbtinsert.c:123
#10 0x00000000004da5d1 in btinsert (rel=0x7fe7327af500, values=0x7ffc7cf84700, isnull=0x7ffc7cf846e0 "", ht_ctid=0x25754e4, heapRel=0x7fe7327ab498, checkUnique=UNIQUE_CHECK_YES, indexInfo=0x2536f60) at nbtree.c:330
#11 0x00000000004d2131 in index_insert (indexRelation=0x7fe7327af500, values=0x7ffc7cf84700, isnull=0x7ffc7cf846e0 "", heap_t_ctid=0x25754e4, heapRelation=0x7fe7327ab498, checkUnique=UNIQUE_CHECK_YES, indexInfo=0x2536f60) at indexam.c:210
#12 0x000000000067718f in ExecInsertIndexTuples (slot=0x2526078, tupleid=0x25754e4, estate=0x2550bc8, noDupErr=0 '\000', specConflict=0x0, arbiterIndexes=0x0) at execIndexing.c:386
#13 0x00000000005e8a24 in CopyFromInsertBatch (cstate=0x25271f8, estate=0x2550bc8, mycid=0, hi_options=0, resultRelInfo=0x2536be0, myslot=0x2526078, bistate=0x2554c08, nBufferedTuples=1000, bufferedTuples=0x2552bd8, firstBufferedLineNo=449001) at copy.c:2942
#14 0x00000000005e85ab in CopyFrom (cstate=0x25271f8) at copy.c:2768
#15 0x00000000007b50cd in copy_table (rel=0x7fe7327ab498) at tablesync.c:804
#16 0x00000000007b5423 in LogicalRepSyncTableStart (origin_startpos=0x7ffc7cf84bd8) at tablesync.c:921
#17 0x00000000007b7bff in ApplyWorkerMain (main_arg=1) at worker.c:1577
#18 0x000000000077a272 in StartBackgroundWorker () at bgworker.c:835
#19 0x000000000078c035 in do_start_bgworker (rw=0x24828f0) at postmaster.c:5680
#20 0x000000000078c36f in maybe_start_bgworkers () at postmaster.c:5884
#21 0x000000000078b455 in sigusr1_handler (postgres_signal_arg=10) at postmaster.c:5073
#22 <signal handler called>
#23 0x00007fe7319f0c53 in __select_nocancel () from /lib64/libc.so.6
#24 0x00000000007872c2 in ServerLoop () at postmaster.c:1717
#25 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x243dc20) at postmaster.c:1361
#26 0x00000000006cf26f in main (argc=1, argv=0x243dc20) at main.c:228
[cituscluster@center1 ~]$ ps -ef | grep postgres
cituscl+   6124      1  0 Jul03 pts/1    00:00:00 /opt/pgsql-10.1/bin/postgres
cituscl+   6127   6124  0 Jul03 ?        00:00:11 postgres: checkpointer process  
cituscl+   6128   6124  0 Jul03 ?        00:00:15 postgres: writer process   
cituscl+   6129   6124  0 Jul03 ?        00:00:22 postgres: wal writer process  
cituscl+   6130   6124  0 Jul03 ?        00:00:00 postgres: autovacuum launcher process  
cituscl+   6131   6124  0 Jul03 ?        00:00:01 postgres: stats collector process  
cituscl+   6132   6124  0 Jul03 ?        00:00:05 postgres: bgworker: task tracker  
cituscl+   6133   6124  0 Jul03 ?        00:00:00 postgres: bgworker: logical replication launcher  
cituscl+   8537   5756  0 Jul03 pts/1    00:00:01 psql -d postgres
cituscl+   8538   6124  0 Jul03 ?        00:00:01 postgres: cituscluster postgres [local] idle
cituscl+   8694   8650  0 Jul03 pts/2    00:00:00 psql -d postgres
cituscl+   8695   6124  0 Jul03 ?        00:00:00 postgres: cituscluster postgres [local] idle
cituscl+   8804   6124  0 00:00 ?        00:00:00 postgres: bgworker: logical replication worker for subscription 60216  
cituscl+   9022   6124  4 00:18 ?        00:00:08 postgres: autovacuum worker process   postgres
cituscl+   9073   6124 86 00:20 ?        00:00:59 postgres: bgworker: logical replication worker for subscription 60216 sync 43764  
cituscl+   9098   8544  0 00:21 pts/0    00:00:00 grep --color=auto postgres
[cituscluster@center1 ~]$ pstack 9073
#0  0x00000000009bbf5b in swapfunc (a=0x7ffc7cf83004 "\002\001\260\r\020", b=0x7ffc7cf8301c "\n\001\060\r\020", n=6, swaptype=2) at qsort.c:91
#1  0x00000000009bc62f in pg_qsort (a=0x7ffc7cf82fe6, n=14, es=6, cmp=0x80c601 <itemoffcompare>) at qsort.c:188
#2  0x00000000009bc7cc in pg_qsort (a=0x7ffc7cf82f08, n=51, es=6, cmp=0x80c601 <itemoffcompare>) at qsort.c:217
#3  0x00000000009bc742 in pg_qsort (a=0x7ffc7cf82e30, n=190, es=6, cmp=0x80c601 <itemoffcompare>) at qsort.c:203
#4  0x000000000080c65e in compactify_tuples (itemidbase=0x7ffc7cf82a10, nitems=366, page=0x7fe7281e0680 "\003") at bufpage.c:448
#5  0x000000000080d488 in PageIndexMultiDelete (page=0x7fe7281e0680 "\003", itemnos=0x7ffc7cf83490, nitems=41) at bufpage.c:943
#6  0x00000000004d81a1 in _bt_delitems_delete (rel=0x7fe7327af500, buf=14690, itemnos=0x7ffc7cf83490, nitems=41, heapRel=0x7fe7327ab498) at nbtpage.c:876
#7  0x00000000004d6db0 in _bt_vacuum_one_page (rel=0x7fe7327af500, buffer=14690, heapRel=0x7fe7327ab498) at nbtinsert.c:2199
#8  0x00000000004d3fa4 in _bt_findinsertloc (rel=0x7fe7327af500, bufptr=0x7ffc7cf845ac, offsetptr=0x7ffc7cf845aa, keysz=1, scankey=0x2554c78, newtup=0x2554c58, stack=0x2554d38, heapRel=0x7fe7327ab498) at nbtinsert.c:617
#9  0x00000000004d3691 in _bt_doinsert (rel=0x7fe7327af500, itup=0x2554c58, checkUnique=UNIQUE_CHECK_YES, heapRel=0x7fe7327ab498) at nbtinsert.c:203
#10 0x00000000004da5d1 in btinsert (rel=0x7fe7327af500, values=0x7ffc7cf84700, isnull=0x7ffc7cf846e0 "", ht_ctid=0x2563b7c, heapRel=0x7fe7327ab498, checkUnique=UNIQUE_CHECK_YES, indexInfo=0x2536f60) at nbtree.c:330
#11 0x00000000004d2131 in index_insert (indexRelation=0x7fe7327af500, values=0x7ffc7cf84700, isnull=0x7ffc7cf846e0 "", heap_t_ctid=0x2563b7c, heapRelation=0x7fe7327ab498, checkUnique=UNIQUE_CHECK_YES, indexInfo=0x2536f60) at indexam.c:210
#12 0x000000000067718f in ExecInsertIndexTuples (slot=0x2526078, tupleid=0x2563b7c, estate=0x2550bc8, noDupErr=0 '\000', specConflict=0x0, arbiterIndexes=0x0) at execIndexing.c:386
#13 0x00000000005e8a24 in CopyFromInsertBatch (cstate=0x25271f8, estate=0x2550bc8, mycid=0, hi_options=0, resultRelInfo=0x2536be0, myslot=0x2526078, bistate=0x2554c08, nBufferedTuples=1000, bufferedTuples=0x2552bd8, firstBufferedLineNo=3031001) at copy.c:2942
#14 0x00000000005e85ab in CopyFrom (cstate=0x25271f8) at copy.c:2768
#15 0x00000000007b50cd in copy_table (rel=0x7fe7327ab498) at tablesync.c:804
#16 0x00000000007b5423 in LogicalRepSyncTableStart (origin_startpos=0x7ffc7cf84bd8) at tablesync.c:921
#17 0x00000000007b7bff in ApplyWorkerMain (main_arg=1) at worker.c:1577
#18 0x000000000077a272 in StartBackgroundWorker () at bgworker.c:835
#19 0x000000000078c035 in do_start_bgworker (rw=0x24828f0) at postmaster.c:5680
#20 0x000000000078c36f in maybe_start_bgworkers () at postmaster.c:5884
#21 0x000000000078b455 in sigusr1_handler (postgres_signal_arg=10) at postmaster.c:5073
#22 <signal handler called>
#23 0x00007fe7319f0c53 in __select_nocancel () from /lib64/libc.so.6
#24 0x00000000007872c2 in ServerLoop () at postmaster.c:1717
#25 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x243dc20) at postmaster.c:1361
#26 0x00000000006cf26f in main (argc=1, argv=0x243dc20) at main.c:228

[END] 2019/7/4 星期四 下午 3:36:57
