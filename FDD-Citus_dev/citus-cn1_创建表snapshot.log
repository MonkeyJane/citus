[BEGIN] 2019/6/6 ÐÇÆÚËÄ ÉÏÎç 11:19:19

Breakpoint 1, PushActiveSnapshot (snap=0xe16f20 <CurrentSnapshotData>) at snapmgr.c:739
739		newactive = MemoryContextAlloc(TopTransactionContext, sizeof(ActiveSnapshotElt));
(gdb) bt
#0  PushActiveSnapshot (snap=0xe16f20 <CurrentSnapshotData>) at snapmgr.c:739
#1  0x0000000000813998 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1012
#2  0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#3  0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#4  0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#5  0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#6  0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#7  0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 2, PopActiveSnapshot () at snapmgr.c:816
816		newstack = ActiveSnapshot->as_next;
(gdb) bt
#0  PopActiveSnapshot () at snapmgr.c:816
#1  0x00000000008139fb in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1032
#2  0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#3  0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#4  0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#5  0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#6  0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#7  0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 1, PushActiveSnapshot (snap=0xe16f20 <CurrentSnapshotData>) at snapmgr.c:739
739		newactive = MemoryContextAlloc(TopTransactionContext, sizeof(ActiveSnapshotElt));
(gdb) bt
#0  PushActiveSnapshot (snap=0xe16f20 <CurrentSnapshotData>) at snapmgr.c:739
#1  0x0000000000818fdc in PortalStart (portal=0x2b289c8, params=0x0, eflags=0, snapshot=0x0) at pquery.c:492
#2  0x0000000000813a72 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1060
#3  0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#4  0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#5  0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#6  0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#7  0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#8  0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aa48) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aa48) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0x2b2aa48, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0x2b2aa48) at snapmgr.c:868
#3  0x000000000081878e in CreateQueryDesc (plannedstmt=0x2afc3d0, sourceText=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');", snapshot=0x2b2aa48, 
    crosscheck_snapshot=0x0, dest=0xe0bce0 <donothingDR>, params=0x0, queryEnv=0x0, instrument_options=0) at pquery.c:81
#4  0x0000000000819043 in PortalStart (portal=0x2b289c8, params=0x0, eflags=0, snapshot=0x0) at pquery.c:498
#5  0x0000000000813a72 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1060
#6  0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#7  0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#8  0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#9  0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#10 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#11 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) b ResourceOwnerForgetSnapshot
Breakpoint 8 at 0x99ed7b: file resowner.c, line 1165.
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aa48) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aa48) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0x2b2aa48, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0x2b2aa48) at snapmgr.c:868
#3  0x00000000006786bb in standard_ExecutorStart (queryDesc=0x2b2d658, eflags=16) at execMain.c:249
#4  0x00007f12ea6253b8 in CitusExecutorStart (queryDesc=0x2b2d658, eflags=0) at executor/multi_executor.c:96
#5  0x0000000000678516 in ExecutorStart (queryDesc=0x2b2d658, eflags=0) at execMain.c:150
#6  0x0000000000819080 in PortalStart (portal=0x2b289c8, params=0x0, eflags=0, snapshot=0x0) at pquery.c:520
#7  0x0000000000813a72 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1060
#8  0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#9  0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#10 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#11 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#12 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#13 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 2, PopActiveSnapshot () at snapmgr.c:816
816		newstack = ActiveSnapshot->as_next;
(gdb) bt
#0  PopActiveSnapshot () at snapmgr.c:816
#1  0x00000000008190d8 in PortalStart (portal=0x2b289c8, params=0x0, eflags=0, snapshot=0x0) at pquery.c:539
#2  0x0000000000813a72 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1060
#3  0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#4  0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#5  0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#6  0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#7  0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#8  0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 1, PushActiveSnapshot (snap=0x2b2aa48) at snapmgr.c:739
739		newactive = MemoryContextAlloc(TopTransactionContext, sizeof(ActiveSnapshotElt));
(gdb) bt
#0  PushActiveSnapshot (snap=0x2b2aa48) at snapmgr.c:739
#1  0x00000000008198d2 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:931
#2  0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#3  0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#4  0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#5  0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#6  0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#7  0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#8  0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#9  0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c4adf0, indexId=0, indexOK=0 '\000', snapshot=0x0, nkeys=1, key=0x7ffe4144ada0) at genam.c:353
#4  0x00007f12ea6830c3 in IsChildTable (relationId=37202) at utils/multi_partitioning_utils.c:151
#5  0x00007f12ea677958 in EnsureRelationKindSupported (relationId=37202) at utils/citus_ruleutils.c:479
#6  0x00007f12ea60e74d in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:221
#7  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#8  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#9  0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#10 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#11 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#12 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#13 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#14 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#15 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#16 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#17 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#18 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#19 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#20 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#21 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#22 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#23 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#24 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#25 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) n
1157	}
(gdb) 
RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:891
891		if (snap->regd_count == 1)
(gdb) p snapshot
$1 = (Snapshot) 0xe17020 <CatalogSnapshotData>
(gdb) p* snapshot
$2 = {satisfies = 0x9afe1d <HeapTupleSatisfiesMVCC>, xmin = 803, xmax = 803, xip = 0x2a38ed0, xcnt = 0, subxip = 0x2aa2a10, subxcnt = 0, suboverflowed = 0 '\000', 
  takenDuringRecovery = 0 '\000', copied = 0 '\000', curcid = 0, speculativeToken = 0, active_count = 0, regd_count = 0, ph_node = {first_child = 0x0, next_sibling = 0x0, 
    prev_or_parent = 0x2b2aa88}, whenTaken = 0, lsn = 0}
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2aad8) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2b4f3d8) at genam.c:510
#3  0x00007f12ea683119 in IsChildTable (relationId=37202) at utils/multi_partitioning_utils.c:166
#4  0x00007f12ea677958 in EnsureRelationKindSupported (relationId=37202) at utils/citus_ruleutils.c:479
#5  0x00007f12ea60e74d in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:221
#6  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#7  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#8  0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#9  0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#10 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#11 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#12 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#13 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#14 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#15 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#16 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#17 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#18 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#19 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#20 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#21 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#22 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#23 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#24 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2aad8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2b4f3d8) at genam.c:510
#4  0x00007f12ea683119 in IsChildTable (relationId=37202) at utils/multi_partitioning_utils.c:166
#5  0x00007f12ea677958 in EnsureRelationKindSupported (relationId=37202) at utils/citus_ruleutils.c:479
#6  0x00007f12ea60e74d in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:221
#7  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#8  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#9  0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#10 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#11 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#12 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#13 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#14 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#15 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#16 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#17 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#18 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#19 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#20 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#21 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#22 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#23 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#24 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#25 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c4adf0, indexId=2187, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144adb0) at genam.c:353
#4  0x00007f12ea6831c3 in IsParentTable (relationId=37202) at utils/multi_partitioning_utils.c:197
#5  0x00007f12ea677966 in EnsureRelationKindSupported (relationId=37202) at utils/citus_ruleutils.c:480
#6  0x00007f12ea60e74d in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:221
#7  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#8  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#9  0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#10 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#11 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#12 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#13 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#14 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#15 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#16 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#17 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#18 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#19 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#20 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#21 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#22 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#23 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#24 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#25 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2aad8) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2b4f3d8) at genam.c:510
#3  0x00007f12ea6831e8 in IsParentTable (relationId=37202) at utils/multi_partitioning_utils.c:204
#4  0x00007f12ea677966 in EnsureRelationKindSupported (relationId=37202) at utils/citus_ruleutils.c:480
#5  0x00007f12ea60e74d in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:221
#6  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#7  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#8  0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#9  0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#10 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#11 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#12 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#13 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#14 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#15 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#16 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#17 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#18 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#19 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#20 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#21 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#22 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#23 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#24 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2aad8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2b4f3d8) at genam.c:510
#4  0x00007f12ea6831e8 in IsParentTable (relationId=37202) at utils/multi_partitioning_utils.c:204
#5  0x00007f12ea677966 in EnsureRelationKindSupported (relationId=37202) at utils/citus_ruleutils.c:480
#6  0x00007f12ea60e74d in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:221
#7  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#8  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#9  0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#10 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#11 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#12 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#13 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#14 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#15 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#16 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#17 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#18 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#19 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#20 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#21 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#22 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#23 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#24 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#25 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2658, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144ac10) at genam.c:353
#4  0x000000000094be9c in SearchCatCache (cache=0x2a5d4f8, v1=37202, v2=45415016, v3=0, v4=0) at catcache.c:1169
#5  0x000000000095e65e in SearchSysCache (cacheId=6, key1=37202, key2=45415016, key3=0, key4=0) at syscache.c:1109
#6  0x000000000095e80b in SearchSysCacheAttName (relid=37202, attname=0x2b4fa68 "id") at syscache.c:1209
#7  0x00007f12ea67b018 in BuildDistributionKeyFromColumnName (distributedRelation=0x7f12f1c5e810, columnName=0x2b4fa68 "id") at utils/distribution_column.c:151
#8  0x00007f12ea60e770 in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:224
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2aad8) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2b4f3d8) at genam.c:510
#3  0x000000000094bf29 in SearchCatCache (cache=0x2a5d4f8, v1=37202, v2=45415016, v3=0, v4=0) at catcache.c:1190
#4  0x000000000095e65e in SearchSysCache (cacheId=6, key1=37202, key2=45415016, key3=0, key4=0) at syscache.c:1109
#5  0x000000000095e80b in SearchSysCacheAttName (relid=37202, attname=0x2b4fa68 "id") at syscache.c:1209
#6  0x00007f12ea67b018 in BuildDistributionKeyFromColumnName (distributedRelation=0x7f12f1c5e810, columnName=0x2b4fa68 "id") at utils/distribution_column.c:151
#7  0x00007f12ea60e770 in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:224
#8  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#9  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#10 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#11 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#12 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#13 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#14 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#15 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#16 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#17 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#18 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#19 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#20 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#21 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#22 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#23 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#24 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#25 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#26 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2aad8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2b4f3d8) at genam.c:510
#4  0x000000000094bf29 in SearchCatCache (cache=0x2a5d4f8, v1=37202, v2=45415016, v3=0, v4=0) at catcache.c:1190
#5  0x000000000095e65e in SearchSysCache (cacheId=6, key1=37202, key2=45415016, key3=0, key4=0) at syscache.c:1109
#6  0x000000000095e80b in SearchSysCacheAttName (relid=37202, attname=0x2b4fa68 "id") at syscache.c:1209
#7  0x00007f12ea67b018 in BuildDistributionKeyFromColumnName (distributedRelation=0x7f12f1c5e810, columnName=0x2b4fa68 "id") at utils/distribution_column.c:151
#8  0x00007f12ea60e770 in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:224
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c4bec0, indexId=20536, indexOK=1 '\001', snapshot=0x0, nkeys=3, key=0x7ffe4144ac60) at genam.c:353
#4  0x00007f12ea679be9 in ColocationId (shardCount=32, replicationFactor=1, distributionColumnType=23) at utils/colocation_utils.c:464
#5  0x00007f12ea60ee09 in ColocationIdForNewTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', replicationModel=99 'c', 
    colocateWithTableName=0x2b4fcd0 "default", viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:564
#6  0x00007f12ea60e994 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:332
#7  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#8  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#9  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#10 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#11 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#12 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#13 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#14 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#15 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#16 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#17 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#18 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#19 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#20 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#21 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#22 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#23 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#24 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#25 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#26 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2aad8) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2b4fce8) at genam.c:510
#3  0x00007f12ea679c37 in ColocationId (shardCount=32, replicationFactor=1, distributionColumnType=23) at utils/colocation_utils.c:477
#4  0x00007f12ea60ee09 in ColocationIdForNewTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', replicationModel=99 'c', 
    colocateWithTableName=0x2b4fcd0 "default", viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:564
#5  0x00007f12ea60e994 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:332
#6  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#7  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#8  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#9  0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#10 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#11 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#12 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#13 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#14 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#15 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#16 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#17 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#18 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#19 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#20 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#21 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#22 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#23 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#24 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#25 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2aad8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2b4fce8) at genam.c:510
#4  0x00007f12ea679c37 in ColocationId (shardCount=32, replicationFactor=1, distributionColumnType=23) at utils/colocation_utils.c:477
#5  0x00007f12ea60ee09 in ColocationIdForNewTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', replicationModel=99 'c', 
    colocateWithTableName=0x2b4fcd0 "default", viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:564
#6  0x00007f12ea60e994 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:332
#7  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#8  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#9  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#10 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#11 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#12 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#13 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#14 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#15 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#16 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#17 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#18 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#19 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#20 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#21 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#22 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#23 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#24 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#25 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#26 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ac2098, indexId=2686, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144ac60) at genam.c:353
#4  0x0000000000610d63 in GetDefaultOpClass (type_id=23, am_id=405) at indexcmds.c:1427
#5  0x00007f12ea60fbf5 in SupportFunctionForColumn (partitionColumn=0x2b4f3d8, accessMethodId=405, supportFunctionNumber=1) at commands/create_distributed_table.c:1007
#6  0x00007f12ea60f0ad in EnsureRelationCanBeDistributed (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocationId=1, replicationModel=99 'c', 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:662
#7  0x00007f12ea60e9bb in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:336
#8  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2aad8) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2b4fce8) at genam.c:510
#3  0x0000000000610eea in GetDefaultOpClass (type_id=23, am_id=405) at indexcmds.c:1458
#4  0x00007f12ea60fbf5 in SupportFunctionForColumn (partitionColumn=0x2b4f3d8, accessMethodId=405, supportFunctionNumber=1) at commands/create_distributed_table.c:1007
#5  0x00007f12ea60f0ad in EnsureRelationCanBeDistributed (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocationId=1, replicationModel=99 'c', 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:662
#6  0x00007f12ea60e9bb in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:336
#7  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#8  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#9  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#10 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#11 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#12 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#13 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#14 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#15 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#16 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#17 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#18 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#19 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#20 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#21 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#22 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#23 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#24 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#25 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#26 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2aad8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2b4fce8) at genam.c:510
#4  0x0000000000610eea in GetDefaultOpClass (type_id=23, am_id=405) at indexcmds.c:1458
#5  0x00007f12ea60fbf5 in SupportFunctionForColumn (partitionColumn=0x2b4f3d8, accessMethodId=405, supportFunctionNumber=1) at commands/create_distributed_table.c:1007
#6  0x00007f12ea60f0ad in EnsureRelationCanBeDistributed (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocationId=1, replicationModel=99 'c', 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:662
#7  0x00007f12ea60e9bb in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:336
#8  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ad96d0, indexId=2665, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144abe0) at genam.c:353
#4  0x00007f12ea610d3c in ErrorIfUnsupportedForeignConstraint (relation=0x7f12f1c5e810, distributionMethod=104 'h', distributionColumn=0x2b4f3d8, colocationId=1)
    at commands/foreign_constraint.c:145
#5  0x00007f12ea6196d2 in ErrorIfUnsupportedConstraint (relation=0x7f12f1c5e810, distributionMethod=104 'h', distributionColumn=0x2b4f3d8, colocationId=1) at commands/table.c:793
#6  0x00007f12ea60f473 in EnsureRelationCanBeDistributed (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocationId=1, replicationModel=99 'c', 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:750
#7  0x00007f12ea60e9bb in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:336
#8  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
---Type <return> to continue, or q <return> to quit---c
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ad96d0, indexId=2665, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144abe0) at genam.c:353
#4  0x00007f12ea610d3c in ErrorIfUnsupportedForeignConstraint (relation=0x7f12f1c5e810, distributionMethod=104 'h', distributionColumn=0x2b4f3d8, colocationId=1)
    at commands/foreign_constraint.c:145
#5  0x00007f12ea6196d2 in ErrorIfUnsupportedConstraint (relation=0x7f12f1c5e810, distributionMethod=104 'h', distributionColumn=0x2b4f3d8, colocationId=1) at commands/table.c:793
#6  0x00007f12ea60f473 in EnsureRelationCanBeDistributed (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocationId=1, replicationModel=99 'c', 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:750
#7  0x00007f12ea60e9bb in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:336
#8  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
---Type <return> to continue, or q <return> to quit---c
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ad96d0, indexId=2665, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144abe0) at genam.c:353
#4  0x00007f12ea610d3c in ErrorIfUnsupportedForeignConstraint (relation=0x7f12f1c5e810, distributionMethod=104 'h', distributionColumn=0x2b4f3d8, colocationId=1)
    at commands/foreign_constraint.c:145
#5  0x00007f12ea6196d2 in ErrorIfUnsupportedConstraint (relation=0x7f12f1c5e810, distributionMethod=104 'h', distributionColumn=0x2b4f3d8, colocationId=1) at commands/table.c:793
#6  0x00007f12ea60f473 in EnsureRelationCanBeDistributed (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocationId=1, replicationModel=99 'c', 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:750
#7  0x00007f12ea60e9bb in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:336
#8  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
---Type <return> to continue, or q <return> to quit---c
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2aad8) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2b4fce8) at genam.c:510
#3  0x00007f12ea611336 in ErrorIfUnsupportedForeignConstraint (relation=0x7f12f1c5e810, distributionMethod=104 'h', distributionColumn=0x2b4f3d8, colocationId=1)
    at commands/foreign_constraint.c:373
#4  0x00007f12ea6196d2 in ErrorIfUnsupportedConstraint (relation=0x7f12f1c5e810, distributionMethod=104 'h', distributionColumn=0x2b4f3d8, colocationId=1) at commands/table.c:793
#5  0x00007f12ea60f473 in EnsureRelationCanBeDistributed (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocationId=1, replicationModel=99 'c', 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:750
#6  0x00007f12ea60e9bb in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:336
#7  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#8  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#9  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#10 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#11 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#12 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#13 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#14 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#15 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#16 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#17 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#18 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#19 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#20 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#21 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#22 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#23 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#24 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#25 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#26 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2aad8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2b4fce8) at genam.c:510
#4  0x00007f12ea611336 in ErrorIfUnsupportedForeignConstraint (relation=0x7f12f1c5e810, distributionMethod=104 'h', distributionColumn=0x2b4f3d8, colocationId=1)
    at commands/foreign_constraint.c:373
#5  0x00007f12ea6196d2 in ErrorIfUnsupportedConstraint (relation=0x7f12f1c5e810, distributionMethod=104 'h', distributionColumn=0x2b4f3d8, colocationId=1) at commands/table.c:793
#6  0x00007f12ea60f473 in EnsureRelationCanBeDistributed (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocationId=1, replicationModel=99 'c', 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:750
#7  0x00007f12ea60e9bb in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:336
#8  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
---Type <return> to continue, or q <return> to quit---
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c4e510, indexId=3258, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144acb0) at genam.c:353
#4  0x000000000061c2a9 in relation_has_policies (rel=0x7f12f1c5e810) at policy.c:1376
#5  0x00007f12ea617c26 in ErrorIfUnsupportedPolicy (relation=0x7f12f1c5e810) at commands/policy.c:61
#6  0x00007f12ea60f47f in EnsureRelationCanBeDistributed (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocationId=1, replicationModel=99 'c', 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:754
#7  0x00007f12ea60e9bb in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:336
#8  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2aad8) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2b4fce8) at genam.c:510
#3  0x000000000061c2d4 in relation_has_policies (rel=0x7f12f1c5e810) at policy.c:1382
#4  0x00007f12ea617c26 in ErrorIfUnsupportedPolicy (relation=0x7f12f1c5e810) at commands/policy.c:61
#5  0x00007f12ea60f47f in EnsureRelationCanBeDistributed (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocationId=1, replicationModel=99 'c', 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:754
#6  0x00007f12ea60e9bb in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:336
#7  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#8  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#9  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#10 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#11 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#12 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#13 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#14 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#15 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#16 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#17 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#18 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#19 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#20 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#21 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#22 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#23 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#24 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#25 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#26 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2aad8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2b4fce8) at genam.c:510
#4  0x000000000061c2d4 in relation_has_policies (rel=0x7f12f1c5e810) at policy.c:1382
#5  0x00007f12ea617c26 in ErrorIfUnsupportedPolicy (relation=0x7f12f1c5e810) at commands/policy.c:61
#6  0x00007f12ea60f47f in EnsureRelationCanBeDistributed (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocationId=1, replicationModel=99 'c', 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:754
#7  0x00007f12ea60e9bb in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:336
#8  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1ce7e10, indexId=2696, indexOK=1 '\001', snapshot=0x0, nkeys=3, key=0x7ffe41449650) at genam.c:353
#4  0x000000000094be9c in SearchCatCache (cache=0x2a6af38, v1=37202, v2=1, v3=0, v4=0) at catcache.c:1169
#5  0x000000000095e65e in SearchSysCache (cacheId=57, key1=37202, key2=1, key3=0, key4=0) at syscache.c:1109
#6  0x0000000000962ad4 in get_attavgwidth (relid=37202, attnum=1) at lsyscache.c:2839
#7  0x000000000076bde8 in get_rel_data_width (rel=0x7f12f1c5e810, attr_widths=0x2cbd3ac) at plancat.c:1089
#8  0x000000000076bb47 in estimate_rel_size (rel=0x7f12f1c5e810, attr_widths=0x2cbd3ac, pages=0x2cbd138, tuples=0x2cbd140, allvisfrac=0x2cbd148) at plancat.c:1011
#9  0x000000000076a595 in get_relation_info (root=0x2cbce38, relationObjectId=37202, inhparent=0 '\000', rel=0x2cbd088) at plancat.c:139
#10 0x000000000076f866 in build_simple_rel (root=0x2cbce38, relid=1, parent=0x0) at relnode.c:171
#11 0x000000000073e5c7 in add_base_rels_to_query (root=0x2cbce38, jtnode=0x2b53350) at initsplan.c:112
#12 0x000000000073e60d in add_base_rels_to_query (root=0x2cbce38, jtnode=0x2b532d0) at initsplan.c:120
#13 0x000000000074267e in query_planner (root=0x2cbce38, tlist=0x0, qp_callback=0x74768b <standard_qp_callback>, qp_extra=0x7ffe41449bb0) at planmain.c:138
#14 0x0000000000744f81 in grouping_planner (root=0x2cbce38, inheritance_update=0 '\000', tuple_fraction=1) at planner.c:1714
#15 0x0000000000743b2e in subquery_planner (glob=0x2b52c38, parse=0x2b52320, parent_root=0x2b52cc8, hasRecursion=0 '\000', tuple_fraction=1) at planner.c:862
#16 0x00000000007506a2 in make_subplan (root=0x2b52cc8, orig_subquery=0x2b52430, subLinkType=EXISTS_SUBLINK, subLinkId=0, testexpr=0x0, isTopQual=0 '\000') at subselect.c:534
#17 0x000000000075283c in process_sublinks_mutator (node=0x2b52f58, context=0x7ffe4144a2a0) at subselect.c:1977
#18 0x00000000006d4048 in expression_tree_mutator (node=0x2b52f08, mutator=0x7527a3 <process_sublinks_mutator>, context=0x7ffe4144a2a0) at nodeFuncs.c:2854
#19 0x0000000000752a15 in process_sublinks_mutator (node=0x2b52f08, context=0x7ffe4144a660) at subselect.c:2073
#20 0x00000000006d4231 in expression_tree_mutator (node=0x2b52fc8, mutator=0x7527a3 <process_sublinks_mutator>, context=0x7ffe4144a660) at nodeFuncs.c:2903
#21 0x0000000000752a15 in process_sublinks_mutator (node=0x2b52fc8, context=0x7ffe4144a6e0) at subselect.c:2073
#22 0x00000000007527a1 in SS_process_sublinks (root=0x2b52cc8, expr=0x2b52fc8, isQual=0 '\000') at subselect.c:1950
#23 0x0000000000743c46 in preprocess_expression (root=0x2b52cc8, expr=0x2b52fc8, kind=1) at planner.c:954
#24 0x00000000007433b4 in subquery_planner (glob=0x2b52c38, parse=0x2b52210, parent_root=0x0, hasRecursion=0 '\000', tuple_fraction=0) at planner.c:628
#25 0x0000000000742b54 in standard_planner (parse=0x2b52210, cursorOptions=256, boundParams=0x0) at planner.c:334
#26 0x00007f12ea63c61b in distributed_planner (parse=0x2b52210, cursorOptions=256, boundParams=0x0) at planner/distributed_planner.c:172
#27 0x00000000007428cc in planner (parse=0x2b52210, cursorOptions=256, boundParams=0x0) at planner.c:208
#28 0x000000000081361a in pg_plan_query (querytree=0x2b52210, cursorOptions=256, boundParams=0x0) at postgres.c:796
#29 0x000000000081373a in pg_plan_queries (querytrees=0x2b52b00, cursorOptions=256, boundParams=0x0) at postgres.c:862
#30 0x000000000094fe6e in BuildCachedPlan (plansource=0x2b51fa0, qlist=0x2b52b00, boundParams=0x0, queryEnv=0x0) at plancache.c:937
#31 0x000000000095039d in GetCachedPlan (plansource=0x2b51fa0, boundParams=0x0, useResOwner=0 '\000', queryEnv=0x0) at plancache.c:1211
---Type <return> to continue, or q <return> to quit---
#32 0x00000000006b6eb4 in _SPI_execute_plan (plan=0x7ffe4144ad40, paramLI=0x0, snapshot=0x0, crosscheck_snapshot=0x0, read_only=1 '\001', fire_triggers=1 '\001', tcount=0) at spi.c:2027
#33 0x00000000006b4286 in SPI_execute (src=0x2b4fdd0 "SELECT EXISTS (SELECT 1 FROM public.test2)", read_only=1 '\001', tcount=0) at spi.c:328
#34 0x00007f12ea60fddb in LocalTableEmpty (tableId=37202) at commands/create_distributed_table.c:1066
#35 0x00007f12ea60e9c5 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:340
#36 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#37 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#38 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#39 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#40 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#41 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#42 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#43 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#44 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#45 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#46 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#47 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#48 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#49 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#50 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#51 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#52 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#53 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#54 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#55 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2aad8) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbd3e0) at genam.c:510
#3  0x000000000094bf29 in SearchCatCache (cache=0x2a6af38, v1=37202, v2=1, v3=0, v4=0) at catcache.c:1190
#4  0x000000000095e65e in SearchSysCache (cacheId=57, key1=37202, key2=1, key3=0, key4=0) at syscache.c:1109
#5  0x0000000000962ad4 in get_attavgwidth (relid=37202, attnum=1) at lsyscache.c:2839
#6  0x000000000076bde8 in get_rel_data_width (rel=0x7f12f1c5e810, attr_widths=0x2cbd3ac) at plancat.c:1089
#7  0x000000000076bb47 in estimate_rel_size (rel=0x7f12f1c5e810, attr_widths=0x2cbd3ac, pages=0x2cbd138, tuples=0x2cbd140, allvisfrac=0x2cbd148) at plancat.c:1011
#8  0x000000000076a595 in get_relation_info (root=0x2cbce38, relationObjectId=37202, inhparent=0 '\000', rel=0x2cbd088) at plancat.c:139
#9  0x000000000076f866 in build_simple_rel (root=0x2cbce38, relid=1, parent=0x0) at relnode.c:171
#10 0x000000000073e5c7 in add_base_rels_to_query (root=0x2cbce38, jtnode=0x2b53350) at initsplan.c:112
#11 0x000000000073e60d in add_base_rels_to_query (root=0x2cbce38, jtnode=0x2b532d0) at initsplan.c:120
#12 0x000000000074267e in query_planner (root=0x2cbce38, tlist=0x0, qp_callback=0x74768b <standard_qp_callback>, qp_extra=0x7ffe41449bb0) at planmain.c:138
#13 0x0000000000744f81 in grouping_planner (root=0x2cbce38, inheritance_update=0 '\000', tuple_fraction=1) at planner.c:1714
#14 0x0000000000743b2e in subquery_planner (glob=0x2b52c38, parse=0x2b52320, parent_root=0x2b52cc8, hasRecursion=0 '\000', tuple_fraction=1) at planner.c:862
#15 0x00000000007506a2 in make_subplan (root=0x2b52cc8, orig_subquery=0x2b52430, subLinkType=EXISTS_SUBLINK, subLinkId=0, testexpr=0x0, isTopQual=0 '\000') at subselect.c:534
#16 0x000000000075283c in process_sublinks_mutator (node=0x2b52f58, context=0x7ffe4144a2a0) at subselect.c:1977
#17 0x00000000006d4048 in expression_tree_mutator (node=0x2b52f08, mutator=0x7527a3 <process_sublinks_mutator>, context=0x7ffe4144a2a0) at nodeFuncs.c:2854
#18 0x0000000000752a15 in process_sublinks_mutator (node=0x2b52f08, context=0x7ffe4144a660) at subselect.c:2073
#19 0x00000000006d4231 in expression_tree_mutator (node=0x2b52fc8, mutator=0x7527a3 <process_sublinks_mutator>, context=0x7ffe4144a660) at nodeFuncs.c:2903
#20 0x0000000000752a15 in process_sublinks_mutator (node=0x2b52fc8, context=0x7ffe4144a6e0) at subselect.c:2073
#21 0x00000000007527a1 in SS_process_sublinks (root=0x2b52cc8, expr=0x2b52fc8, isQual=0 '\000') at subselect.c:1950
#22 0x0000000000743c46 in preprocess_expression (root=0x2b52cc8, expr=0x2b52fc8, kind=1) at planner.c:954
#23 0x00000000007433b4 in subquery_planner (glob=0x2b52c38, parse=0x2b52210, parent_root=0x0, hasRecursion=0 '\000', tuple_fraction=0) at planner.c:628
#24 0x0000000000742b54 in standard_planner (parse=0x2b52210, cursorOptions=256, boundParams=0x0) at planner.c:334
#25 0x00007f12ea63c61b in distributed_planner (parse=0x2b52210, cursorOptions=256, boundParams=0x0) at planner/distributed_planner.c:172
#26 0x00000000007428cc in planner (parse=0x2b52210, cursorOptions=256, boundParams=0x0) at planner.c:208
#27 0x000000000081361a in pg_plan_query (querytree=0x2b52210, cursorOptions=256, boundParams=0x0) at postgres.c:796
#28 0x000000000081373a in pg_plan_queries (querytrees=0x2b52b00, cursorOptions=256, boundParams=0x0) at postgres.c:862
#29 0x000000000094fe6e in BuildCachedPlan (plansource=0x2b51fa0, qlist=0x2b52b00, boundParams=0x0, queryEnv=0x0) at plancache.c:937
#30 0x000000000095039d in GetCachedPlan (plansource=0x2b51fa0, boundParams=0x0, useResOwner=0 '\000', queryEnv=0x0) at plancache.c:1211
#31 0x00000000006b6eb4 in _SPI_execute_plan (plan=0x7ffe4144ad40, paramLI=0x0, snapshot=0x0, crosscheck_snapshot=0x0, read_only=1 '\001', fire_triggers=1 '\001', tcount=0) at spi.c:2027
---Type <return> to continue, or q <return> to quit---
#32 0x00000000006b4286 in SPI_execute (src=0x2b4fdd0 "SELECT EXISTS (SELECT 1 FROM public.test2)", read_only=1 '\001', tcount=0) at spi.c:328
#33 0x00007f12ea60fddb in LocalTableEmpty (tableId=37202) at commands/create_distributed_table.c:1066
#34 0x00007f12ea60e9c5 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:340
#35 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#36 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#37 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#38 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#39 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#40 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#41 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#42 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#43 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#44 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#45 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#46 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#47 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#48 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#49 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#50 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#51 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#52 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#53 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#54 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2aad8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbd3e0) at genam.c:510
#4  0x000000000094bf29 in SearchCatCache (cache=0x2a6af38, v1=37202, v2=1, v3=0, v4=0) at catcache.c:1190
#5  0x000000000095e65e in SearchSysCache (cacheId=57, key1=37202, key2=1, key3=0, key4=0) at syscache.c:1109
#6  0x0000000000962ad4 in get_attavgwidth (relid=37202, attnum=1) at lsyscache.c:2839
#7  0x000000000076bde8 in get_rel_data_width (rel=0x7f12f1c5e810, attr_widths=0x2cbd3ac) at plancat.c:1089
#8  0x000000000076bb47 in estimate_rel_size (rel=0x7f12f1c5e810, attr_widths=0x2cbd3ac, pages=0x2cbd138, tuples=0x2cbd140, allvisfrac=0x2cbd148) at plancat.c:1011
#9  0x000000000076a595 in get_relation_info (root=0x2cbce38, relationObjectId=37202, inhparent=0 '\000', rel=0x2cbd088) at plancat.c:139
#10 0x000000000076f866 in build_simple_rel (root=0x2cbce38, relid=1, parent=0x0) at relnode.c:171
#11 0x000000000073e5c7 in add_base_rels_to_query (root=0x2cbce38, jtnode=0x2b53350) at initsplan.c:112
#12 0x000000000073e60d in add_base_rels_to_query (root=0x2cbce38, jtnode=0x2b532d0) at initsplan.c:120
#13 0x000000000074267e in query_planner (root=0x2cbce38, tlist=0x0, qp_callback=0x74768b <standard_qp_callback>, qp_extra=0x7ffe41449bb0) at planmain.c:138
#14 0x0000000000744f81 in grouping_planner (root=0x2cbce38, inheritance_update=0 '\000', tuple_fraction=1) at planner.c:1714
#15 0x0000000000743b2e in subquery_planner (glob=0x2b52c38, parse=0x2b52320, parent_root=0x2b52cc8, hasRecursion=0 '\000', tuple_fraction=1) at planner.c:862
#16 0x00000000007506a2 in make_subplan (root=0x2b52cc8, orig_subquery=0x2b52430, subLinkType=EXISTS_SUBLINK, subLinkId=0, testexpr=0x0, isTopQual=0 '\000') at subselect.c:534
#17 0x000000000075283c in process_sublinks_mutator (node=0x2b52f58, context=0x7ffe4144a2a0) at subselect.c:1977
#18 0x00000000006d4048 in expression_tree_mutator (node=0x2b52f08, mutator=0x7527a3 <process_sublinks_mutator>, context=0x7ffe4144a2a0) at nodeFuncs.c:2854
#19 0x0000000000752a15 in process_sublinks_mutator (node=0x2b52f08, context=0x7ffe4144a660) at subselect.c:2073
#20 0x00000000006d4231 in expression_tree_mutator (node=0x2b52fc8, mutator=0x7527a3 <process_sublinks_mutator>, context=0x7ffe4144a660) at nodeFuncs.c:2903
#21 0x0000000000752a15 in process_sublinks_mutator (node=0x2b52fc8, context=0x7ffe4144a6e0) at subselect.c:2073
#22 0x00000000007527a1 in SS_process_sublinks (root=0x2b52cc8, expr=0x2b52fc8, isQual=0 '\000') at subselect.c:1950
#23 0x0000000000743c46 in preprocess_expression (root=0x2b52cc8, expr=0x2b52fc8, kind=1) at planner.c:954
#24 0x00000000007433b4 in subquery_planner (glob=0x2b52c38, parse=0x2b52210, parent_root=0x0, hasRecursion=0 '\000', tuple_fraction=0) at planner.c:628
#25 0x0000000000742b54 in standard_planner (parse=0x2b52210, cursorOptions=256, boundParams=0x0) at planner.c:334
#26 0x00007f12ea63c61b in distributed_planner (parse=0x2b52210, cursorOptions=256, boundParams=0x0) at planner/distributed_planner.c:172
#27 0x00000000007428cc in planner (parse=0x2b52210, cursorOptions=256, boundParams=0x0) at planner.c:208
#28 0x000000000081361a in pg_plan_query (querytree=0x2b52210, cursorOptions=256, boundParams=0x0) at postgres.c:796
#29 0x000000000081373a in pg_plan_queries (querytrees=0x2b52b00, cursorOptions=256, boundParams=0x0) at postgres.c:862
#30 0x000000000094fe6e in BuildCachedPlan (plansource=0x2b51fa0, qlist=0x2b52b00, boundParams=0x0, queryEnv=0x0) at plancache.c:937
#31 0x000000000095039d in GetCachedPlan (plansource=0x2b51fa0, boundParams=0x0, useResOwner=0 '\000', queryEnv=0x0) at plancache.c:1211
---Type <return> to continue, or q <return> to quit---
#32 0x00000000006b6eb4 in _SPI_execute_plan (plan=0x7ffe4144ad40, paramLI=0x0, snapshot=0x0, crosscheck_snapshot=0x0, read_only=1 '\001', fire_triggers=1 '\001', tcount=0) at spi.c:2027
#33 0x00000000006b4286 in SPI_execute (src=0x2b4fdd0 "SELECT EXISTS (SELECT 1 FROM public.test2)", read_only=1 '\001', tcount=0) at spi.c:328
#34 0x00007f12ea60fddb in LocalTableEmpty (tableId=37202) at commands/create_distributed_table.c:1066
#35 0x00007f12ea60e9c5 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:340
#36 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#37 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#38 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#39 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#40 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#41 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#42 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#43 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#44 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#45 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#46 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#47 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#48 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#49 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#50 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#51 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#52 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#53 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#54 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#55 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1ce7e10, indexId=2696, indexOK=1 '\001', snapshot=0x0, nkeys=3, key=0x7ffe41449650) at genam.c:353
#4  0x000000000094be9c in SearchCatCache (cache=0x2a6af38, v1=37202, v2=2, v3=0, v4=0) at catcache.c:1169
#5  0x000000000095e65e in SearchSysCache (cacheId=57, key1=37202, key2=2, key3=0, key4=0) at syscache.c:1109
#6  0x0000000000962ad4 in get_attavgwidth (relid=37202, attnum=2) at lsyscache.c:2839
#7  0x000000000076bde8 in get_rel_data_width (rel=0x7f12f1c5e810, attr_widths=0x2cbd3ac) at plancat.c:1089
#8  0x000000000076bb47 in estimate_rel_size (rel=0x7f12f1c5e810, attr_widths=0x2cbd3ac, pages=0x2cbd138, tuples=0x2cbd140, allvisfrac=0x2cbd148) at plancat.c:1011
#9  0x000000000076a595 in get_relation_info (root=0x2cbce38, relationObjectId=37202, inhparent=0 '\000', rel=0x2cbd088) at plancat.c:139
#10 0x000000000076f866 in build_simple_rel (root=0x2cbce38, relid=1, parent=0x0) at relnode.c:171
#11 0x000000000073e5c7 in add_base_rels_to_query (root=0x2cbce38, jtnode=0x2b53350) at initsplan.c:112
#12 0x000000000073e60d in add_base_rels_to_query (root=0x2cbce38, jtnode=0x2b532d0) at initsplan.c:120
#13 0x000000000074267e in query_planner (root=0x2cbce38, tlist=0x0, qp_callback=0x74768b <standard_qp_callback>, qp_extra=0x7ffe41449bb0) at planmain.c:138
#14 0x0000000000744f81 in grouping_planner (root=0x2cbce38, inheritance_update=0 '\000', tuple_fraction=1) at planner.c:1714
#15 0x0000000000743b2e in subquery_planner (glob=0x2b52c38, parse=0x2b52320, parent_root=0x2b52cc8, hasRecursion=0 '\000', tuple_fraction=1) at planner.c:862
#16 0x00000000007506a2 in make_subplan (root=0x2b52cc8, orig_subquery=0x2b52430, subLinkType=EXISTS_SUBLINK, subLinkId=0, testexpr=0x0, isTopQual=0 '\000') at subselect.c:534
#17 0x000000000075283c in process_sublinks_mutator (node=0x2b52f58, context=0x7ffe4144a2a0) at subselect.c:1977
#18 0x00000000006d4048 in expression_tree_mutator (node=0x2b52f08, mutator=0x7527a3 <process_sublinks_mutator>, context=0x7ffe4144a2a0) at nodeFuncs.c:2854
#19 0x0000000000752a15 in process_sublinks_mutator (node=0x2b52f08, context=0x7ffe4144a660) at subselect.c:2073
#20 0x00000000006d4231 in expression_tree_mutator (node=0x2b52fc8, mutator=0x7527a3 <process_sublinks_mutator>, context=0x7ffe4144a660) at nodeFuncs.c:2903
#21 0x0000000000752a15 in process_sublinks_mutator (node=0x2b52fc8, context=0x7ffe4144a6e0) at subselect.c:2073
#22 0x00000000007527a1 in SS_process_sublinks (root=0x2b52cc8, expr=0x2b52fc8, isQual=0 '\000') at subselect.c:1950
#23 0x0000000000743c46 in preprocess_expression (root=0x2b52cc8, expr=0x2b52fc8, kind=1) at planner.c:954
#24 0x00000000007433b4 in subquery_planner (glob=0x2b52c38, parse=0x2b52210, parent_root=0x0, hasRecursion=0 '\000', tuple_fraction=0) at planner.c:628
#25 0x0000000000742b54 in standard_planner (parse=0x2b52210, cursorOptions=256, boundParams=0x0) at planner.c:334
#26 0x00007f12ea63c61b in distributed_planner (parse=0x2b52210, cursorOptions=256, boundParams=0x0) at planner/distributed_planner.c:172
#27 0x00000000007428cc in planner (parse=0x2b52210, cursorOptions=256, boundParams=0x0) at planner.c:208
#28 0x000000000081361a in pg_plan_query (querytree=0x2b52210, cursorOptions=256, boundParams=0x0) at postgres.c:796
#29 0x000000000081373a in pg_plan_queries (querytrees=0x2b52b00, cursorOptions=256, boundParams=0x0) at postgres.c:862
#30 0x000000000094fe6e in BuildCachedPlan (plansource=0x2b51fa0, qlist=0x2b52b00, boundParams=0x0, queryEnv=0x0) at plancache.c:937
#31 0x000000000095039d in GetCachedPlan (plansource=0x2b51fa0, boundParams=0x0, useResOwner=0 '\000', queryEnv=0x0) at plancache.c:1211
---Type <return> to continue, or q <return> to quit---
#32 0x00000000006b6eb4 in _SPI_execute_plan (plan=0x7ffe4144ad40, paramLI=0x0, snapshot=0x0, crosscheck_snapshot=0x0, read_only=1 '\001', fire_triggers=1 '\001', tcount=0) at spi.c:2027
#33 0x00000000006b4286 in SPI_execute (src=0x2b4fdd0 "SELECT EXISTS (SELECT 1 FROM public.test2)", read_only=1 '\001', tcount=0) at spi.c:328
#34 0x00007f12ea60fddb in LocalTableEmpty (tableId=37202) at commands/create_distributed_table.c:1066
#35 0x00007f12ea60e9c5 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:340
#36 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#37 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#38 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#39 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#40 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#41 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#42 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#43 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#44 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#45 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#46 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#47 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#48 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#49 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#50 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#51 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#52 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#53 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#54 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#55 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2aad8) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbd3e0) at genam.c:510
#3  0x000000000094bf29 in SearchCatCache (cache=0x2a6af38, v1=37202, v2=2, v3=0, v4=0) at catcache.c:1190
#4  0x000000000095e65e in SearchSysCache (cacheId=57, key1=37202, key2=2, key3=0, key4=0) at syscache.c:1109
#5  0x0000000000962ad4 in get_attavgwidth (relid=37202, attnum=2) at lsyscache.c:2839
#6  0x000000000076bde8 in get_rel_data_width (rel=0x7f12f1c5e810, attr_widths=0x2cbd3ac) at plancat.c:1089
#7  0x000000000076bb47 in estimate_rel_size (rel=0x7f12f1c5e810, attr_widths=0x2cbd3ac, pages=0x2cbd138, tuples=0x2cbd140, allvisfrac=0x2cbd148) at plancat.c:1011
#8  0x000000000076a595 in get_relation_info (root=0x2cbce38, relationObjectId=37202, inhparent=0 '\000', rel=0x2cbd088) at plancat.c:139
#9  0x000000000076f866 in build_simple_rel (root=0x2cbce38, relid=1, parent=0x0) at relnode.c:171
#10 0x000000000073e5c7 in add_base_rels_to_query (root=0x2cbce38, jtnode=0x2b53350) at initsplan.c:112
#11 0x000000000073e60d in add_base_rels_to_query (root=0x2cbce38, jtnode=0x2b532d0) at initsplan.c:120
#12 0x000000000074267e in query_planner (root=0x2cbce38, tlist=0x0, qp_callback=0x74768b <standard_qp_callback>, qp_extra=0x7ffe41449bb0) at planmain.c:138
#13 0x0000000000744f81 in grouping_planner (root=0x2cbce38, inheritance_update=0 '\000', tuple_fraction=1) at planner.c:1714
#14 0x0000000000743b2e in subquery_planner (glob=0x2b52c38, parse=0x2b52320, parent_root=0x2b52cc8, hasRecursion=0 '\000', tuple_fraction=1) at planner.c:862
#15 0x00000000007506a2 in make_subplan (root=0x2b52cc8, orig_subquery=0x2b52430, subLinkType=EXISTS_SUBLINK, subLinkId=0, testexpr=0x0, isTopQual=0 '\000') at subselect.c:534
#16 0x000000000075283c in process_sublinks_mutator (node=0x2b52f58, context=0x7ffe4144a2a0) at subselect.c:1977
#17 0x00000000006d4048 in expression_tree_mutator (node=0x2b52f08, mutator=0x7527a3 <process_sublinks_mutator>, context=0x7ffe4144a2a0) at nodeFuncs.c:2854
#18 0x0000000000752a15 in process_sublinks_mutator (node=0x2b52f08, context=0x7ffe4144a660) at subselect.c:2073
#19 0x00000000006d4231 in expression_tree_mutator (node=0x2b52fc8, mutator=0x7527a3 <process_sublinks_mutator>, context=0x7ffe4144a660) at nodeFuncs.c:2903
#20 0x0000000000752a15 in process_sublinks_mutator (node=0x2b52fc8, context=0x7ffe4144a6e0) at subselect.c:2073
#21 0x00000000007527a1 in SS_process_sublinks (root=0x2b52cc8, expr=0x2b52fc8, isQual=0 '\000') at subselect.c:1950
#22 0x0000000000743c46 in preprocess_expression (root=0x2b52cc8, expr=0x2b52fc8, kind=1) at planner.c:954
#23 0x00000000007433b4 in subquery_planner (glob=0x2b52c38, parse=0x2b52210, parent_root=0x0, hasRecursion=0 '\000', tuple_fraction=0) at planner.c:628
#24 0x0000000000742b54 in standard_planner (parse=0x2b52210, cursorOptions=256, boundParams=0x0) at planner.c:334
#25 0x00007f12ea63c61b in distributed_planner (parse=0x2b52210, cursorOptions=256, boundParams=0x0) at planner/distributed_planner.c:172
#26 0x00000000007428cc in planner (parse=0x2b52210, cursorOptions=256, boundParams=0x0) at planner.c:208
#27 0x000000000081361a in pg_plan_query (querytree=0x2b52210, cursorOptions=256, boundParams=0x0) at postgres.c:796
#28 0x000000000081373a in pg_plan_queries (querytrees=0x2b52b00, cursorOptions=256, boundParams=0x0) at postgres.c:862
#29 0x000000000094fe6e in BuildCachedPlan (plansource=0x2b51fa0, qlist=0x2b52b00, boundParams=0x0, queryEnv=0x0) at plancache.c:937
#30 0x000000000095039d in GetCachedPlan (plansource=0x2b51fa0, boundParams=0x0, useResOwner=0 '\000', queryEnv=0x0) at plancache.c:1211
#31 0x00000000006b6eb4 in _SPI_execute_plan (plan=0x7ffe4144ad40, paramLI=0x0, snapshot=0x0, crosscheck_snapshot=0x0, read_only=1 '\001', fire_triggers=1 '\001', tcount=0) at spi.c:2027
---Type <return> to continue, or q <return> to quit---
#32 0x00000000006b4286 in SPI_execute (src=0x2b4fdd0 "SELECT EXISTS (SELECT 1 FROM public.test2)", read_only=1 '\001', tcount=0) at spi.c:328
#33 0x00007f12ea60fddb in LocalTableEmpty (tableId=37202) at commands/create_distributed_table.c:1066
#34 0x00007f12ea60e9c5 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:340
#35 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#36 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#37 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#38 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#39 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#40 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#41 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#42 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#43 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#44 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#45 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#46 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#47 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#48 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#49 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#50 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#51 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#52 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#53 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#54 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2aad8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbd3e0) at genam.c:510
#4  0x000000000094bf29 in SearchCatCache (cache=0x2a6af38, v1=37202, v2=2, v3=0, v4=0) at catcache.c:1190
#5  0x000000000095e65e in SearchSysCache (cacheId=57, key1=37202, key2=2, key3=0, key4=0) at syscache.c:1109
#6  0x0000000000962ad4 in get_attavgwidth (relid=37202, attnum=2) at lsyscache.c:2839
#7  0x000000000076bde8 in get_rel_data_width (rel=0x7f12f1c5e810, attr_widths=0x2cbd3ac) at plancat.c:1089
#8  0x000000000076bb47 in estimate_rel_size (rel=0x7f12f1c5e810, attr_widths=0x2cbd3ac, pages=0x2cbd138, tuples=0x2cbd140, allvisfrac=0x2cbd148) at plancat.c:1011
#9  0x000000000076a595 in get_relation_info (root=0x2cbce38, relationObjectId=37202, inhparent=0 '\000', rel=0x2cbd088) at plancat.c:139
#10 0x000000000076f866 in build_simple_rel (root=0x2cbce38, relid=1, parent=0x0) at relnode.c:171
#11 0x000000000073e5c7 in add_base_rels_to_query (root=0x2cbce38, jtnode=0x2b53350) at initsplan.c:112
#12 0x000000000073e60d in add_base_rels_to_query (root=0x2cbce38, jtnode=0x2b532d0) at initsplan.c:120
#13 0x000000000074267e in query_planner (root=0x2cbce38, tlist=0x0, qp_callback=0x74768b <standard_qp_callback>, qp_extra=0x7ffe41449bb0) at planmain.c:138
#14 0x0000000000744f81 in grouping_planner (root=0x2cbce38, inheritance_update=0 '\000', tuple_fraction=1) at planner.c:1714
#15 0x0000000000743b2e in subquery_planner (glob=0x2b52c38, parse=0x2b52320, parent_root=0x2b52cc8, hasRecursion=0 '\000', tuple_fraction=1) at planner.c:862
#16 0x00000000007506a2 in make_subplan (root=0x2b52cc8, orig_subquery=0x2b52430, subLinkType=EXISTS_SUBLINK, subLinkId=0, testexpr=0x0, isTopQual=0 '\000') at subselect.c:534
#17 0x000000000075283c in process_sublinks_mutator (node=0x2b52f58, context=0x7ffe4144a2a0) at subselect.c:1977
#18 0x00000000006d4048 in expression_tree_mutator (node=0x2b52f08, mutator=0x7527a3 <process_sublinks_mutator>, context=0x7ffe4144a2a0) at nodeFuncs.c:2854
#19 0x0000000000752a15 in process_sublinks_mutator (node=0x2b52f08, context=0x7ffe4144a660) at subselect.c:2073
#20 0x00000000006d4231 in expression_tree_mutator (node=0x2b52fc8, mutator=0x7527a3 <process_sublinks_mutator>, context=0x7ffe4144a660) at nodeFuncs.c:2903
#21 0x0000000000752a15 in process_sublinks_mutator (node=0x2b52fc8, context=0x7ffe4144a6e0) at subselect.c:2073
#22 0x00000000007527a1 in SS_process_sublinks (root=0x2b52cc8, expr=0x2b52fc8, isQual=0 '\000') at subselect.c:1950
#23 0x0000000000743c46 in preprocess_expression (root=0x2b52cc8, expr=0x2b52fc8, kind=1) at planner.c:954
#24 0x00000000007433b4 in subquery_planner (glob=0x2b52c38, parse=0x2b52210, parent_root=0x0, hasRecursion=0 '\000', tuple_fraction=0) at planner.c:628
#25 0x0000000000742b54 in standard_planner (parse=0x2b52210, cursorOptions=256, boundParams=0x0) at planner.c:334
#26 0x00007f12ea63c61b in distributed_planner (parse=0x2b52210, cursorOptions=256, boundParams=0x0) at planner/distributed_planner.c:172
#27 0x00000000007428cc in planner (parse=0x2b52210, cursorOptions=256, boundParams=0x0) at planner.c:208
#28 0x000000000081361a in pg_plan_query (querytree=0x2b52210, cursorOptions=256, boundParams=0x0) at postgres.c:796
#29 0x000000000081373a in pg_plan_queries (querytrees=0x2b52b00, cursorOptions=256, boundParams=0x0) at postgres.c:862
#30 0x000000000094fe6e in BuildCachedPlan (plansource=0x2b51fa0, qlist=0x2b52b00, boundParams=0x0, queryEnv=0x0) at plancache.c:937
#31 0x000000000095039d in GetCachedPlan (plansource=0x2b51fa0, boundParams=0x0, useResOwner=0 '\000', queryEnv=0x0) at plancache.c:1211
---Type <return> to continue, or q <return> to quit---
#32 0x00000000006b6eb4 in _SPI_execute_plan (plan=0x7ffe4144ad40, paramLI=0x0, snapshot=0x0, crosscheck_snapshot=0x0, read_only=1 '\001', fire_triggers=1 '\001', tcount=0) at spi.c:2027
#33 0x00000000006b4286 in SPI_execute (src=0x2b4fdd0 "SELECT EXISTS (SELECT 1 FROM public.test2)", read_only=1 '\001', tcount=0) at spi.c:328
#34 0x00007f12ea60fddb in LocalTableEmpty (tableId=37202) at commands/create_distributed_table.c:1066
#35 0x00007f12ea60e9c5 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:340
#36 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#37 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#38 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#39 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#40 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#41 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#42 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#43 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#44 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#45 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#46 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#47 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#48 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#49 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#50 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#51 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#52 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#53 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#54 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#55 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1ce5f10, indexId=3379, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe414497f0) at genam.c:353
#4  0x00000000009593a7 in RelationGetStatExtList (relation=0x7f12f1c5e810) at relcache.c:4521
#5  0x000000000076c1ac in get_relation_statistics (rel=0x2cbd088, relation=0x7f12f1c5e810) at plancat.c:1276
#6  0x000000000076aecc in get_relation_info (root=0x2cbce38, relationObjectId=37202, inhparent=0 '\000', rel=0x2cbd088) at plancat.c:406
#7  0x000000000076f866 in build_simple_rel (root=0x2cbce38, relid=1, parent=0x0) at relnode.c:171
#8  0x000000000073e5c7 in add_base_rels_to_query (root=0x2cbce38, jtnode=0x2b53350) at initsplan.c:112
#9  0x000000000073e60d in add_base_rels_to_query (root=0x2cbce38, jtnode=0x2b532d0) at initsplan.c:120
#10 0x000000000074267e in query_planner (root=0x2cbce38, tlist=0x0, qp_callback=0x74768b <standard_qp_callback>, qp_extra=0x7ffe41449bb0) at planmain.c:138
#11 0x0000000000744f81 in grouping_planner (root=0x2cbce38, inheritance_update=0 '\000', tuple_fraction=1) at planner.c:1714
#12 0x0000000000743b2e in subquery_planner (glob=0x2b52c38, parse=0x2b52320, parent_root=0x2b52cc8, hasRecursion=0 '\000', tuple_fraction=1) at planner.c:862
#13 0x00000000007506a2 in make_subplan (root=0x2b52cc8, orig_subquery=0x2b52430, subLinkType=EXISTS_SUBLINK, subLinkId=0, testexpr=0x0, isTopQual=0 '\000') at subselect.c:534
#14 0x000000000075283c in process_sublinks_mutator (node=0x2b52f58, context=0x7ffe4144a2a0) at subselect.c:1977
#15 0x00000000006d4048 in expression_tree_mutator (node=0x2b52f08, mutator=0x7527a3 <process_sublinks_mutator>, context=0x7ffe4144a2a0) at nodeFuncs.c:2854
#16 0x0000000000752a15 in process_sublinks_mutator (node=0x2b52f08, context=0x7ffe4144a660) at subselect.c:2073
#17 0x00000000006d4231 in expression_tree_mutator (node=0x2b52fc8, mutator=0x7527a3 <process_sublinks_mutator>, context=0x7ffe4144a660) at nodeFuncs.c:2903
#18 0x0000000000752a15 in process_sublinks_mutator (node=0x2b52fc8, context=0x7ffe4144a6e0) at subselect.c:2073
#19 0x00000000007527a1 in SS_process_sublinks (root=0x2b52cc8, expr=0x2b52fc8, isQual=0 '\000') at subselect.c:1950
#20 0x0000000000743c46 in preprocess_expression (root=0x2b52cc8, expr=0x2b52fc8, kind=1) at planner.c:954
#21 0x00000000007433b4 in subquery_planner (glob=0x2b52c38, parse=0x2b52210, parent_root=0x0, hasRecursion=0 '\000', tuple_fraction=0) at planner.c:628
#22 0x0000000000742b54 in standard_planner (parse=0x2b52210, cursorOptions=256, boundParams=0x0) at planner.c:334
#23 0x00007f12ea63c61b in distributed_planner (parse=0x2b52210, cursorOptions=256, boundParams=0x0) at planner/distributed_planner.c:172
#24 0x00000000007428cc in planner (parse=0x2b52210, cursorOptions=256, boundParams=0x0) at planner.c:208
#25 0x000000000081361a in pg_plan_query (querytree=0x2b52210, cursorOptions=256, boundParams=0x0) at postgres.c:796
#26 0x000000000081373a in pg_plan_queries (querytrees=0x2b52b00, cursorOptions=256, boundParams=0x0) at postgres.c:862
#27 0x000000000094fe6e in BuildCachedPlan (plansource=0x2b51fa0, qlist=0x2b52b00, boundParams=0x0, queryEnv=0x0) at plancache.c:937
#28 0x000000000095039d in GetCachedPlan (plansource=0x2b51fa0, boundParams=0x0, useResOwner=0 '\000', queryEnv=0x0) at plancache.c:1211
#29 0x00000000006b6eb4 in _SPI_execute_plan (plan=0x7ffe4144ad40, paramLI=0x0, snapshot=0x0, crosscheck_snapshot=0x0, read_only=1 '\001', fire_triggers=1 '\001', tcount=0) at spi.c:2027
#30 0x00000000006b4286 in SPI_execute (src=0x2b4fdd0 "SELECT EXISTS (SELECT 1 FROM public.test2)", read_only=1 '\001', tcount=0) at spi.c:328
#31 0x00007f12ea60fddb in LocalTableEmpty (tableId=37202) at commands/create_distributed_table.c:1066
---Type <return> to continue, or q <return> to quit---
#32 0x00007f12ea60e9c5 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:340
#33 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#34 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#35 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#36 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#37 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#38 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#39 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#40 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#41 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#42 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#43 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#44 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#45 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#46 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#47 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#48 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#49 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#50 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#51 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#52 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2aad8) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbd948) at genam.c:510
#3  0x000000000095941f in RelationGetStatExtList (relation=0x7f12f1c5e810) at relcache.c:4527
#4  0x000000000076c1ac in get_relation_statistics (rel=0x2cbd088, relation=0x7f12f1c5e810) at plancat.c:1276
#5  0x000000000076aecc in get_relation_info (root=0x2cbce38, relationObjectId=37202, inhparent=0 '\000', rel=0x2cbd088) at plancat.c:406
#6  0x000000000076f866 in build_simple_rel (root=0x2cbce38, relid=1, parent=0x0) at relnode.c:171
#7  0x000000000073e5c7 in add_base_rels_to_query (root=0x2cbce38, jtnode=0x2b53350) at initsplan.c:112
#8  0x000000000073e60d in add_base_rels_to_query (root=0x2cbce38, jtnode=0x2b532d0) at initsplan.c:120
#9  0x000000000074267e in query_planner (root=0x2cbce38, tlist=0x0, qp_callback=0x74768b <standard_qp_callback>, qp_extra=0x7ffe41449bb0) at planmain.c:138
#10 0x0000000000744f81 in grouping_planner (root=0x2cbce38, inheritance_update=0 '\000', tuple_fraction=1) at planner.c:1714
#11 0x0000000000743b2e in subquery_planner (glob=0x2b52c38, parse=0x2b52320, parent_root=0x2b52cc8, hasRecursion=0 '\000', tuple_fraction=1) at planner.c:862
#12 0x00000000007506a2 in make_subplan (root=0x2b52cc8, orig_subquery=0x2b52430, subLinkType=EXISTS_SUBLINK, subLinkId=0, testexpr=0x0, isTopQual=0 '\000') at subselect.c:534
#13 0x000000000075283c in process_sublinks_mutator (node=0x2b52f58, context=0x7ffe4144a2a0) at subselect.c:1977
#14 0x00000000006d4048 in expression_tree_mutator (node=0x2b52f08, mutator=0x7527a3 <process_sublinks_mutator>, context=0x7ffe4144a2a0) at nodeFuncs.c:2854
#15 0x0000000000752a15 in process_sublinks_mutator (node=0x2b52f08, context=0x7ffe4144a660) at subselect.c:2073
#16 0x00000000006d4231 in expression_tree_mutator (node=0x2b52fc8, mutator=0x7527a3 <process_sublinks_mutator>, context=0x7ffe4144a660) at nodeFuncs.c:2903
#17 0x0000000000752a15 in process_sublinks_mutator (node=0x2b52fc8, context=0x7ffe4144a6e0) at subselect.c:2073
#18 0x00000000007527a1 in SS_process_sublinks (root=0x2b52cc8, expr=0x2b52fc8, isQual=0 '\000') at subselect.c:1950
#19 0x0000000000743c46 in preprocess_expression (root=0x2b52cc8, expr=0x2b52fc8, kind=1) at planner.c:954
#20 0x00000000007433b4 in subquery_planner (glob=0x2b52c38, parse=0x2b52210, parent_root=0x0, hasRecursion=0 '\000', tuple_fraction=0) at planner.c:628
#21 0x0000000000742b54 in standard_planner (parse=0x2b52210, cursorOptions=256, boundParams=0x0) at planner.c:334
#22 0x00007f12ea63c61b in distributed_planner (parse=0x2b52210, cursorOptions=256, boundParams=0x0) at planner/distributed_planner.c:172
#23 0x00000000007428cc in planner (parse=0x2b52210, cursorOptions=256, boundParams=0x0) at planner.c:208
#24 0x000000000081361a in pg_plan_query (querytree=0x2b52210, cursorOptions=256, boundParams=0x0) at postgres.c:796
#25 0x000000000081373a in pg_plan_queries (querytrees=0x2b52b00, cursorOptions=256, boundParams=0x0) at postgres.c:862
#26 0x000000000094fe6e in BuildCachedPlan (plansource=0x2b51fa0, qlist=0x2b52b00, boundParams=0x0, queryEnv=0x0) at plancache.c:937
#27 0x000000000095039d in GetCachedPlan (plansource=0x2b51fa0, boundParams=0x0, useResOwner=0 '\000', queryEnv=0x0) at plancache.c:1211
#28 0x00000000006b6eb4 in _SPI_execute_plan (plan=0x7ffe4144ad40, paramLI=0x0, snapshot=0x0, crosscheck_snapshot=0x0, read_only=1 '\001', fire_triggers=1 '\001', tcount=0) at spi.c:2027
#29 0x00000000006b4286 in SPI_execute (src=0x2b4fdd0 "SELECT EXISTS (SELECT 1 FROM public.test2)", read_only=1 '\001', tcount=0) at spi.c:328
#30 0x00007f12ea60fddb in LocalTableEmpty (tableId=37202) at commands/create_distributed_table.c:1066
#31 0x00007f12ea60e9c5 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
---Type <return> to continue, or q <return> to quit---
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:340
#32 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#33 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#34 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#35 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#36 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#37 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#38 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#39 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#40 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#41 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#42 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#43 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#44 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#45 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#46 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#47 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#48 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#49 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#50 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#51 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2aad8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbd948) at genam.c:510
#4  0x000000000095941f in RelationGetStatExtList (relation=0x7f12f1c5e810) at relcache.c:4527
#5  0x000000000076c1ac in get_relation_statistics (rel=0x2cbd088, relation=0x7f12f1c5e810) at plancat.c:1276
#6  0x000000000076aecc in get_relation_info (root=0x2cbce38, relationObjectId=37202, inhparent=0 '\000', rel=0x2cbd088) at plancat.c:406
#7  0x000000000076f866 in build_simple_rel (root=0x2cbce38, relid=1, parent=0x0) at relnode.c:171
#8  0x000000000073e5c7 in add_base_rels_to_query (root=0x2cbce38, jtnode=0x2b53350) at initsplan.c:112
#9  0x000000000073e60d in add_base_rels_to_query (root=0x2cbce38, jtnode=0x2b532d0) at initsplan.c:120
#10 0x000000000074267e in query_planner (root=0x2cbce38, tlist=0x0, qp_callback=0x74768b <standard_qp_callback>, qp_extra=0x7ffe41449bb0) at planmain.c:138
#11 0x0000000000744f81 in grouping_planner (root=0x2cbce38, inheritance_update=0 '\000', tuple_fraction=1) at planner.c:1714
#12 0x0000000000743b2e in subquery_planner (glob=0x2b52c38, parse=0x2b52320, parent_root=0x2b52cc8, hasRecursion=0 '\000', tuple_fraction=1) at planner.c:862
#13 0x00000000007506a2 in make_subplan (root=0x2b52cc8, orig_subquery=0x2b52430, subLinkType=EXISTS_SUBLINK, subLinkId=0, testexpr=0x0, isTopQual=0 '\000') at subselect.c:534
#14 0x000000000075283c in process_sublinks_mutator (node=0x2b52f58, context=0x7ffe4144a2a0) at subselect.c:1977
#15 0x00000000006d4048 in expression_tree_mutator (node=0x2b52f08, mutator=0x7527a3 <process_sublinks_mutator>, context=0x7ffe4144a2a0) at nodeFuncs.c:2854
#16 0x0000000000752a15 in process_sublinks_mutator (node=0x2b52f08, context=0x7ffe4144a660) at subselect.c:2073
#17 0x00000000006d4231 in expression_tree_mutator (node=0x2b52fc8, mutator=0x7527a3 <process_sublinks_mutator>, context=0x7ffe4144a660) at nodeFuncs.c:2903
#18 0x0000000000752a15 in process_sublinks_mutator (node=0x2b52fc8, context=0x7ffe4144a6e0) at subselect.c:2073
#19 0x00000000007527a1 in SS_process_sublinks (root=0x2b52cc8, expr=0x2b52fc8, isQual=0 '\000') at subselect.c:1950
#20 0x0000000000743c46 in preprocess_expression (root=0x2b52cc8, expr=0x2b52fc8, kind=1) at planner.c:954
#21 0x00000000007433b4 in subquery_planner (glob=0x2b52c38, parse=0x2b52210, parent_root=0x0, hasRecursion=0 '\000', tuple_fraction=0) at planner.c:628
#22 0x0000000000742b54 in standard_planner (parse=0x2b52210, cursorOptions=256, boundParams=0x0) at planner.c:334
#23 0x00007f12ea63c61b in distributed_planner (parse=0x2b52210, cursorOptions=256, boundParams=0x0) at planner/distributed_planner.c:172
#24 0x00000000007428cc in planner (parse=0x2b52210, cursorOptions=256, boundParams=0x0) at planner.c:208
#25 0x000000000081361a in pg_plan_query (querytree=0x2b52210, cursorOptions=256, boundParams=0x0) at postgres.c:796
#26 0x000000000081373a in pg_plan_queries (querytrees=0x2b52b00, cursorOptions=256, boundParams=0x0) at postgres.c:862
#27 0x000000000094fe6e in BuildCachedPlan (plansource=0x2b51fa0, qlist=0x2b52b00, boundParams=0x0, queryEnv=0x0) at plancache.c:937
#28 0x000000000095039d in GetCachedPlan (plansource=0x2b51fa0, boundParams=0x0, useResOwner=0 '\000', queryEnv=0x0) at plancache.c:1211
#29 0x00000000006b6eb4 in _SPI_execute_plan (plan=0x7ffe4144ad40, paramLI=0x0, snapshot=0x0, crosscheck_snapshot=0x0, read_only=1 '\001', fire_triggers=1 '\001', tcount=0) at spi.c:2027
#30 0x00000000006b4286 in SPI_execute (src=0x2b4fdd0 "SELECT EXISTS (SELECT 1 FROM public.test2)", read_only=1 '\001', tcount=0) at spi.c:328
#31 0x00007f12ea60fddb in LocalTableEmpty (tableId=37202) at commands/create_distributed_table.c:1066
---Type <return> to continue, or q <return> to quit---
#32 0x00007f12ea60e9c5 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:340
#33 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#34 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#35 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#36 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#37 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#38 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#39 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#40 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#41 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#42 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#43 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#44 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#45 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#46 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#47 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#48 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#49 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#50 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#51 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#52 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aa48) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aa48) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0x2b2aa48, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0x2b2aa48) at snapmgr.c:868
#3  0x000000000081878e in CreateQueryDesc (plannedstmt=0x2cbed68, sourceText=0x2b4fdd0 "SELECT EXISTS (SELECT 1 FROM public.test2)", snapshot=0x2b2aa48, crosscheck_snapshot=0x0, 
    dest=0xe0bda0 <spi_printtupDR>, params=0x0, queryEnv=0x0, instrument_options=0) at pquery.c:81
#4  0x00000000006b7120 in _SPI_execute_plan (plan=0x7ffe4144ad40, paramLI=0x0, snapshot=0x0, crosscheck_snapshot=0x0, read_only=1 '\001', fire_triggers=1 '\001', tcount=0) at spi.c:2103
#5  0x00000000006b4286 in SPI_execute (src=0x2b4fdd0 "SELECT EXISTS (SELECT 1 FROM public.test2)", read_only=1 '\001', tcount=0) at spi.c:328
#6  0x00007f12ea60fddb in LocalTableEmpty (tableId=37202) at commands/create_distributed_table.c:1066
#7  0x00007f12ea60e9c5 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:340
#8  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) 
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aa48) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0x2b2aa48, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0x2b2aa48) at snapmgr.c:868
#3  0x000000000081878e in CreateQueryDesc (plannedstmt=0x2cbed68, sourceText=0x2b4fdd0 "SELECT EXISTS (SELECT 1 FROM public.test2)", snapshot=0x2b2aa48, crosscheck_snapshot=0x0, 
    dest=0xe0bda0 <spi_printtupDR>, params=0x0, queryEnv=0x0, instrument_options=0) at pquery.c:81
#4  0x00000000006b7120 in _SPI_execute_plan (plan=0x7ffe4144ad40, paramLI=0x0, snapshot=0x0, crosscheck_snapshot=0x0, read_only=1 '\001', fire_triggers=1 '\001', tcount=0) at spi.c:2103
#5  0x00000000006b4286 in SPI_execute (src=0x2b4fdd0 "SELECT EXISTS (SELECT 1 FROM public.test2)", read_only=1 '\001', tcount=0) at spi.c:328
#6  0x00007f12ea60fddb in LocalTableEmpty (tableId=37202) at commands/create_distributed_table.c:1066
#7  0x00007f12ea60e9c5 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:340
#8  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aa48) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aa48) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0x2b2aa48, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0x2b2aa48) at snapmgr.c:868
#3  0x00000000006786bb in standard_ExecutorStart (queryDesc=0x2cbee48, eflags=16) at execMain.c:249
#4  0x00007f12ea6253b8 in CitusExecutorStart (queryDesc=0x2cbee48, eflags=0) at executor/multi_executor.c:96
#5  0x0000000000678516 in ExecutorStart (queryDesc=0x2cbee48, eflags=0) at execMain.c:150
#6  0x00000000006b7663 in _SPI_pquery (queryDesc=0x2cbee48, fire_triggers=1 '\001', tcount=0) at spi.c:2331
#7  0x00000000006b7154 in _SPI_execute_plan (plan=0x7ffe4144ad40, paramLI=0x0, snapshot=0x0, crosscheck_snapshot=0x0, read_only=1 '\001', fire_triggers=1 '\001', tcount=0) at spi.c:2109
#8  0x00000000006b4286 in SPI_execute (src=0x2b4fdd0 "SELECT EXISTS (SELECT 1 FROM public.test2)", read_only=1 '\001', tcount=0) at spi.c:328
#9  0x00007f12ea60fddb in LocalTableEmpty (tableId=37202) at commands/create_distributed_table.c:1066
#10 0x00007f12ea60e9c5 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:340
#11 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#12 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#13 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#14 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#15 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#16 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#17 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#18 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#19 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#20 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#21 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#22 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#23 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#24 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#25 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#26 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#27 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#28 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
---Type <return> to continue, or q <return> to quit---
#29 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#30 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2aa48, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2aa48, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2aa48) at snapmgr.c:910
#2  0x0000000000678ac4 in standard_ExecutorEnd (queryDesc=0x2cbee48) at execMain.c:498
#3  0x0000000000678a6c in ExecutorEnd (queryDesc=0x2cbee48) at execMain.c:466
#4  0x00000000006b771d in _SPI_pquery (queryDesc=0x2cbee48, fire_triggers=1 '\001', tcount=0) at spi.c:2346
#5  0x00000000006b7154 in _SPI_execute_plan (plan=0x7ffe4144ad40, paramLI=0x0, snapshot=0x0, crosscheck_snapshot=0x0, read_only=1 '\001', fire_triggers=1 '\001', tcount=0) at spi.c:2109
#6  0x00000000006b4286 in SPI_execute (src=0x2b4fdd0 "SELECT EXISTS (SELECT 1 FROM public.test2)", read_only=1 '\001', tcount=0) at spi.c:328
#7  0x00007f12ea60fddb in LocalTableEmpty (tableId=37202) at commands/create_distributed_table.c:1066
#8  0x00007f12ea60e9c5 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:340
#9  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#10 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#11 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#12 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#13 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#14 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#15 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#16 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#17 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#18 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#19 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#20 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#21 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#22 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#23 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#24 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#25 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#26 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#27 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#28 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) 
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2aa48, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2aa48) at snapmgr.c:910
#2  0x0000000000678ac4 in standard_ExecutorEnd (queryDesc=0x2cbee48) at execMain.c:498
#3  0x0000000000678a6c in ExecutorEnd (queryDesc=0x2cbee48) at execMain.c:466
#4  0x00000000006b771d in _SPI_pquery (queryDesc=0x2cbee48, fire_triggers=1 '\001', tcount=0) at spi.c:2346
#5  0x00000000006b7154 in _SPI_execute_plan (plan=0x7ffe4144ad40, paramLI=0x0, snapshot=0x0, crosscheck_snapshot=0x0, read_only=1 '\001', fire_triggers=1 '\001', tcount=0) at spi.c:2109
#6  0x00000000006b4286 in SPI_execute (src=0x2b4fdd0 "SELECT EXISTS (SELECT 1 FROM public.test2)", read_only=1 '\001', tcount=0) at spi.c:328
#7  0x00007f12ea60fddb in LocalTableEmpty (tableId=37202) at commands/create_distributed_table.c:1066
#8  0x00007f12ea60e9c5 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:340
#9  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#10 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#11 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#12 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#13 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#14 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#15 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#16 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#17 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#18 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#19 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#20 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#21 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#22 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#23 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#24 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#25 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#26 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#27 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#28 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2aa48) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2aa48) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2aa48, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2aa48) at snapmgr.c:910
#3  0x0000000000678ac4 in standard_ExecutorEnd (queryDesc=0x2cbee48) at execMain.c:498
#4  0x0000000000678a6c in ExecutorEnd (queryDesc=0x2cbee48) at execMain.c:466
#5  0x00000000006b771d in _SPI_pquery (queryDesc=0x2cbee48, fire_triggers=1 '\001', tcount=0) at spi.c:2346
#6  0x00000000006b7154 in _SPI_execute_plan (plan=0x7ffe4144ad40, paramLI=0x0, snapshot=0x0, crosscheck_snapshot=0x0, read_only=1 '\001', fire_triggers=1 '\001', tcount=0) at spi.c:2109
#7  0x00000000006b4286 in SPI_execute (src=0x2b4fdd0 "SELECT EXISTS (SELECT 1 FROM public.test2)", read_only=1 '\001', tcount=0) at spi.c:328
#8  0x00007f12ea60fddb in LocalTableEmpty (tableId=37202) at commands/create_distributed_table.c:1066
#9  0x00007f12ea60e9c5 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:340
#10 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#11 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#12 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#13 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#14 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#15 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#16 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#17 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#18 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#19 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#20 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#21 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#22 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#23 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#24 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#25 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#26 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#27 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#28 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
---Type <return> to continue, or q <return> to quit---
#29 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2aa48, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2aa48, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2aa48) at snapmgr.c:910
#2  0x0000000000818832 in FreeQueryDesc (qdesc=0x2cbee48) at pquery.c:111
#3  0x00000000006b7166 in _SPI_execute_plan (plan=0x7ffe4144ad40, paramLI=0x0, snapshot=0x0, crosscheck_snapshot=0x0, read_only=1 '\001', fire_triggers=1 '\001', tcount=0) at spi.c:2111
#4  0x00000000006b4286 in SPI_execute (src=0x2b4fdd0 "SELECT EXISTS (SELECT 1 FROM public.test2)", read_only=1 '\001', tcount=0) at spi.c:328
#5  0x00007f12ea60fddb in LocalTableEmpty (tableId=37202) at commands/create_distributed_table.c:1066
#6  0x00007f12ea60e9c5 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:340
#7  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#8  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#9  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#10 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#11 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#12 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#13 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#14 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#15 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#16 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#17 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#18 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#19 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#20 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#21 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#22 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#23 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#24 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#25 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#26 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2aa48) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2aa48) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2aa48, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2aa48) at snapmgr.c:910
#3  0x0000000000818832 in FreeQueryDesc (qdesc=0x2cbee48) at pquery.c:111
#4  0x00000000006b7166 in _SPI_execute_plan (plan=0x7ffe4144ad40, paramLI=0x0, snapshot=0x0, crosscheck_snapshot=0x0, read_only=1 '\001', fire_triggers=1 '\001', tcount=0) at spi.c:2111
#5  0x00000000006b4286 in SPI_execute (src=0x2b4fdd0 "SELECT EXISTS (SELECT 1 FROM public.test2)", read_only=1 '\001', tcount=0) at spi.c:328
#6  0x00007f12ea60fddb in LocalTableEmpty (tableId=37202) at commands/create_distributed_table.c:1066
#7  0x00007f12ea60e9c5 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:340
#8  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d04bd8, indexId=20539, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144ad50) at genam.c:353
#4  0x00007f12ea67a9a1 in ColocatedTableId (colocationId=1) at utils/colocation_utils.c:959
#5  0x00007f12ea60e9d2 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:341
#6  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#7  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#8  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#9  0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#10 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#11 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#12 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#13 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#14 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#15 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#16 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#17 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#18 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#19 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#20 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#21 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#22 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#23 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#24 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#25 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2b378) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2b378) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2659, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144abd0) at genam.c:353
#4  0x000000000095174b in RelationBuildTupleDesc (relation=0x7f12f1c60180) at relcache.c:527
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=29009, insertIt=1 '\001') at relcache.c:1325
#6  0x000000000095509c in RelationIdGetRelation (relationId=29009) at relcache.c:2107
#7  0x00007f12ea67abe4 in ColocatedTableId (colocationId=1) at utils/colocation_utils.c:981
#8  0x00007f12ea60e9d2 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:341
#9  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#10 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#11 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#12 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#13 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#14 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#15 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#16 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#17 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#18 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#19 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#20 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#21 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#22 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#23 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#24 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#25 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#26 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#27 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#28 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2b378, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2b378, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2b378) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2b501e0) at genam.c:510
#3  0x00000000009518f6 in RelationBuildTupleDesc (relation=0x7f12f1c60180) at relcache.c:576
#4  0x0000000000953463 in RelationBuildDesc (targetRelId=29009, insertIt=1 '\001') at relcache.c:1325
#5  0x000000000095509c in RelationIdGetRelation (relationId=29009) at relcache.c:2107
#6  0x00007f12ea67abe4 in ColocatedTableId (colocationId=1) at utils/colocation_utils.c:981
#7  0x00007f12ea60e9d2 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:341
#8  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2b378) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2b378) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2b378, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2b378) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2b501e0) at genam.c:510
#4  0x00000000009518f6 in RelationBuildTupleDesc (relation=0x7f12f1c60180) at relcache.c:576
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=29009, insertIt=1 '\001') at relcache.c:1325
#6  0x000000000095509c in RelationIdGetRelation (relationId=29009) at relcache.c:2107
#7  0x00007f12ea67abe4 in ColocatedTableId (colocationId=1) at utils/colocation_utils.c:981
#8  0x00007f12ea60e9d2 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:341
#9  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#10 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#11 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#12 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#13 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#14 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#15 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#16 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#17 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#18 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#19 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#20 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#21 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#22 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#23 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#24 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#25 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#26 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#27 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#28 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2b378) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2b378) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d023d8, indexId=2701, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144abe0) at genam.c:353
#4  0x000000000064bdac in RelationBuildTriggers (relation=0x7f12f1c60180) at trigger.c:1716
#5  0x00000000009534b5 in RelationBuildDesc (targetRelId=29009, insertIt=1 '\001') at relcache.c:1339
#6  0x000000000095509c in RelationIdGetRelation (relationId=29009) at relcache.c:2107
#7  0x00007f12ea67abe4 in ColocatedTableId (colocationId=1) at utils/colocation_utils.c:981
#8  0x00007f12ea60e9d2 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:341
#9  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#10 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#11 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#12 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#13 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#14 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#15 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#16 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#17 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#18 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#19 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#20 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#21 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#22 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#23 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#24 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#25 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#26 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#27 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#28 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2b378, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2b378, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2b378) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2b501e0) at genam.c:510
#3  0x000000000064caa5 in RelationBuildTriggers (relation=0x7f12f1c60180) at trigger.c:1804
#4  0x00000000009534b5 in RelationBuildDesc (targetRelId=29009, insertIt=1 '\001') at relcache.c:1339
#5  0x000000000095509c in RelationIdGetRelation (relationId=29009) at relcache.c:2107
#6  0x00007f12ea67abe4 in ColocatedTableId (colocationId=1) at utils/colocation_utils.c:981
#7  0x00007f12ea60e9d2 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:341
#8  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2b378) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2b378) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2b378, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2b378) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2b501e0) at genam.c:510
#4  0x000000000064caa5 in RelationBuildTriggers (relation=0x7f12f1c60180) at trigger.c:1804
#5  0x00000000009534b5 in RelationBuildDesc (targetRelId=29009, insertIt=1 '\001') at relcache.c:1339
#6  0x000000000095509c in RelationIdGetRelation (relationId=29009) at relcache.c:2107
#7  0x00007f12ea67abe4 in ColocatedTableId (colocationId=1) at utils/colocation_utils.c:981
#8  0x00007f12ea60e9d2 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:341
#9  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#10 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#11 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#12 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#13 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#14 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#15 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#16 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#17 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#18 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#19 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#20 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#21 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#22 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#23 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#24 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#25 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#26 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#27 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#28 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2aad8) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2b4fce8) at genam.c:510
#3  0x00007f12ea67ac2b in ColocatedTableId (colocationId=1) at utils/colocation_utils.c:995
#4  0x00007f12ea60e9d2 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:341
#5  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#6  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#7  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#8  0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#9  0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#10 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#11 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#12 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#13 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#14 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#15 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#16 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#17 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#18 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#19 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#20 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#21 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#22 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#23 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#24 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2aad8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2aad8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2aad8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2b4fce8) at genam.c:510
#4  0x00007f12ea67ac2b in ColocatedTableId (colocationId=1) at utils/colocation_utils.c:995
#5  0x00007f12ea60e9d2 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:341
#6  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#7  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#8  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#9  0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#10 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#11 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#12 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#13 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#14 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#15 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#16 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#17 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#18 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#19 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#20 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#21 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#22 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#23 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#24 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#25 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2b378) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2b378) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d03bc8, indexId=3081, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144acb0) at genam.c:353
#4  0x00000000005fef40 in get_extension_oid (extname=0x7f12ea6acf03 "citus", missing_ok=0 '\000') at extension.c:150
#5  0x00007f12ea63323c in RecordDistributedRelationDependencies (distributedRelationId=37202, distributionKey=0x2b4f3d8) at master/master_metadata_utility.c:1045
#6  0x00007f12ea6331bf in InsertIntoPgDistPartition (relationId=37202, distributionMethod=104 'h', distributionColumn=0x2b4f3d8, colocationId=1, replicationModel=99 'c')
    at master/master_metadata_utility.c:1014
#7  0x00007f12ea60e9f1 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:344
#8  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2b378, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2b378, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2b378) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2b4fce8) at genam.c:510
#3  0x00000000005fefb0 in get_extension_oid (extname=0x7f12ea6acf03 "citus", missing_ok=0 '\000') at extension.c:161
#4  0x00007f12ea63323c in RecordDistributedRelationDependencies (distributedRelationId=37202, distributionKey=0x2b4f3d8) at master/master_metadata_utility.c:1045
#5  0x00007f12ea6331bf in InsertIntoPgDistPartition (relationId=37202, distributionMethod=104 'h', distributionColumn=0x2b4f3d8, colocationId=1, replicationModel=99 'c')
    at master/master_metadata_utility.c:1014
#6  0x00007f12ea60e9f1 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:344
#7  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#8  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#9  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#10 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#11 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#12 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#13 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#14 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#15 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#16 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#17 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#18 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#19 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#20 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#21 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#22 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#23 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#24 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#25 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#26 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2b378) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2b378) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2b378, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2b378) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2b4fce8) at genam.c:510
#4  0x00000000005fefb0 in get_extension_oid (extname=0x7f12ea6acf03 "citus", missing_ok=0 '\000') at extension.c:161
#5  0x00007f12ea63323c in RecordDistributedRelationDependencies (distributedRelationId=37202, distributionKey=0x2b4f3d8) at master/master_metadata_utility.c:1045
#6  0x00007f12ea6331bf in InsertIntoPgDistPartition (relationId=37202, distributionMethod=104 'h', distributionColumn=0x2b4f3d8, colocationId=1, replicationModel=99 'c')
    at master/master_metadata_utility.c:1014
#7  0x00007f12ea60e9f1 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:344
#8  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2b378) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2b378) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c50070, indexId=2674, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144abb0) at genam.c:353
#4  0x0000000000560dda in isObjectPinned (object=0x7ffe4144ad50, rel=0x7f12f1c50070) at pg_depend.c:406
#5  0x0000000000560606 in recordMultipleDependencies (depender=0x7ffe4144ad60, referenced=0x7ffe4144ad50, nreferenced=1, behavior=DEPENDENCY_NORMAL) at pg_depend.c:92
#6  0x0000000000560578 in recordDependencyOn (depender=0x7ffe4144ad60, referenced=0x7ffe4144ad50, behavior=DEPENDENCY_NORMAL) at pg_depend.c:48
#7  0x00007f12ea63325e in RecordDistributedRelationDependencies (distributedRelationId=37202, distributionKey=0x2b4f3d8) at master/master_metadata_utility.c:1049
#8  0x00007f12ea6331bf in InsertIntoPgDistPartition (relationId=37202, distributionMethod=104 'h', distributionColumn=0x2b4f3d8, colocationId=1, replicationModel=99 'c')
    at master/master_metadata_utility.c:1014
#9  0x00007f12ea60e9f1 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:344
#10 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#11 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#12 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#13 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#14 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#15 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#16 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#17 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#18 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#19 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#20 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#21 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#22 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#23 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#24 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#25 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#26 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#27 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
---Type <return> to continue, or q <return> to quit---
#28 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#29 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2b378, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2b378, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2b378) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2b4fce8) at genam.c:510
#3  0x0000000000560e2f in isObjectPinned (object=0x7ffe4144ad50, rel=0x7f12f1c50070) at pg_depend.c:424
#4  0x0000000000560606 in recordMultipleDependencies (depender=0x7ffe4144ad60, referenced=0x7ffe4144ad50, nreferenced=1, behavior=DEPENDENCY_NORMAL) at pg_depend.c:92
#5  0x0000000000560578 in recordDependencyOn (depender=0x7ffe4144ad60, referenced=0x7ffe4144ad50, behavior=DEPENDENCY_NORMAL) at pg_depend.c:48
#6  0x00007f12ea63325e in RecordDistributedRelationDependencies (distributedRelationId=37202, distributionKey=0x2b4f3d8) at master/master_metadata_utility.c:1049
#7  0x00007f12ea6331bf in InsertIntoPgDistPartition (relationId=37202, distributionMethod=104 'h', distributionColumn=0x2b4f3d8, colocationId=1, replicationModel=99 'c')
    at master/master_metadata_utility.c:1014
#8  0x00007f12ea60e9f1 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:344
#9  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#10 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#11 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#12 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#13 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#14 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#15 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#16 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#17 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#18 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#19 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#20 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#21 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#22 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#23 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#24 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#25 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#26 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#27 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
---Type <return> to continue, or q <return> to quit---
#28 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2b378) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2b378) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2b378, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2b378) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2b4fce8) at genam.c:510
#4  0x0000000000560e2f in isObjectPinned (object=0x7ffe4144ad50, rel=0x7f12f1c50070) at pg_depend.c:424
#5  0x0000000000560606 in recordMultipleDependencies (depender=0x7ffe4144ad60, referenced=0x7ffe4144ad50, nreferenced=1, behavior=DEPENDENCY_NORMAL) at pg_depend.c:92
#6  0x0000000000560578 in recordDependencyOn (depender=0x7ffe4144ad60, referenced=0x7ffe4144ad50, behavior=DEPENDENCY_NORMAL) at pg_depend.c:48
#7  0x00007f12ea63325e in RecordDistributedRelationDependencies (distributedRelationId=37202, distributionKey=0x2b4f3d8) at master/master_metadata_utility.c:1049
#8  0x00007f12ea6331bf in InsertIntoPgDistPartition (relationId=37202, distributionMethod=104 'h', distributionColumn=0x2b4f3d8, colocationId=1, replicationModel=99 'c')
    at master/master_metadata_utility.c:1014
#9  0x00007f12ea60e9f1 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:344
#10 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#11 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#12 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#13 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#14 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#15 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#16 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#17 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#18 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#19 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#20 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#21 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#22 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#23 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#24 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#25 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#26 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#27 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
---Type <return> to continue, or q <return> to quit---
#28 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#29 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2b898) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2b898) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2659, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a8c0) at genam.c:353
#4  0x000000000095174b in RelationBuildTupleDesc (relation=0x7f12f1c61ae0) at relcache.c:527
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=37202, insertIt=0 '\000') at relcache.c:1325
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c5e810, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c5e810) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37202) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2b2b498) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2b2b448, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea6331c4 in InsertIntoPgDistPartition (relationId=37202, distributionMethod=104 'h', distributionColumn=0x2b4f3d8, colocationId=1, replicationModel=99 'c')
    at master/master_metadata_utility.c:1016
#15 0x00007f12ea60e9f1 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:344
#16 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#17 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#18 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#19 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#20 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#21 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#22 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#23 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#24 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#25 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#26 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#27 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#28 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
---Type <return> to continue, or q <return> to quit---
    at pquery.c:773
#29 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#30 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#31 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#32 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#33 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#34 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#35 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2b898, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2b898, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2b898) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2b4fce8) at genam.c:510
#3  0x00000000009518f6 in RelationBuildTupleDesc (relation=0x7f12f1c61ae0) at relcache.c:576
#4  0x0000000000953463 in RelationBuildDesc (targetRelId=37202, insertIt=0 '\000') at relcache.c:1325
#5  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c5e810, rebuild=1 '\001') at relcache.c:2535
#6  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c5e810) at relcache.c:2673
#7  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37202) at relcache.c:2725
#8  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2b2b498) at inval.c:587
#9  0x000000000094dede in ProcessInvalidationMessages (hdr=0x2b2b448, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#10 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#11 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#12 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#13 0x00007f12ea6331c4 in InsertIntoPgDistPartition (relationId=37202, distributionMethod=104 'h', distributionColumn=0x2b4f3d8, colocationId=1, replicationModel=99 'c')
    at master/master_metadata_utility.c:1016
#14 0x00007f12ea60e9f1 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:344
#15 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#16 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#17 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#18 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#19 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#20 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#21 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#22 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#23 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#24 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#25 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#26 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#27 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
---Type <return> to continue, or q <return> to quit---
#28 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#29 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#30 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#31 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#32 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#33 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#34 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2b898) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2b898) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2b898, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2b898) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2b4fce8) at genam.c:510
#4  0x00000000009518f6 in RelationBuildTupleDesc (relation=0x7f12f1c61ae0) at relcache.c:576
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=37202, insertIt=0 '\000') at relcache.c:1325
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c5e810, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c5e810) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37202) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2b2b498) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2b2b448, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea6331c4 in InsertIntoPgDistPartition (relationId=37202, distributionMethod=104 'h', distributionColumn=0x2b4f3d8, colocationId=1, replicationModel=99 'c')
    at master/master_metadata_utility.c:1016
#15 0x00007f12ea60e9f1 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:344
#16 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#17 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#18 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#19 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#20 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#21 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#22 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#23 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#24 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#25 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#26 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#27 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#28 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
---Type <return> to continue, or q <return> to quit---
    at pquery.c:773
#29 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#30 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#31 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#32 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#33 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#34 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#35 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c50070, indexId=2674, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a860) at genam.c:353
#4  0x0000000000560dda in isObjectPinned (object=0x7ffe4144aae0, rel=0x7f12f1c50070) at pg_depend.c:406
#5  0x0000000000560606 in recordMultipleDependencies (depender=0x7ffe4144aaf0, referenced=0x7ffe4144aae0, nreferenced=1, behavior=DEPENDENCY_NORMAL) at pg_depend.c:92
#6  0x0000000000560578 in recordDependencyOn (depender=0x7ffe4144aaf0, referenced=0x7ffe4144aae0, behavior=DEPENDENCY_NORMAL) at pg_depend.c:48
#7  0x000000000064a3f4 in CreateTrigger (stmt=0x2b4f9d8, queryString=0x0, relOid=37202, refRelOid=0, constraintOid=0, indexOid=0, isInternal=1 '\001') at trigger.c:910
#8  0x00007f12ea610126 in CreateTruncateTrigger (relationId=37202) at commands/create_distributed_table.c:1169
#9  0x00007f12ea60ea09 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:350
#10 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#11 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#12 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#13 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#14 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#15 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#16 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#17 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#18 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#19 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#20 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#21 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#22 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#23 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#24 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#25 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#26 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#27 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#28 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
---Type <return> to continue, or q <return> to quit---
#29 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2b501e0) at genam.c:510
#3  0x0000000000560e2f in isObjectPinned (object=0x7ffe4144aae0, rel=0x7f12f1c50070) at pg_depend.c:424
#4  0x0000000000560606 in recordMultipleDependencies (depender=0x7ffe4144aaf0, referenced=0x7ffe4144aae0, nreferenced=1, behavior=DEPENDENCY_NORMAL) at pg_depend.c:92
#5  0x0000000000560578 in recordDependencyOn (depender=0x7ffe4144aaf0, referenced=0x7ffe4144aae0, behavior=DEPENDENCY_NORMAL) at pg_depend.c:48
#6  0x000000000064a3f4 in CreateTrigger (stmt=0x2b4f9d8, queryString=0x0, relOid=37202, refRelOid=0, constraintOid=0, indexOid=0, isInternal=1 '\001') at trigger.c:910
#7  0x00007f12ea610126 in CreateTruncateTrigger (relationId=37202) at commands/create_distributed_table.c:1169
#8  0x00007f12ea60ea09 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:350
#9  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#10 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#11 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#12 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#13 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#14 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#15 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#16 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#17 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#18 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#19 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#20 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#21 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#22 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#23 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#24 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#25 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#26 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#27 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#28 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2b501e0) at genam.c:510
#4  0x0000000000560e2f in isObjectPinned (object=0x7ffe4144aae0, rel=0x7f12f1c50070) at pg_depend.c:424
#5  0x0000000000560606 in recordMultipleDependencies (depender=0x7ffe4144aaf0, referenced=0x7ffe4144aae0, nreferenced=1, behavior=DEPENDENCY_NORMAL) at pg_depend.c:92
#6  0x0000000000560578 in recordDependencyOn (depender=0x7ffe4144aaf0, referenced=0x7ffe4144aae0, behavior=DEPENDENCY_NORMAL) at pg_depend.c:48
#7  0x000000000064a3f4 in CreateTrigger (stmt=0x2b4f9d8, queryString=0x0, relOid=37202, refRelOid=0, constraintOid=0, indexOid=0, isInternal=1 '\001') at trigger.c:910
#8  0x00007f12ea610126 in CreateTruncateTrigger (relationId=37202) at commands/create_distributed_table.c:1169
#9  0x00007f12ea60ea09 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:350
#10 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#11 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#12 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#13 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#14 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#15 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#16 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#17 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#18 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#19 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#20 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#21 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#22 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#23 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#24 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#25 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#26 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#27 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#28 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
---Type <return> to continue, or q <return> to quit---
#29 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c50070, indexId=2674, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a860) at genam.c:353
#4  0x0000000000560dda in isObjectPinned (object=0x7ffe4144aae0, rel=0x7f12f1c50070) at pg_depend.c:406
#5  0x0000000000560606 in recordMultipleDependencies (depender=0x7ffe4144aaf0, referenced=0x7ffe4144aae0, nreferenced=1, behavior=DEPENDENCY_AUTO) at pg_depend.c:92
#6  0x0000000000560578 in recordDependencyOn (depender=0x7ffe4144aaf0, referenced=0x7ffe4144aae0, behavior=DEPENDENCY_AUTO) at pg_depend.c:48
#7  0x000000000064a488 in CreateTrigger (stmt=0x2b4f9d8, queryString=0x0, relOid=37202, refRelOid=0, constraintOid=0, indexOid=0, isInternal=1 '\001') at trigger.c:935
#8  0x00007f12ea610126 in CreateTruncateTrigger (relationId=37202) at commands/create_distributed_table.c:1169
#9  0x00007f12ea60ea09 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:350
#10 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#11 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#12 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#13 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#14 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#15 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#16 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#17 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#18 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#19 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#20 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#21 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#22 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#23 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#24 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#25 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#26 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#27 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#28 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
---Type <return> to continue, or q <return> to quit---
#29 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2b501e0) at genam.c:510
#3  0x0000000000560e2f in isObjectPinned (object=0x7ffe4144aae0, rel=0x7f12f1c50070) at pg_depend.c:424
#4  0x0000000000560606 in recordMultipleDependencies (depender=0x7ffe4144aaf0, referenced=0x7ffe4144aae0, nreferenced=1, behavior=DEPENDENCY_AUTO) at pg_depend.c:92
#5  0x0000000000560578 in recordDependencyOn (depender=0x7ffe4144aaf0, referenced=0x7ffe4144aae0, behavior=DEPENDENCY_AUTO) at pg_depend.c:48
#6  0x000000000064a488 in CreateTrigger (stmt=0x2b4f9d8, queryString=0x0, relOid=37202, refRelOid=0, constraintOid=0, indexOid=0, isInternal=1 '\001') at trigger.c:935
#7  0x00007f12ea610126 in CreateTruncateTrigger (relationId=37202) at commands/create_distributed_table.c:1169
#8  0x00007f12ea60ea09 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:350
#9  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#10 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#11 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#12 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#13 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#14 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#15 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#16 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#17 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#18 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#19 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#20 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#21 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#22 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#23 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#24 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#25 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#26 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#27 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#28 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2b501e0) at genam.c:510
#4  0x0000000000560e2f in isObjectPinned (object=0x7ffe4144aae0, rel=0x7f12f1c50070) at pg_depend.c:424
#5  0x0000000000560606 in recordMultipleDependencies (depender=0x7ffe4144aaf0, referenced=0x7ffe4144aae0, nreferenced=1, behavior=DEPENDENCY_AUTO) at pg_depend.c:92
#6  0x0000000000560578 in recordDependencyOn (depender=0x7ffe4144aaf0, referenced=0x7ffe4144aae0, behavior=DEPENDENCY_AUTO) at pg_depend.c:48
#7  0x000000000064a488 in CreateTrigger (stmt=0x2b4f9d8, queryString=0x0, relOid=37202, refRelOid=0, constraintOid=0, indexOid=0, isInternal=1 '\001') at trigger.c:935
#8  0x00007f12ea610126 in CreateTruncateTrigger (relationId=37202) at commands/create_distributed_table.c:1169
#9  0x00007f12ea60ea09 in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:350
#10 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#11 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#12 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#13 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#14 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#15 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#16 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#17 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#18 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#19 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#20 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#21 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#22 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#23 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#24 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#25 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#26 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#27 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#28 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
---Type <return> to continue, or q <return> to quit---
#29 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ad96d0, indexId=2665, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144acf0) at genam.c:353
#4  0x00007f12ea611740 in HasForeignKeyToReferenceTable (relationId=37202) at commands/foreign_constraint.c:544
#5  0x00007f12ea60feb1 in CanUseExclusiveConnections (relationId=37202, localTableEmpty=0 '\000') at commands/create_distributed_table.c:1095
#6  0x00007f12ea60ec86 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:488
#7  0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#8  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) 
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ad96d0, indexId=2665, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144acf0) at genam.c:353
#4  0x00007f12ea611740 in HasForeignKeyToReferenceTable (relationId=37202) at commands/foreign_constraint.c:544
#5  0x00007f12ea60feb1 in CanUseExclusiveConnections (relationId=37202, localTableEmpty=0 '\000') at commands/create_distributed_table.c:1095
#6  0x00007f12ea60ec86 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:488
#7  0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#8  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2b501e0) at genam.c:510
#3  0x00007f12ea6117f1 in HasForeignKeyToReferenceTable (relationId=37202) at commands/foreign_constraint.c:576
#4  0x00007f12ea60feb1 in CanUseExclusiveConnections (relationId=37202, localTableEmpty=0 '\000') at commands/create_distributed_table.c:1095
#5  0x00007f12ea60ec86 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:488
#6  0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#7  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#8  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#9  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#10 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#11 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#12 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#13 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#14 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#15 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#16 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#17 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#18 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#19 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#20 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#21 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#22 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#23 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#24 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#25 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#26 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2b501e0) at genam.c:510
#4  0x00007f12ea6117f1 in HasForeignKeyToReferenceTable (relationId=37202) at commands/foreign_constraint.c:576
#5  0x00007f12ea60feb1 in CanUseExclusiveConnections (relationId=37202, localTableEmpty=0 '\000') at commands/create_distributed_table.c:1095
#6  0x00007f12ea60ec86 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:488
#7  0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#8  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d04bd8, indexId=20453, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144ab00) at genam.c:353
#4  0x00007f12ea6820fa in LookupDistPartitionTuple (pgDistPartition=0x7f12f1d04bd8, relationId=37202) at utils/metadata_cache.c:3534
#5  0x00007f12ea67df91 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:961
#6  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#7  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=37202) at utils/metadata_cache.c:835
#8  0x00007f12ea644336 in PartitionMethod (relationId=37202) at planner/multi_join_order.c:1246
#9  0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=37202) at master/master_create_shards.c:426
#10 0x00007f12ea6303ec in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:266
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) b
Note: breakpoint 3 also set at pc 0x9b1c8d.
Breakpoint 9 at 0x9b1c8d: file snapmgr.c, line 920.
(gdb) d 9
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2b501e0) at genam.c:510
#3  0x00007f12ea682131 in LookupDistPartitionTuple (pgDistPartition=0x7f12f1d04bd8, relationId=37202) at utils/metadata_cache.c:3544
#4  0x00007f12ea67df91 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:961
#5  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#6  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=37202) at utils/metadata_cache.c:835
#7  0x00007f12ea644336 in PartitionMethod (relationId=37202) at planner/multi_join_order.c:1246
#8  0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=37202) at master/master_create_shards.c:426
#9  0x00007f12ea6303ec in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:266
#10 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#11 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#12 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#13 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#14 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#15 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#16 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#17 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#18 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#19 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#20 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#21 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#22 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#23 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#24 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#25 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#26 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#27 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#28 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
---Type <return> to continue, or q <return> to quit---
#29 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#30 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#31 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2b501e0) at genam.c:510
#4  0x00007f12ea682131 in LookupDistPartitionTuple (pgDistPartition=0x7f12f1d04bd8, relationId=37202) at utils/metadata_cache.c:3544
#5  0x00007f12ea67df91 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:961
#6  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#7  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=37202) at utils/metadata_cache.c:835
#8  0x00007f12ea644336 in PartitionMethod (relationId=37202) at planner/multi_join_order.c:1246
#9  0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=37202) at master/master_create_shards.c:426
#10 0x00007f12ea6303ec in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:266
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c538c0, indexId=20454, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9d0) at genam.c:353
#4  0x00007f12ea682203 in LookupDistShardTuples (relationId=37202) at utils/metadata_cache.c:3574
#5  0x00007f12ea67e303 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1094
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=37202) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=37202) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=37202) at master/master_create_shards.c:426
#11 0x00007f12ea6303ec in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:266
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbd988) at genam.c:510
#3  0x00007f12ea682263 in LookupDistShardTuples (relationId=37202) at utils/metadata_cache.c:3586
#4  0x00007f12ea67e303 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1094
#5  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#6  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#7  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=37202) at utils/metadata_cache.c:835
#8  0x00007f12ea644336 in PartitionMethod (relationId=37202) at planner/multi_join_order.c:1246
#9  0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=37202) at master/master_create_shards.c:426
#10 0x00007f12ea6303ec in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:266
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbd988) at genam.c:510
#4  0x00007f12ea682263 in LookupDistShardTuples (relationId=37202) at utils/metadata_cache.c:3586
#5  0x00007f12ea67e303 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1094
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=37202) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=37202) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=37202) at master/master_create_shards.c:426
#11 0x00007f12ea6303ec in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:266
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ac2098, indexId=2686, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a970) at genam.c:353
#4  0x0000000000610d63 in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1427
#5  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#6  0x00007f12ea67e500 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1146
#7  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#8  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#9  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=37202) at utils/metadata_cache.c:835
#10 0x00007f12ea644336 in PartitionMethod (relationId=37202) at planner/multi_join_order.c:1246
#11 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=37202) at master/master_create_shards.c:426
#12 0x00007f12ea6303ec in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:266
#13 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#14 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#15 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#16 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#17 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#18 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#19 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#20 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#21 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#22 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#23 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#24 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#25 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#26 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#27 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#28 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
---Type <return> to continue, or q <return> to quit---
#29 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#30 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#31 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#32 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#33 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#34 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x7f12f1c62170) at genam.c:510
#3  0x0000000000610eea in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1458
#4  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#5  0x00007f12ea67e500 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1146
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=37202) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=37202) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=37202) at master/master_create_shards.c:426
#11 0x00007f12ea6303ec in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:266
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x7f12f1c62170) at genam.c:510
#4  0x0000000000610eea in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1458
#5  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#6  0x00007f12ea67e500 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1146
#7  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#8  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#9  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=37202) at utils/metadata_cache.c:835
#10 0x00007f12ea644336 in PartitionMethod (relationId=37202) at planner/multi_join_order.c:1246
#11 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=37202) at master/master_create_shards.c:426
#12 0x00007f12ea6303ec in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:266
#13 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#14 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#15 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#16 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#17 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#18 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#19 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#20 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#21 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#22 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#23 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#24 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#25 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#26 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#27 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#28 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
---Type <return> to continue, or q <return> to quit---
#29 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#30 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#31 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#32 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#33 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#34 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) b
Note: breakpoint 6 also set at pc 0x99ed4f.
Breakpoint 10 at 0x99ed4f: file resowner.c, line 1156.
(gdb) d 10
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ac2098, indexId=2686, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a970) at genam.c:353
#4  0x0000000000610d63 in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1427
#5  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#6  0x00007f12ea67e557 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1161
#7  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#8  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#9  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=37202) at utils/metadata_cache.c:835
#10 0x00007f12ea644336 in PartitionMethod (relationId=37202) at planner/multi_join_order.c:1246
#11 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=37202) at master/master_create_shards.c:426
#12 0x00007f12ea6303ec in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:266
#13 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#14 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#15 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#16 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#17 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#18 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#19 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#20 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#21 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#22 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#23 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#24 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#25 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#26 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#27 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#28 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
---Type <return> to continue, or q <return> to quit---
#29 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#30 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#31 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#32 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#33 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#34 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x7f12f1c622e0) at genam.c:510
#3  0x0000000000610eea in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1458
#4  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#5  0x00007f12ea67e557 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1161
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=37202) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=37202) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=37202) at master/master_create_shards.c:426
#11 0x00007f12ea6303ec in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:266
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d04bd8, indexId=20453, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144ab00) at genam.c:353
#4  0x00007f12ea6820fa in LookupDistPartitionTuple (pgDistPartition=0x7f12f1d04bd8, relationId=29009) at utils/metadata_cache.c:3534
#5  0x00007f12ea67df91 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:961
#6  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#7  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#8  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#9  0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#10 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c538c0, indexId=20454, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9d0) at genam.c:353
#4  0x00007f12ea682203 in LookupDistShardTuples (relationId=29009) at utils/metadata_cache.c:3574
#5  0x00007f12ea67e303 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1094
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea682263 in LookupDistShardTuples (relationId=29009) at utils/metadata_cache.c:3586
#5  0x00007f12ea67e303 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1094
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ac2098, indexId=2686, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a970) at genam.c:353
#4  0x0000000000610d63 in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1427
#5  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#6  0x00007f12ea67e500 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1146
#7  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#8  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#9  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#10 0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#11 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#12 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#13 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#14 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#15 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#16 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#17 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#18 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#19 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#20 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#21 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#22 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#23 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#24 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#25 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#26 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#27 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#28 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
---Type <return> to continue, or q <return> to quit---
#29 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#30 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#31 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#32 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#33 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#34 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x7f12f1c5bb90) at genam.c:510
#4  0x0000000000610eea in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1458
#5  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#6  0x00007f12ea67e500 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1146
#7  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#8  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#9  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#10 0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#11 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#12 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#13 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#14 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#15 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#16 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#17 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#18 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#19 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#20 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#21 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#22 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#23 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#24 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#25 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#26 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#27 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#28 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
---Type <return> to continue, or q <return> to quit---
#29 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#30 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#31 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#32 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#33 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#34 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ac2098, indexId=2686, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a970) at genam.c:353
#4  0x0000000000610d63 in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1427
#5  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#6  0x00007f12ea67e557 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1161
#7  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#8  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#9  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#10 0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#11 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#12 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#13 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#14 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#15 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#16 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#17 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#18 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#19 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#20 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#21 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#22 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#23 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#24 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#25 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#26 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#27 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#28 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
---Type <return> to continue, or q <return> to quit---
#29 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#30 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#31 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#32 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#33 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#34 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x7f12f1c5b980) at genam.c:510
#4  0x0000000000610eea in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1458
#5  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#6  0x00007f12ea67e557 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1161
#7  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#8  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#9  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#10 0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#11 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#12 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#13 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#14 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#15 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#16 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#17 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#18 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#19 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#20 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#21 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#22 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#23 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#24 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#25 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#26 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#27 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#28 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
---Type <return> to continue, or q <return> to quit---
#29 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#30 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#31 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#32 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#33 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#34 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c5a460) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c5a460) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c5b9d0) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c5b9d0) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#3  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c53640) at master/master_metadata_utility.c:770
#4  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#5  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#6  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#7  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#8  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#9  0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#10 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c5b8a0) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c5b8a0) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c5a330) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c5a330) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c5b770) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c5b770) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c59970) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c59970) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#3  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c5b640) at master/master_metadata_utility.c:770
#4  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#5  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#6  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#7  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#8  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#9  0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#10 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c5b640) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c5a200) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c5a200) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c5b510) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c5b510) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c594f0) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c594f0) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c5b3e0) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c5b3e0) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c5a0d0) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c5a0d0) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c5b2b0) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c5b2b0) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c59840) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c59840) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c5b180) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) 
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c5b180) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c59ff0) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c59ff0) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c5b050) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c5b050) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c49590) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c49590) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c5af20) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) n
1157	}
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c5af20) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c59f60) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c59f60) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c5adf0) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c5adf0) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c59270) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c59270) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c5acc0) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c5acc0) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c59ed0) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c59ed0) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c5ab90) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c5ab90) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c59da0) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c59da0) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c5a7f0) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c5a7f0) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c596b0) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c596b0) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c5a6c0) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c5a6c0) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c59c70) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c59c70) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c59580) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c1d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c1d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c1d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2cbed40) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c59580) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b207c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=29009) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=29009) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=29009) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=29009) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c268) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c268) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2659, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a7b0) at genam.c:353
#4  0x000000000095174b in RelationBuildTupleDesc (relation=0x7f12f1c61ae0) at relcache.c:527
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=37202, insertIt=0 '\000') at relcache.c:1325
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c5e810, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c5e810) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37202) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2b2bd48) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2b2b448, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea632f73 in InsertShardRow (relationId=37202, shardId=102150, storageType=116 't', shardMinValue=0x2c5b7a8, shardMaxValue=0x2c5c088) at master/master_metadata_utility.c:911
#15 0x00007f12ea630580 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:312
#16 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#17 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#18 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#19 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#20 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#21 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#22 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#23 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#24 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#25 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#26 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#27 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#28 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#29 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#31 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#32 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#33 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#34 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#35 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#36 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#37 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c268, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c268) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c268) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c268, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c268) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2c5c488) at genam.c:510
#4  0x00000000009518f6 in RelationBuildTupleDesc (relation=0x7f12f1c61ae0) at relcache.c:576
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=37202, insertIt=0 '\000') at relcache.c:1325
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c5e810, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c5e810) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37202) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2b2bd48) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2b2b448, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea632f73 in InsertShardRow (relationId=37202, shardId=102150, storageType=116 't', shardMinValue=0x2c5b7a8, shardMaxValue=0x2c5c088) at master/master_metadata_utility.c:911
#15 0x00007f12ea630580 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:312
#16 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#17 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#18 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#19 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#20 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#21 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#22 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#23 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#24 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#25 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#26 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#27 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#28 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#29 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#31 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#32 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#33 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#34 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#35 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#36 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#37 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c268) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c268) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d023d8, indexId=2701, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a7c0) at genam.c:353
#4  0x000000000064bdac in RelationBuildTriggers (relation=0x7f12f1c61ae0) at trigger.c:1716
#5  0x00000000009534b5 in RelationBuildDesc (targetRelId=37202, insertIt=0 '\000') at relcache.c:1339
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c5e810, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c5e810) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37202) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2b2bd48) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2b2b448, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea632f73 in InsertShardRow (relationId=37202, shardId=102150, storageType=116 't', shardMinValue=0x2c5b7a8, shardMaxValue=0x2c5c088) at master/master_metadata_utility.c:911
#15 0x00007f12ea630580 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:312
#16 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#17 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#18 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#19 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#20 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#21 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#22 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#23 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#24 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#25 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#26 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#27 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#28 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#29 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#31 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#32 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#33 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#34 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#35 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#36 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#37 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c268, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c268) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c268) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c268, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c268) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2c5c488) at genam.c:510
#4  0x000000000064caa5 in RelationBuildTriggers (relation=0x7f12f1c61ae0) at trigger.c:1804
#5  0x00000000009534b5 in RelationBuildDesc (targetRelId=37202, insertIt=0 '\000') at relcache.c:1339
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c5e810, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c5e810) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37202) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2b2bd48) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2b2b448, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea632f73 in InsertShardRow (relationId=37202, shardId=102150, storageType=116 't', shardMinValue=0x2c5b7a8, shardMaxValue=0x2c5c088) at master/master_metadata_utility.c:911
#15 0x00007f12ea630580 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:312
#16 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#17 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#18 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#19 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#20 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#21 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#22 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#23 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#24 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#25 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#26 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#27 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#28 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#29 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#31 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#32 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#33 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#34 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#35 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#36 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#37 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c538c0, indexId=20386, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144ac00) at genam.c:353
#4  0x00007f12ea682941 in CitusInvalidateRelcacheByShardId (shardId=102150) at utils/metadata_cache.c:3846
#5  0x00007f12ea633086 in InsertShardPlacementRow (shardId=102150, placementId=144, shardState=1 '\001', shardLength=0, groupId=4) at master/master_metadata_utility.c:955
#6  0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#7  0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#8  0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#9  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#10 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#11 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#12 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#13 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#14 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#15 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#16 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#17 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#18 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#19 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#20 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#21 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#22 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#23 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#24 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#25 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#26 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#27 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#28 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c388) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c388, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2c388, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c388) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2c5cb20) at genam.c:510
#3  0x000000000094bf29 in SearchCatCache (cache=0x2a69308, v1=37202, v2=0, v3=0, v4=0) at catcache.c:1190
#4  0x000000000095e65e in SearchSysCache (cacheId=50, key1=37202, key2=0, key3=0, key4=0) at syscache.c:1109
#5  0x00007f12ea682890 in CitusInvalidateRelcacheByRelid (relationId=37202) at utils/metadata_cache.c:3812
#6  0x00007f12ea682987 in CitusInvalidateRelcacheByShardId (shardId=102150) at utils/metadata_cache.c:3854
#7  0x00007f12ea633086 in InsertShardPlacementRow (shardId=102150, placementId=144, shardState=1 '\001', shardLength=0, groupId=4) at master/master_metadata_utility.c:955
#8  0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#9  0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#10 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#11 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#12 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#13 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#14 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#15 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#16 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#17 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#18 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#19 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#20 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#21 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#22 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#23 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#24 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#25 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#26 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#27 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#28 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
---Type <return> to continue, or q <return> to quit---
#29 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#30 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c388) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c2f8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2c2f8, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c2f8) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2c5ca40) at genam.c:510
#3  0x00007f12ea6829e0 in CitusInvalidateRelcacheByShardId (shardId=102150) at utils/metadata_cache.c:3875
#4  0x00007f12ea633086 in InsertShardPlacementRow (shardId=102150, placementId=144, shardState=1 '\001', shardLength=0, groupId=4) at master/master_metadata_utility.c:955
#5  0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#6  0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#7  0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#8  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) 
#0  UnregisterSnapshotFromOwner (snapshot=0x2b2c2f8, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c2f8) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2c5ca40) at genam.c:510
#3  0x00007f12ea6829e0 in CitusInvalidateRelcacheByShardId (shardId=102150) at utils/metadata_cache.c:3875
#4  0x00007f12ea633086 in InsertShardPlacementRow (shardId=102150, placementId=144, shardState=1 '\001', shardLength=0, groupId=4) at master/master_metadata_utility.c:955
#5  0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#6  0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#7  0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#8  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2659, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a730) at genam.c:353
#4  0x000000000095174b in RelationBuildTupleDesc (relation=0x7f12f1c61ae0) at relcache.c:527
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=37202, insertIt=0 '\000') at relcache.c:1325
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c5e810, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c5e810) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37202) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2b2c428) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2b2b448, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea6829f6 in CitusInvalidateRelcacheByShardId (shardId=102150) at utils/metadata_cache.c:3879
#15 0x00007f12ea633086 in InsertShardPlacementRow (shardId=102150, placementId=144, shardState=1 '\001', shardLength=0, groupId=4) at master/master_metadata_utility.c:955
#16 0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#17 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#18 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#19 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#20 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#21 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#22 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#23 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#24 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#25 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#26 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#27 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#28 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#29 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#31 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#32 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#33 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#34 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#35 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#36 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#37 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#38 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c2f8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c2f8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c2f8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2c5ca40) at genam.c:510
#4  0x00000000009518f6 in RelationBuildTupleDesc (relation=0x7f12f1c61ae0) at relcache.c:576
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=37202, insertIt=0 '\000') at relcache.c:1325
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c5e810, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c5e810) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37202) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2b2c428) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2b2b448, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea6829f6 in CitusInvalidateRelcacheByShardId (shardId=102150) at utils/metadata_cache.c:3879
#15 0x00007f12ea633086 in InsertShardPlacementRow (shardId=102150, placementId=144, shardState=1 '\001', shardLength=0, groupId=4) at master/master_metadata_utility.c:955
#16 0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#17 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#18 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#19 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#20 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#21 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#22 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#23 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#24 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#25 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#26 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#27 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#28 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#29 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#31 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#32 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#33 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#34 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#35 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#36 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#37 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#38 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d023d8, indexId=2701, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a740) at genam.c:353
#4  0x000000000064bdac in RelationBuildTriggers (relation=0x7f12f1c61ae0) at trigger.c:1716
#5  0x00000000009534b5 in RelationBuildDesc (targetRelId=37202, insertIt=0 '\000') at relcache.c:1339
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c5e810, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c5e810) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37202) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2b2c428) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2b2b448, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea6829f6 in CitusInvalidateRelcacheByShardId (shardId=102150) at utils/metadata_cache.c:3879
#15 0x00007f12ea633086 in InsertShardPlacementRow (shardId=102150, placementId=144, shardState=1 '\001', shardLength=0, groupId=4) at master/master_metadata_utility.c:955
#16 0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#17 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#18 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#19 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#20 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#21 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#22 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#23 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#24 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#25 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#26 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#27 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#28 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#29 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#31 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#32 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#33 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#34 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#35 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#36 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#37 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#38 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c2f8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c2f8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c2f8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2c5ca40) at genam.c:510
#4  0x000000000064caa5 in RelationBuildTriggers (relation=0x7f12f1c61ae0) at trigger.c:1804
#5  0x00000000009534b5 in RelationBuildDesc (targetRelId=37202, insertIt=0 '\000') at relcache.c:1339
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c5e810, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c5e810) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37202) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2b2c428) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2b2b448, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea6829f6 in CitusInvalidateRelcacheByShardId (shardId=102150) at utils/metadata_cache.c:3879
#15 0x00007f12ea633086 in InsertShardPlacementRow (shardId=102150, placementId=144, shardState=1 '\001', shardLength=0, groupId=4) at master/master_metadata_utility.c:955
#16 0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#17 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#18 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#19 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#20 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#21 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#22 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#23 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#24 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#25 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#26 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#27 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#28 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#29 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#31 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#32 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#33 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#34 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#35 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#36 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#37 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#38 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c538c0, indexId=20386, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144abf0) at genam.c:353
#4  0x00007f12ea68231e in LookupShardRelation (shardId=102150, missingOk=0 '\000') at utils/metadata_cache.c:3613
#5  0x00007f12ea67dc72 in LookupShardCacheEntry (shardId=102150) at utils/metadata_cache.c:771
#6  0x00007f12ea67d55d in LoadShardPlacement (shardId=102150, placementId=144) at utils/metadata_cache.c:483
#7  0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#8  0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#9  0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#10 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#11 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#12 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#13 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#14 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#15 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#16 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#17 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#18 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#19 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#20 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#21 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#22 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#23 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#24 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#25 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#26 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#27 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#28 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
---Type <return> to continue, or q <return> to quit---
#29 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c2f8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c2f8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c2f8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2c5ca40) at genam.c:510
#4  0x00007f12ea6823d3 in LookupShardRelation (shardId=102150, missingOk=0 '\000') at utils/metadata_cache.c:3634
#5  0x00007f12ea67dc72 in LookupShardCacheEntry (shardId=102150) at utils/metadata_cache.c:771
#6  0x00007f12ea67d55d in LoadShardPlacement (shardId=102150, placementId=144) at utils/metadata_cache.c:483
#7  0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#8  0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#9  0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#10 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#11 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#12 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#13 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#14 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#15 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#16 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#17 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#18 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#19 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#20 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#21 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#22 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#23 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#24 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#25 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#26 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#27 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#28 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
---Type <return> to continue, or q <return> to quit---
#29 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d04bd8, indexId=20453, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144ab20) at genam.c:353
#4  0x00007f12ea6820fa in LookupDistPartitionTuple (pgDistPartition=0x7f12f1d04bd8, relationId=37202) at utils/metadata_cache.c:3534
#5  0x00007f12ea67df91 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:961
#6  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#7  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102150) at utils/metadata_cache.c:774
#8  0x00007f12ea67d55d in LoadShardPlacement (shardId=102150, placementId=144) at utils/metadata_cache.c:483
#9  0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#10 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#11 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#12 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#13 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#14 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#15 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#16 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#17 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#18 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#19 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#20 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#21 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#22 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#23 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#24 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#25 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#26 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#27 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#28 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
---Type <return> to continue, or q <return> to quit---
#29 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#30 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#31 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c2f8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c2f8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c2f8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2c5ca40) at genam.c:510
#4  0x00007f12ea682131 in LookupDistPartitionTuple (pgDistPartition=0x7f12f1d04bd8, relationId=37202) at utils/metadata_cache.c:3544
#5  0x00007f12ea67df91 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:961
#6  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#7  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102150) at utils/metadata_cache.c:774
#8  0x00007f12ea67d55d in LoadShardPlacement (shardId=102150, placementId=144) at utils/metadata_cache.c:483
#9  0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#10 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#11 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#12 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#13 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#14 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#15 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#16 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#17 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#18 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#19 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#20 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#21 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#22 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#23 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#24 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#25 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#26 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#27 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#28 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
---Type <return> to continue, or q <return> to quit---
#29 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#30 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#31 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c538c0, indexId=20454, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9f0) at genam.c:353
#4  0x00007f12ea682203 in LookupDistShardTuples (relationId=37202) at utils/metadata_cache.c:3574
#5  0x00007f12ea67e303 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1094
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#8  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102150) at utils/metadata_cache.c:774
#9  0x00007f12ea67d55d in LoadShardPlacement (shardId=102150, placementId=144) at utils/metadata_cache.c:483
#10 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c2f8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c2f8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c2f8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2c5cb20) at genam.c:510
#4  0x00007f12ea682263 in LookupDistShardTuples (relationId=37202) at utils/metadata_cache.c:3586
#5  0x00007f12ea67e303 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1094
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#8  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102150) at utils/metadata_cache.c:774
#9  0x00007f12ea67d55d in LoadShardPlacement (shardId=102150, placementId=144) at utils/metadata_cache.c:483
#10 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ac2098, indexId=2686, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a990) at genam.c:353
#4  0x0000000000610d63 in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1427
#5  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#6  0x00007f12ea67e500 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1146
#7  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#8  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#9  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102150) at utils/metadata_cache.c:774
#10 0x00007f12ea67d55d in LoadShardPlacement (shardId=102150, placementId=144) at utils/metadata_cache.c:483
#11 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c2f8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c2f8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c2f8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x7f12f1c62170) at genam.c:510
#4  0x0000000000610eea in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1458
#5  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#6  0x00007f12ea67e500 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1146
#7  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#8  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#9  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102150) at utils/metadata_cache.c:774
#10 0x00007f12ea67d55d in LoadShardPlacement (shardId=102150, placementId=144) at utils/metadata_cache.c:483
#11 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ac2098, indexId=2686, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a990) at genam.c:353
#4  0x0000000000610d63 in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1427
#5  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#6  0x00007f12ea67e557 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1161
#7  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#8  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#9  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102150) at utils/metadata_cache.c:774
#10 0x00007f12ea67d55d in LoadShardPlacement (shardId=102150, placementId=144) at utils/metadata_cache.c:483
#11 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c2f8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c2f8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c2f8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x7f12f1c62380) at genam.c:510
#4  0x0000000000610eea in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1458
#5  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#6  0x00007f12ea67e557 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1161
#7  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#8  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#9  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102150) at utils/metadata_cache.c:774
#10 0x00007f12ea67d55d in LoadShardPlacement (shardId=102150, placementId=144) at utils/metadata_cache.c:483
#11 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9c0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c5ee50) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#8  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102150) at utils/metadata_cache.c:774
#9  0x00007f12ea67d55d in LoadShardPlacement (shardId=102150, placementId=144) at utils/metadata_cache.c:483
#10 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c2f8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c2f8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c2f8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c2f8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2c5cb20) at genam.c:510
#4  0x00007f12ea632bda in BuildShardPlacementList (shardInterval=0x7f12f1c5ee50) at master/master_metadata_utility.c:770
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#8  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102150) at utils/metadata_cache.c:774
#9  0x00007f12ea67d55d in LoadShardPlacement (shardId=102150, placementId=144) at utils/metadata_cache.c:483
#10 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2659, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a7b0) at genam.c:353
#4  0x000000000095174b in RelationBuildTupleDesc (relation=0x7f12f1c61ae0) at relcache.c:527
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=37202, insertIt=0 '\000') at relcache.c:1325
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c5e810, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c5e810) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37202) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2cc0d98) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2b2b448, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea632f73 in InsertShardRow (relationId=37202, shardId=102151, storageType=116 't', shardMinValue=0x2c5d160, shardMaxValue=0x2c5da90) at master/master_metadata_utility.c:911
#15 0x00007f12ea630580 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:312
#16 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#17 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#18 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#19 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#20 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#21 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#22 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#23 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#24 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#25 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#26 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#27 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#28 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#29 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#31 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#32 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#33 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#34 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#35 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#36 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#37 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c938) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2c5dc60) at genam.c:510
#4  0x00000000009518f6 in RelationBuildTupleDesc (relation=0x7f12f1c61ae0) at relcache.c:576
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=37202, insertIt=0 '\000') at relcache.c:1325
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c5e810, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c5e810) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37202) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2cc0d98) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2b2b448, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea632f73 in InsertShardRow (relationId=37202, shardId=102151, storageType=116 't', shardMinValue=0x2c5d160, shardMaxValue=0x2c5da90) at master/master_metadata_utility.c:911
#15 0x00007f12ea630580 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:312
#16 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#17 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#18 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#19 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#20 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#21 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#22 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#23 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#24 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#25 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#26 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#27 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#28 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#29 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#31 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#32 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#33 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#34 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#35 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#36 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#37 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d023d8, indexId=2701, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a7c0) at genam.c:353
#4  0x000000000064bdac in RelationBuildTriggers (relation=0x7f12f1c61ae0) at trigger.c:1716
#5  0x00000000009534b5 in RelationBuildDesc (targetRelId=37202, insertIt=0 '\000') at relcache.c:1339
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c5e810, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c5e810) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37202) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2cc0d98) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2b2b448, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea632f73 in InsertShardRow (relationId=37202, shardId=102151, storageType=116 't', shardMinValue=0x2c5d160, shardMaxValue=0x2c5da90) at master/master_metadata_utility.c:911
#15 0x00007f12ea630580 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:312
#16 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#17 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#18 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#19 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#20 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#21 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#22 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#23 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#24 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#25 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#26 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#27 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#28 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#29 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#31 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#32 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#33 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#34 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#35 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#36 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#37 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c938) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2c5dc60) at genam.c:510
#4  0x000000000064caa5 in RelationBuildTriggers (relation=0x7f12f1c61ae0) at trigger.c:1804
#5  0x00000000009534b5 in RelationBuildDesc (targetRelId=37202, insertIt=0 '\000') at relcache.c:1339
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c5e810, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c5e810) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37202) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2cc0d98) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2b2b448, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea632f73 in InsertShardRow (relationId=37202, shardId=102151, storageType=116 't', shardMinValue=0x2c5d160, shardMaxValue=0x2c5da90) at master/master_metadata_utility.c:911
#15 0x00007f12ea630580 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:312
#16 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#17 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#18 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#19 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#20 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#21 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#22 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#23 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#24 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#25 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#26 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#27 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#28 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#29 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#31 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#32 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#33 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#34 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#35 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#36 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#37 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c538c0, indexId=20386, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144ac00) at genam.c:353
#4  0x00007f12ea682941 in CitusInvalidateRelcacheByShardId (shardId=102151) at utils/metadata_cache.c:3846
#5  0x00007f12ea633086 in InsertShardPlacementRow (shardId=102151, placementId=145, shardState=1 '\001', shardLength=0, groupId=5) at master/master_metadata_utility.c:955
#6  0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#7  0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#8  0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#9  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#10 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#11 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#12 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#13 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#14 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#15 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#16 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#17 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#18 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#19 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#20 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#21 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#22 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#23 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#24 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#25 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#26 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#27 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#28 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) 
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c538c0, indexId=20386, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144ac00) at genam.c:353
#4  0x00007f12ea682941 in CitusInvalidateRelcacheByShardId (shardId=102151) at utils/metadata_cache.c:3846
#5  0x00007f12ea633086 in InsertShardPlacementRow (shardId=102151, placementId=145, shardState=1 '\001', shardLength=0, groupId=5) at master/master_metadata_utility.c:955
#6  0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#7  0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#8  0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#9  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#10 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#11 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#12 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#13 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#14 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#15 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#16 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#17 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#18 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#19 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#20 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#21 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#22 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#23 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#24 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#25 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#26 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#27 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#28 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c938) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2c5e0f0) at genam.c:510
#4  0x00007f12ea6829e0 in CitusInvalidateRelcacheByShardId (shardId=102151) at utils/metadata_cache.c:3875
#5  0x00007f12ea633086 in InsertShardPlacementRow (shardId=102151, placementId=145, shardState=1 '\001', shardLength=0, groupId=5) at master/master_metadata_utility.c:955
#6  0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#7  0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#8  0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#9  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#10 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#11 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#12 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#13 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#14 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#15 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#16 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#17 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#18 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#19 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#20 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#21 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#22 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#23 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#24 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#25 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#26 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#27 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#28 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2659, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a730) at genam.c:353
#4  0x000000000095174b in RelationBuildTupleDesc (relation=0x7f12f1c61ae0) at relcache.c:527
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=37202, insertIt=0 '\000') at relcache.c:1325
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c5e810, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c5e810) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37202) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2cc11a8) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2b2b448, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea6829f6 in CitusInvalidateRelcacheByShardId (shardId=102151) at utils/metadata_cache.c:3879
#15 0x00007f12ea633086 in InsertShardPlacementRow (shardId=102151, placementId=145, shardState=1 '\001', shardLength=0, groupId=5) at master/master_metadata_utility.c:955
#16 0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#17 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#18 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#19 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#20 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#21 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#22 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#23 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#24 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#25 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#26 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#27 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#28 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#29 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#31 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#32 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#33 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#34 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#35 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#36 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#37 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#38 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c938) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2c5e0f0) at genam.c:510
#4  0x00000000009518f6 in RelationBuildTupleDesc (relation=0x7f12f1c61ae0) at relcache.c:576
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=37202, insertIt=0 '\000') at relcache.c:1325
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c5e810, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c5e810) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37202) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2cc11a8) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2b2b448, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea6829f6 in CitusInvalidateRelcacheByShardId (shardId=102151) at utils/metadata_cache.c:3879
#15 0x00007f12ea633086 in InsertShardPlacementRow (shardId=102151, placementId=145, shardState=1 '\001', shardLength=0, groupId=5) at master/master_metadata_utility.c:955
#16 0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#17 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#18 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#19 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#20 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#21 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#22 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#23 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#24 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#25 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#26 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#27 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#28 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#29 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#31 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#32 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#33 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#34 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#35 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#36 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#37 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#38 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d023d8, indexId=2701, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a740) at genam.c:353
#4  0x000000000064bdac in RelationBuildTriggers (relation=0x7f12f1c61ae0) at trigger.c:1716
#5  0x00000000009534b5 in RelationBuildDesc (targetRelId=37202, insertIt=0 '\000') at relcache.c:1339
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c5e810, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c5e810) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37202) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2cc11a8) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2b2b448, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea6829f6 in CitusInvalidateRelcacheByShardId (shardId=102151) at utils/metadata_cache.c:3879
#15 0x00007f12ea633086 in InsertShardPlacementRow (shardId=102151, placementId=145, shardState=1 '\001', shardLength=0, groupId=5) at master/master_metadata_utility.c:955
#16 0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#17 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#18 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#19 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#20 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#21 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#22 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#23 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#24 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#25 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#26 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#27 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#28 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#29 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#31 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#32 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#33 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#34 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#35 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#36 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#37 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#38 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c938) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2c5e0f0) at genam.c:510
#4  0x000000000064caa5 in RelationBuildTriggers (relation=0x7f12f1c61ae0) at trigger.c:1804
#5  0x00000000009534b5 in RelationBuildDesc (targetRelId=37202, insertIt=0 '\000') at relcache.c:1339
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c5e810, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c5e810) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37202) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2cc11a8) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2b2b448, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea6829f6 in CitusInvalidateRelcacheByShardId (shardId=102151) at utils/metadata_cache.c:3879
#15 0x00007f12ea633086 in InsertShardPlacementRow (shardId=102151, placementId=145, shardState=1 '\001', shardLength=0, groupId=5) at master/master_metadata_utility.c:955
#16 0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#17 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#18 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#19 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#20 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#21 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#22 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#23 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#24 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#25 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#26 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#27 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#28 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#29 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#31 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#32 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#33 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#34 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#35 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#36 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#37 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#38 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c538c0, indexId=20386, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144abf0) at genam.c:353
#4  0x00007f12ea68231e in LookupShardRelation (shardId=102151, missingOk=0 '\000') at utils/metadata_cache.c:3613
#5  0x00007f12ea67dc72 in LookupShardCacheEntry (shardId=102151) at utils/metadata_cache.c:771
#6  0x00007f12ea67d55d in LoadShardPlacement (shardId=102151, placementId=145) at utils/metadata_cache.c:483
#7  0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#8  0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#9  0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#10 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#11 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#12 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#13 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#14 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#15 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#16 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#17 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#18 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#19 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#20 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#21 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#22 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#23 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#24 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#25 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#26 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#27 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#28 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
---Type <return> to continue, or q <return> to quit---
#29 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c938) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2c5e0f0) at genam.c:510
#4  0x00007f12ea6823d3 in LookupShardRelation (shardId=102151, missingOk=0 '\000') at utils/metadata_cache.c:3634
#5  0x00007f12ea67dc72 in LookupShardCacheEntry (shardId=102151) at utils/metadata_cache.c:771
#6  0x00007f12ea67d55d in LoadShardPlacement (shardId=102151, placementId=145) at utils/metadata_cache.c:483
#7  0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#8  0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#9  0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#10 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#11 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#12 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#13 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#14 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#15 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#16 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#17 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#18 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#19 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#20 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#21 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#22 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#23 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#24 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#25 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#26 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#27 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#28 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
---Type <return> to continue, or q <return> to quit---
#29 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d04bd8, indexId=20453, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144ab20) at genam.c:353
#4  0x00007f12ea6820fa in LookupDistPartitionTuple (pgDistPartition=0x7f12f1d04bd8, relationId=37202) at utils/metadata_cache.c:3534
#5  0x00007f12ea67df91 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:961
#6  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#7  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102151) at utils/metadata_cache.c:774
#8  0x00007f12ea67d55d in LoadShardPlacement (shardId=102151, placementId=145) at utils/metadata_cache.c:483
#9  0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#10 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#11 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#12 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#13 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#14 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#15 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#16 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#17 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#18 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#19 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#20 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#21 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#22 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#23 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#24 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#25 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#26 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#27 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#28 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
---Type <return> to continue, or q <return> to quit---
#29 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#30 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#31 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c938) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2c5e0f0) at genam.c:510
#4  0x00007f12ea682131 in LookupDistPartitionTuple (pgDistPartition=0x7f12f1d04bd8, relationId=37202) at utils/metadata_cache.c:3544
#5  0x00007f12ea67df91 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:961
#6  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#7  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102151) at utils/metadata_cache.c:774
#8  0x00007f12ea67d55d in LoadShardPlacement (shardId=102151, placementId=145) at utils/metadata_cache.c:483
#9  0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#10 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#11 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#12 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#13 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#14 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#15 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#16 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#17 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#18 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#19 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#20 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#21 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#22 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#23 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#24 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#25 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#26 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#27 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#28 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
---Type <return> to continue, or q <return> to quit---
#29 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#30 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#31 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c538c0, indexId=20454, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9f0) at genam.c:353
#4  0x00007f12ea682203 in LookupDistShardTuples (relationId=37202) at utils/metadata_cache.c:3574
#5  0x00007f12ea67e303 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1094
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#8  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102151) at utils/metadata_cache.c:774
#9  0x00007f12ea67d55d in LoadShardPlacement (shardId=102151, placementId=145) at utils/metadata_cache.c:483
#10 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2b2c938) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2c5e500) at genam.c:510
#4  0x00007f12ea682263 in LookupDistShardTuples (relationId=37202) at utils/metadata_cache.c:3586
#5  0x00007f12ea67e303 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1094
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#8  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102151) at utils/metadata_cache.c:774
#9  0x00007f12ea67d55d in LoadShardPlacement (shardId=102151, placementId=145) at utils/metadata_cache.c:483
#10 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ac2098, indexId=2686, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a990) at genam.c:353
#4  0x0000000000610d63 in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1427
#5  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#6  0x00007f12ea67e500 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1146
#7  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#8  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#9  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102151) at utils/metadata_cache.c:774
#10 0x00007f12ea67d55d in LoadShardPlacement (shardId=102151, placementId=145) at utils/metadata_cache.c:483
#11 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ac2098, indexId=2686, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a990) at genam.c:353
#4  0x0000000000610d63 in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1427
#5  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#6  0x00007f12ea67e557 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1161
#7  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#8  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#9  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102151) at utils/metadata_cache.c:774
#10 0x00007f12ea67d55d in LoadShardPlacement (shardId=102151, placementId=145) at utils/metadata_cache.c:483
#11 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9c0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c62250) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#8  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102151) at utils/metadata_cache.c:774
#9  0x00007f12ea67d55d in LoadShardPlacement (shardId=102151, placementId=145) at utils/metadata_cache.c:483
#10 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9c0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c62040) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#8  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102151) at utils/metadata_cache.c:774
#9  0x00007f12ea67d55d in LoadShardPlacement (shardId=102151, placementId=145) at utils/metadata_cache.c:483
#10 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2659, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a7b0) at genam.c:353
#4  0x000000000095174b in RelationBuildTupleDesc (relation=0x7f12f1c61ae0) at relcache.c:527
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=37202, insertIt=0 '\000') at relcache.c:1325
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c5e810, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c5e810) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37202) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2cc15b8) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2b2b448, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea632f73 in InsertShardRow (relationId=37202, shardId=102152, storageType=116 't', shardMinValue=0x2c5e8e0, shardMaxValue=0x2c5f210) at master/master_metadata_utility.c:911
#15 0x00007f12ea630580 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:312
#16 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#17 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#18 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#19 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#20 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#21 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#22 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#23 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#24 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#25 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#26 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#27 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#28 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#29 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#31 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#32 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#33 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#34 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#35 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#36 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#37 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d023d8, indexId=2701, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a7c0) at genam.c:353
#4  0x000000000064bdac in RelationBuildTriggers (relation=0x7f12f1c61ae0) at trigger.c:1716
#5  0x00000000009534b5 in RelationBuildDesc (targetRelId=37202, insertIt=0 '\000') at relcache.c:1339
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c5e810, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c5e810) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37202) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2cc15b8) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2b2b448, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea632f73 in InsertShardRow (relationId=37202, shardId=102152, storageType=116 't', shardMinValue=0x2c5e8e0, shardMaxValue=0x2c5f210) at master/master_metadata_utility.c:911
#15 0x00007f12ea630580 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:312
#16 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#17 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#18 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#19 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#20 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#21 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#22 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#23 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#24 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#25 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#26 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#27 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#28 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#29 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#31 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#32 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#33 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#34 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#35 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#36 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#37 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c538c0, indexId=20386, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144ac00) at genam.c:353
#4  0x00007f12ea682941 in CitusInvalidateRelcacheByShardId (shardId=102152) at utils/metadata_cache.c:3846
#5  0x00007f12ea633086 in InsertShardPlacementRow (shardId=102152, placementId=146, shardState=1 '\001', shardLength=0, groupId=4) at master/master_metadata_utility.c:955
#6  0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#7  0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#8  0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#9  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#10 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#11 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#12 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#13 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#14 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#15 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#16 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#17 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#18 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#19 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#20 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#21 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#22 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#23 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#24 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#25 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#26 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#27 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#28 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2659, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a730) at genam.c:353
#4  0x000000000095174b in RelationBuildTupleDesc (relation=0x7f12f1c61ae0) at relcache.c:527
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=37202, insertIt=0 '\000') at relcache.c:1325
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c5e810, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c5e810) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37202) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2cc19c8) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2b2b448, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea6829f6 in CitusInvalidateRelcacheByShardId (shardId=102152) at utils/metadata_cache.c:3879
#15 0x00007f12ea633086 in InsertShardPlacementRow (shardId=102152, placementId=146, shardState=1 '\001', shardLength=0, groupId=4) at master/master_metadata_utility.c:955
#16 0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#17 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#18 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#19 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#20 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#21 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#22 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#23 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#24 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#25 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#26 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#27 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#28 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#29 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#31 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#32 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#33 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#34 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#35 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#36 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#37 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#38 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d023d8, indexId=2701, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a740) at genam.c:353
#4  0x000000000064bdac in RelationBuildTriggers (relation=0x7f12f1c61ae0) at trigger.c:1716
#5  0x00000000009534b5 in RelationBuildDesc (targetRelId=37202, insertIt=0 '\000') at relcache.c:1339
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c5e810, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c5e810) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37202) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2cc19c8) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2b2b448, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea6829f6 in CitusInvalidateRelcacheByShardId (shardId=102152) at utils/metadata_cache.c:3879
#15 0x00007f12ea633086 in InsertShardPlacementRow (shardId=102152, placementId=146, shardState=1 '\001', shardLength=0, groupId=4) at master/master_metadata_utility.c:955
#16 0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#17 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#18 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#19 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#20 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#21 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#22 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#23 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#24 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#25 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#26 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#27 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#28 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#29 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#31 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#32 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#33 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#34 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#35 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#36 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#37 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#38 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c538c0, indexId=20386, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144abf0) at genam.c:353
#4  0x00007f12ea68231e in LookupShardRelation (shardId=102152, missingOk=0 '\000') at utils/metadata_cache.c:3613
#5  0x00007f12ea67dc72 in LookupShardCacheEntry (shardId=102152) at utils/metadata_cache.c:771
#6  0x00007f12ea67d55d in LoadShardPlacement (shardId=102152, placementId=146) at utils/metadata_cache.c:483
#7  0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#8  0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#9  0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#10 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#11 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#12 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#13 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#14 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#15 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#16 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#17 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#18 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#19 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#20 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#21 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#22 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#23 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#24 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#25 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#26 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#27 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#28 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
---Type <return> to continue, or q <return> to quit---
#29 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d04bd8, indexId=20453, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144ab20) at genam.c:353
#4  0x00007f12ea6820fa in LookupDistPartitionTuple (pgDistPartition=0x7f12f1d04bd8, relationId=37202) at utils/metadata_cache.c:3534
#5  0x00007f12ea67df91 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:961
#6  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#7  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102152) at utils/metadata_cache.c:774
#8  0x00007f12ea67d55d in LoadShardPlacement (shardId=102152, placementId=146) at utils/metadata_cache.c:483
#9  0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#10 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#11 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#12 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#13 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#14 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#15 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#16 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#17 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#18 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#19 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#20 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#21 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#22 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#23 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#24 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#25 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#26 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#27 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#28 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
---Type <return> to continue, or q <return> to quit---
#29 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#30 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#31 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c538c0, indexId=20454, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9f0) at genam.c:353
#4  0x00007f12ea682203 in LookupDistShardTuples (relationId=37202) at utils/metadata_cache.c:3574
#5  0x00007f12ea67e303 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1094
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#8  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102152) at utils/metadata_cache.c:774
#9  0x00007f12ea67d55d in LoadShardPlacement (shardId=102152, placementId=146) at utils/metadata_cache.c:483
#10 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ac2098, indexId=2686, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a990) at genam.c:353
#4  0x0000000000610d63 in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1427
#5  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#6  0x00007f12ea67e500 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1146
#7  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#8  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#9  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102152) at utils/metadata_cache.c:774
#10 0x00007f12ea67d55d in LoadShardPlacement (shardId=102152, placementId=146) at utils/metadata_cache.c:483
#11 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ac2098, indexId=2686, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a990) at genam.c:353
#4  0x0000000000610d63 in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1427
#5  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#6  0x00007f12ea67e557 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1161
#7  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#8  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#9  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102152) at utils/metadata_cache.c:774
#10 0x00007f12ea67d55d in LoadShardPlacement (shardId=102152, placementId=146) at utils/metadata_cache.c:483
#11 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9c0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c62450) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#8  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102152) at utils/metadata_cache.c:774
#9  0x00007f12ea67d55d in LoadShardPlacement (shardId=102152, placementId=146) at utils/metadata_cache.c:483
#10 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9c0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c5ee50) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#8  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102152) at utils/metadata_cache.c:774
#9  0x00007f12ea67d55d in LoadShardPlacement (shardId=102152, placementId=146) at utils/metadata_cache.c:483
#10 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9c0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c62250) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#8  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102152) at utils/metadata_cache.c:774
#9  0x00007f12ea67d55d in LoadShardPlacement (shardId=102152, placementId=146) at utils/metadata_cache.c:483
#10 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2659, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a7b0) at genam.c:353
#4  0x000000000095174b in RelationBuildTupleDesc (relation=0x7f12f1c61ae0) at relcache.c:527
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=37202, insertIt=0 '\000') at relcache.c:1325
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c5e810, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c5e810) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37202) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2cc1dd8) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2b2b448, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea632f73 in InsertShardRow (relationId=37202, shardId=102153, storageType=116 't', shardMinValue=0x2c60280, shardMaxValue=0x2c60fc8) at master/master_metadata_utility.c:911
#15 0x00007f12ea630580 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:312
#16 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#17 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#18 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#19 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#20 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#21 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#22 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#23 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#24 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#25 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#26 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#27 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#28 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#29 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#31 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#32 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#33 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#34 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#35 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#36 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#37 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d023d8, indexId=2701, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a7c0) at genam.c:353
#4  0x000000000064bdac in RelationBuildTriggers (relation=0x7f12f1c61ae0) at trigger.c:1716
#5  0x00000000009534b5 in RelationBuildDesc (targetRelId=37202, insertIt=0 '\000') at relcache.c:1339
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c5e810, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c5e810) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37202) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2cc1dd8) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2b2b448, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea632f73 in InsertShardRow (relationId=37202, shardId=102153, storageType=116 't', shardMinValue=0x2c60280, shardMaxValue=0x2c60fc8) at master/master_metadata_utility.c:911
#15 0x00007f12ea630580 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:312
#16 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#17 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#18 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#19 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#20 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#21 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#22 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#23 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#24 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#25 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#26 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#27 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#28 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#29 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#31 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#32 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#33 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#34 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#35 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#36 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#37 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ac2098, indexId=2686, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a990) at genam.c:353
#4  0x0000000000610d63 in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1427
#5  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#6  0x00007f12ea67e500 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1146
#7  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#8  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#9  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102154) at utils/metadata_cache.c:774
#10 0x00007f12ea67d55d in LoadShardPlacement (shardId=102154, placementId=148) at utils/metadata_cache.c:483
#11 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ac2098, indexId=2686, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a990) at genam.c:353
#4  0x0000000000610d63 in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1427
#5  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#6  0x00007f12ea67e557 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1161
#7  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#8  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#9  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102154) at utils/metadata_cache.c:774
#10 0x00007f12ea67d55d in LoadShardPlacement (shardId=102154, placementId=148) at utils/metadata_cache.c:483
#11 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c567a8, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9c0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c62250) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b20748) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20748) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37202) at utils/metadata_cache.c:932
#8  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102154) at utils/metadata_cache.c:774
#9  0x00007f12ea67d55d in LoadShardPlacement (shardId=102154, placementId=148) at utils/metadata_cache.c:483
#10 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2659, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a730) at genam.c:353
#4  0x000000000095174b in RelationBuildTupleDesc (relation=0x7f12f1c61ae0) at relcache.c:527
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=37202, insertIt=0 '\000') at relcache.c:1325
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c5e810, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c5e810) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37202) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2cc3228) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2b2b448, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea6829f6 in CitusInvalidateRelcacheByShardId (shardId=102155) at utils/metadata_cache.c:3879
#15 0x00007f12ea633086 in InsertShardPlacementRow (shardId=102155, placementId=149, shardState=1 '\001', shardLength=0, groupId=5) at master/master_metadata_utility.c:955
#16 0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#17 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#18 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#19 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#20 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#21 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#22 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#23 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#24 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#25 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#26 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#27 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#28 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#29 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#31 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#32 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#33 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#34 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#35 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#36 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#37 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#38 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2b2c938, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 8, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2b2c938) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c538c0, indexId=20386, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144ac00) at genam.c:353
#4  0x00007f12ea682941 in CitusInvalidateRelcacheByShardId (shardId=102156) at utils/metadata_cache.c:3846
#5  0x00007f12ea633086 in InsertShardPlacementRow (shardId=102156, placementId=150, shardState=1 '\001', shardLength=0, groupId=4) at master/master_metadata_utility.c:955
#6  0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37202, sourceRelationId=29009, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#7  0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37202, colocatedTableId=29009, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#8  0x00007f12ea60ea2d in CreateDistributedTable (relationId=37202, distributionColumn=0x2b4f3d8, distributionMethod=104 'h', colocateWithTableName=0x2b4fcd0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#9  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2b13f48) at commands/create_distributed_table.c:230
#10 0x00000000006702c9 in ExecInterpExpr (state=0x2b13e70, econtext=0x2b13b68, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#11 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2b13e70, econtext=0x2b13b68, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#12 0x00000000006a5105 in ExecProject (projInfo=0x2b13e68) at ../../../src/include/executor/executor.h:342
#13 0x00000000006a5274 in ExecResult (pstate=0x2b13a58) at nodeResult.c:136
#14 0x000000000067f485 in ExecProcNodeFirst (node=0x2b13a58) at execProcnode.c:430
#15 0x0000000000678445 in ExecProcNode (node=0x2b13a58) at ../../../src/include/executor/executor.h:250
#16 0x000000000067a888 in ExecutePlan (estate=0x2b13848, planstate=0x2b13a58, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2afc460, execute_once=1 '\001') at execMain.c:1722
#17 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#18 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#19 0x0000000000678763 in ExecutorRun (queryDesc=0x2b2d658, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#20 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2afc460) at pquery.c:932
#21 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2afc460, altdest=0x2afc460, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#22 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test2', 'id', 'hash');") at postgres.c:1099
#23 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#24 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#25 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#26 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#27 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#28 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) info b
Num     Type           Disp Enb Address            What
1       breakpoint     keep y   0x00000000009b198c in PushActiveSnapshot at snapmgr.c:739
	breakpoint already hit 3 times
2       breakpoint     keep y   0x00000000009b1ad6 in PopActiveSnapshot at snapmgr.c:816
	breakpoint already hit 2 times
3       breakpoint     keep y   0x00000000009b1c8d in UnregisterSnapshotFromOwner at snapmgr.c:920
	breakpoint already hit 145 times
4       breakpoint     keep y   0x000000000099e42f in ResourceOwnerDelete at resowner.c:708
5       breakpoint     keep y   0x00007f12ea610165 in CopyLocalDataIntoShards at commands/create_distributed_table.c:1223
6       breakpoint     keep y   0x000000000099ed4f in ResourceOwnerRememberSnapshot at resowner.c:1156
	breakpoint already hit 148 times
7       breakpoint     keep y   0x00000000009b1f0c in AtEOXact_Snapshot at snapmgr.c:1070
8       breakpoint     keep y   0x000000000099ed7b in ResourceOwnerForgetSnapshot at resowner.c:1165
	breakpoint already hit 145 times
(gdb) q
A debugging session is active.

	Inferior 1 [process 128889] will be detached.

Quit anyway? (y or n) y
Detaching from program: /opt/pgsql-10.1/bin/postgres, process 128889
[cituscluster@gtm1 ~]$ gdb attach 128889
GNU gdb (GDB) Red Hat Enterprise Linux 7.6.1-110.el7
Copyright (C) 2013 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-redhat-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
attach: No such file or directory.
Attaching to process 128889
Reading symbols from /opt/pgsql-10.1/bin/postgres...done.
Reading symbols from /lib64/libpthread.so.0...Reading symbols from /usr/lib/debug/usr/lib64/libpthread-2.17.so.debug...done.
done.
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib64/libthread_db.so.1".
Loaded symbols for /lib64/libpthread.so.0
Reading symbols from /lib64/librt.so.1...Reading symbols from /usr/lib/debug/usr/lib64/librt-2.17.so.debug...done.
done.
Loaded symbols for /lib64/librt.so.1
Reading symbols from /lib64/libdl.so.2...Reading symbols from /usr/lib/debug/usr/lib64/libdl-2.17.so.debug...done.
done.
Loaded symbols for /lib64/libdl.so.2
Reading symbols from /lib64/libm.so.6...Reading symbols from /usr/lib/debug/usr/lib64/libm-2.17.so.debug...done.
done.
Loaded symbols for /lib64/libm.so.6
Reading symbols from /lib64/libc.so.6...Reading symbols from /usr/lib/debug/usr/lib64/libc-2.17.so.debug...done.
done.
Loaded symbols for /lib64/libc.so.6
Reading symbols from /lib64/ld-linux-x86-64.so.2...Reading symbols from /usr/lib/debug/usr/lib64/ld-2.17.so.debug...done.
done.
Loaded symbols for /lib64/ld-linux-x86-64.so.2
Reading symbols from /opt/pgsql-10.1/lib/citus.so...done.
Loaded symbols for /opt/pgsql-10.1/lib/citus.so
Reading symbols from /opt/pgsql-10.1/lib/libpq.so.5...done.
Loaded symbols for /opt/pgsql-10.1/lib/libpq.so.5
Reading symbols from /lib64/libnss_files.so.2...Reading symbols from /usr/lib/debug/usr/lib64/libnss_files-2.17.so.debug...done.
done.
Loaded symbols for /lib64/libnss_files.so.2
Reading symbols from /opt/pgsql-10.1/lib/plpgsql.so...done.
Loaded symbols for /opt/pgsql-10.1/lib/plpgsql.so
0x00007f12f0f0b163 in __epoll_wait_nocancel () at ../sysdeps/unix/syscall-template.S:81
81	T_PSEUDO (SYSCALL_SYMBOL, SYSCALL_NAME, SYSCALL_NARGS)
(gdb) b PushActiveSnapshot
Breakpoint 1 at 0x9b198c: file snapmgr.c, line 739.
(gdb) b PopActiveSnapshot
Breakpoint 2 at 0x9b1ad6: file snapmgr.c, line 816.
(gdb) b UnregisterSnapshotFromOwner
Breakpoint 3 at 0x9b1c8d: file snapmgr.c, line 920.
(gdb) b ResourceOwnerDelete
Breakpoint 4 at 0x99e42f: file resowner.c, line 708.
(gdb) b CopyLocalDataIntoShards
Breakpoint 5 at 0x7f12ea610165: file commands/create_distributed_table.c, line 1223.
(gdb) b ResourceOwnerRememberSnapshot
Breakpoint 6 at 0x99ed4f: file resowner.c, line 1156.
(gdb) b ResourceOwnerForgetSnapshot
Breakpoint 7 at 0x99ed7b: file resowner.c, line 1165.
(gdb) b AtEOXact_Snapshot
Breakpoint 8 at 0x9b1f0c: file snapmgr.c, line 1070.
(gdb) c
Continuing.

Breakpoint 1, PushActiveSnapshot (snap=0xe16f20 <CurrentSnapshotData>) at snapmgr.c:739
739		newactive = MemoryContextAlloc(TopTransactionContext, sizeof(ActiveSnapshotElt));
(gdb) bt
#0  PushActiveSnapshot (snap=0xe16f20 <CurrentSnapshotData>) at snapmgr.c:739
#1  0x0000000000813998 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1012
#2  0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#3  0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#4  0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#5  0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#6  0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#7  0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 2, PopActiveSnapshot () at snapmgr.c:816
816		newstack = ActiveSnapshot->as_next;
(gdb) bt
#0  PopActiveSnapshot () at snapmgr.c:816
#1  0x00000000008139fb in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1032
#2  0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#3  0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#4  0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#5  0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#6  0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#7  0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 1, PushActiveSnapshot (snap=0xe16f20 <CurrentSnapshotData>) at snapmgr.c:739
739		newactive = MemoryContextAlloc(TopTransactionContext, sizeof(ActiveSnapshotElt));
(gdb) bt
#0  PushActiveSnapshot (snap=0xe16f20 <CurrentSnapshotData>) at snapmgr.c:739
#1  0x0000000000818fdc in PortalStart (portal=0x2b289c8, params=0x0, eflags=0, snapshot=0x0) at pquery.c:492
#2  0x0000000000813a72 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1060
#3  0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#4  0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#5  0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#6  0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#7  0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#8  0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bb28) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bb28) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0x2a9bb28, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0x2a9bb28) at snapmgr.c:868
#3  0x000000000081878e in CreateQueryDesc (plannedstmt=0x2b14170, sourceText=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');", snapshot=0x2a9bb28, 
    crosscheck_snapshot=0x0, dest=0xe0bce0 <donothingDR>, params=0x0, queryEnv=0x0, instrument_options=0) at pquery.c:81
#4  0x0000000000819043 in PortalStart (portal=0x2b289c8, params=0x0, eflags=0, snapshot=0x0) at pquery.c:498
#5  0x0000000000813a72 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1060
#6  0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#7  0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#8  0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#9  0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#10 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#11 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bb28) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bb28) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0x2a9bb28, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0x2a9bb28) at snapmgr.c:868
#3  0x00000000006786bb in standard_ExecutorStart (queryDesc=0x2b248f8, eflags=16) at execMain.c:249
#4  0x00007f12ea6253b8 in CitusExecutorStart (queryDesc=0x2b248f8, eflags=0) at executor/multi_executor.c:96
#5  0x0000000000678516 in ExecutorStart (queryDesc=0x2b248f8, eflags=0) at execMain.c:150
#6  0x0000000000819080 in PortalStart (portal=0x2b289c8, params=0x0, eflags=0, snapshot=0x0) at pquery.c:520
#7  0x0000000000813a72 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1060
#8  0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#9  0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#10 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#11 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#12 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#13 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 2, PopActiveSnapshot () at snapmgr.c:816
816		newstack = ActiveSnapshot->as_next;
(gdb) bt
#0  PopActiveSnapshot () at snapmgr.c:816
#1  0x00000000008190d8 in PortalStart (portal=0x2b289c8, params=0x0, eflags=0, snapshot=0x0) at pquery.c:539
#2  0x0000000000813a72 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1060
#3  0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#4  0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#5  0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#6  0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#7  0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#8  0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 1, PushActiveSnapshot (snap=0x2a9bb28) at snapmgr.c:739
739		newactive = MemoryContextAlloc(TopTransactionContext, sizeof(ActiveSnapshotElt));
(gdb) bt
#0  PushActiveSnapshot (snap=0x2a9bb28) at snapmgr.c:739
#1  0x00000000008198d2 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:931
#2  0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#3  0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#4  0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#5  0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#6  0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#7  0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#8  0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#9  0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c4adf0, indexId=0, indexOK=0 '\000', snapshot=0x0, nkeys=1, key=0x7ffe4144ada0) at genam.c:353
#4  0x00007f12ea6830c3 in IsChildTable (relationId=37208) at utils/multi_partitioning_utils.c:151
#5  0x00007f12ea677958 in EnsureRelationKindSupported (relationId=37208) at utils/citus_ruleutils.c:479
#6  0x00007f12ea60e74d in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:221
#7  0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#8  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#9  0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#10 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#11 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#12 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#13 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#14 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#15 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#16 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#17 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#18 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#19 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#20 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#21 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#22 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#23 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#24 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#25 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9bbb8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2a9bbb8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2a9bbb8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2c5abb8) at genam.c:510
#4  0x00007f12ea683119 in IsChildTable (relationId=37208) at utils/multi_partitioning_utils.c:166
#5  0x00007f12ea677958 in EnsureRelationKindSupported (relationId=37208) at utils/citus_ruleutils.c:479
#6  0x00007f12ea60e74d in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:221
#7  0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#8  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#9  0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#10 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#11 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#12 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#13 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#14 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#15 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#16 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#17 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#18 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#19 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#20 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#21 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#22 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#23 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#24 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#25 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c4adf0, indexId=2187, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144adb0) at genam.c:353
#4  0x00007f12ea6831c3 in IsParentTable (relationId=37208) at utils/multi_partitioning_utils.c:197
#5  0x00007f12ea677966 in EnsureRelationKindSupported (relationId=37208) at utils/citus_ruleutils.c:480
#6  0x00007f12ea60e74d in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:221
#7  0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#8  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#9  0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#10 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#11 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#12 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#13 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#14 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#15 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#16 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#17 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#18 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#19 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#20 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#21 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#22 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#23 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#24 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#25 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) 
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c4adf0, indexId=2187, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144adb0) at genam.c:353
#4  0x00007f12ea6831c3 in IsParentTable (relationId=37208) at utils/multi_partitioning_utils.c:197
#5  0x00007f12ea677966 in EnsureRelationKindSupported (relationId=37208) at utils/citus_ruleutils.c:480
#6  0x00007f12ea60e74d in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:221
#7  0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#8  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#9  0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#10 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#11 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#12 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#13 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#14 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#15 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#16 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#17 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#18 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#19 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#20 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#21 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#22 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#23 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#24 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#25 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) 
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c4adf0, indexId=2187, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144adb0) at genam.c:353
#4  0x00007f12ea6831c3 in IsParentTable (relationId=37208) at utils/multi_partitioning_utils.c:197
#5  0x00007f12ea677966 in EnsureRelationKindSupported (relationId=37208) at utils/citus_ruleutils.c:480
#6  0x00007f12ea60e74d in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:221
#7  0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#8  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#9  0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#10 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#11 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#12 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#13 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#14 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#15 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#16 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#17 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#18 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#19 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#20 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#21 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#22 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#23 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#24 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#25 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9bbb8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2658, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144ac10) at genam.c:353
#4  0x000000000094be9c in SearchCatCache (cache=0x2a5d4f8, v1=37208, v2=46510664, v3=0, v4=0) at catcache.c:1169
#5  0x000000000095e65e in SearchSysCache (cacheId=6, key1=37208, key2=46510664, key3=0, key4=0) at syscache.c:1109
#6  0x000000000095e80b in SearchSysCacheAttName (relid=37208, attname=0x2c5b248 "id") at syscache.c:1209
#7  0x00007f12ea67b018 in BuildDistributionKeyFromColumnName (distributedRelation=0x7f12f1c58138, columnName=0x2c5b248 "id") at utils/distribution_column.c:151
#8  0x00007f12ea60e770 in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:224
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9bbb8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c4bec0, indexId=20536, indexOK=1 '\001', snapshot=0x0, nkeys=3, key=0x7ffe4144ac60) at genam.c:353
#4  0x00007f12ea679be9 in ColocationId (shardCount=4, replicationFactor=1, distributionColumnType=23) at utils/colocation_utils.c:464
#5  0x00007f12ea60ee09 in ColocationIdForNewTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', replicationModel=99 'c', 
    colocateWithTableName=0x2c5b4b0 "default", viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:564
#6  0x00007f12ea60e994 in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:332
#7  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#8  0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#9  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#10 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#11 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#12 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#13 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#14 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#15 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#16 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#17 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#18 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#19 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#20 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#21 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#22 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#23 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#24 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#25 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#26 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9bbb8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ac2098, indexId=2686, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144ac60) at genam.c:353
#4  0x0000000000610d63 in GetDefaultOpClass (type_id=23, am_id=405) at indexcmds.c:1427
#5  0x00007f12ea60fbf5 in SupportFunctionForColumn (partitionColumn=0x2c5abb8, accessMethodId=405, supportFunctionNumber=1) at commands/create_distributed_table.c:1007
#6  0x00007f12ea60f0ad in EnsureRelationCanBeDistributed (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocationId=2, replicationModel=99 'c', 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:662
#7  0x00007f12ea60e9bb in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:336
#8  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9bbb8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ad96d0, indexId=2665, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144abe0) at genam.c:353
#4  0x00007f12ea610d3c in ErrorIfUnsupportedForeignConstraint (relation=0x7f12f1c58138, distributionMethod=104 'h', distributionColumn=0x2c5abb8, colocationId=2)
    at commands/foreign_constraint.c:145
#5  0x00007f12ea6196d2 in ErrorIfUnsupportedConstraint (relation=0x7f12f1c58138, distributionMethod=104 'h', distributionColumn=0x2c5abb8, colocationId=2) at commands/table.c:793
#6  0x00007f12ea60f473 in EnsureRelationCanBeDistributed (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocationId=2, replicationModel=99 'c', 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:750
#7  0x00007f12ea60e9bb in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:336
#8  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
---Type <return> to continue, or q <return> to quit---
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9bbb8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c4e510, indexId=3258, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144acb0) at genam.c:353
#4  0x000000000061c2a9 in relation_has_policies (rel=0x7f12f1c58138) at policy.c:1376
#5  0x00007f12ea617c26 in ErrorIfUnsupportedPolicy (relation=0x7f12f1c58138) at commands/policy.c:61
#6  0x00007f12ea60f47f in EnsureRelationCanBeDistributed (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocationId=2, replicationModel=99 'c', 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:754
#7  0x00007f12ea60e9bb in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:336
#8  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9bbb8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1ce7e10, indexId=2696, indexOK=1 '\001', snapshot=0x0, nkeys=3, key=0x7ffe41449650) at genam.c:353
#4  0x000000000094be9c in SearchCatCache (cache=0x2a6af38, v1=37208, v2=1, v3=0, v4=0) at catcache.c:1169
#5  0x000000000095e65e in SearchSysCache (cacheId=57, key1=37208, key2=1, key3=0, key4=0) at syscache.c:1109
#6  0x0000000000962ad4 in get_attavgwidth (relid=37208, attnum=1) at lsyscache.c:2839
#7  0x000000000076bde8 in get_rel_data_width (rel=0x7f12f1c58138, attr_widths=0x2b4fa0c) at plancat.c:1089
#8  0x000000000076bb47 in estimate_rel_size (rel=0x7f12f1c58138, attr_widths=0x2b4fa0c, pages=0x2b4f798, tuples=0x2b4f7a0, allvisfrac=0x2b4f7a8) at plancat.c:1011
#9  0x000000000076a595 in get_relation_info (root=0x2b4f498, relationObjectId=37208, inhparent=0 '\000', rel=0x2b4f6e8) at plancat.c:139
#10 0x000000000076f866 in build_simple_rel (root=0x2b4f498, relid=1, parent=0x0) at relnode.c:171
#11 0x000000000073e5c7 in add_base_rels_to_query (root=0x2b4f498, jtnode=0x2c4d830) at initsplan.c:112
#12 0x000000000073e60d in add_base_rels_to_query (root=0x2b4f498, jtnode=0x2c4d7b0) at initsplan.c:120
#13 0x000000000074267e in query_planner (root=0x2b4f498, tlist=0x0, qp_callback=0x74768b <standard_qp_callback>, qp_extra=0x7ffe41449bb0) at planmain.c:138
#14 0x0000000000744f81 in grouping_planner (root=0x2b4f498, inheritance_update=0 '\000', tuple_fraction=1) at planner.c:1714
#15 0x0000000000743b2e in subquery_planner (glob=0x2c4d118, parse=0x2c4c800, parent_root=0x2c4d1a8, hasRecursion=0 '\000', tuple_fraction=1) at planner.c:862
#16 0x00000000007506a2 in make_subplan (root=0x2c4d1a8, orig_subquery=0x2c4c910, subLinkType=EXISTS_SUBLINK, subLinkId=0, testexpr=0x0, isTopQual=0 '\000') at subselect.c:534
#17 0x000000000075283c in process_sublinks_mutator (node=0x2c4d438, context=0x7ffe4144a2a0) at subselect.c:1977
#18 0x00000000006d4048 in expression_tree_mutator (node=0x2c4d3e8, mutator=0x7527a3 <process_sublinks_mutator>, context=0x7ffe4144a2a0) at nodeFuncs.c:2854
#19 0x0000000000752a15 in process_sublinks_mutator (node=0x2c4d3e8, context=0x7ffe4144a660) at subselect.c:2073
#20 0x00000000006d4231 in expression_tree_mutator (node=0x2c4d4a8, mutator=0x7527a3 <process_sublinks_mutator>, context=0x7ffe4144a660) at nodeFuncs.c:2903
#21 0x0000000000752a15 in process_sublinks_mutator (node=0x2c4d4a8, context=0x7ffe4144a6e0) at subselect.c:2073
#22 0x00000000007527a1 in SS_process_sublinks (root=0x2c4d1a8, expr=0x2c4d4a8, isQual=0 '\000') at subselect.c:1950
#23 0x0000000000743c46 in preprocess_expression (root=0x2c4d1a8, expr=0x2c4d4a8, kind=1) at planner.c:954
#24 0x00000000007433b4 in subquery_planner (glob=0x2c4d118, parse=0x2c4c6f0, parent_root=0x0, hasRecursion=0 '\000', tuple_fraction=0) at planner.c:628
#25 0x0000000000742b54 in standard_planner (parse=0x2c4c6f0, cursorOptions=256, boundParams=0x0) at planner.c:334
#26 0x00007f12ea63c61b in distributed_planner (parse=0x2c4c6f0, cursorOptions=256, boundParams=0x0) at planner/distributed_planner.c:172
#27 0x00000000007428cc in planner (parse=0x2c4c6f0, cursorOptions=256, boundParams=0x0) at planner.c:208
#28 0x000000000081361a in pg_plan_query (querytree=0x2c4c6f0, cursorOptions=256, boundParams=0x0) at postgres.c:796
#29 0x000000000081373a in pg_plan_queries (querytrees=0x2c4cfe0, cursorOptions=256, boundParams=0x0) at postgres.c:862
#30 0x000000000094fe6e in BuildCachedPlan (plansource=0x2c4c480, qlist=0x2c4cfe0, boundParams=0x0, queryEnv=0x0) at plancache.c:937
#31 0x000000000095039d in GetCachedPlan (plansource=0x2c4c480, boundParams=0x0, useResOwner=0 '\000', queryEnv=0x0) at plancache.c:1211
---Type <return> to continue, or q <return> to quit---
#32 0x00000000006b6eb4 in _SPI_execute_plan (plan=0x7ffe4144ad40, paramLI=0x0, snapshot=0x0, crosscheck_snapshot=0x0, read_only=1 '\001', fire_triggers=1 '\001', tcount=0) at spi.c:2027
#33 0x00000000006b4286 in SPI_execute (src=0x2c5b5b0 "SELECT EXISTS (SELECT 1 FROM public.test1)", read_only=1 '\001', tcount=0) at spi.c:328
#34 0x00007f12ea60fddb in LocalTableEmpty (tableId=37208) at commands/create_distributed_table.c:1066
#35 0x00007f12ea60e9c5 in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:340
#36 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#37 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#38 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#39 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#40 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#41 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#42 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#43 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#44 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#45 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#46 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#47 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#48 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#49 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#50 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#51 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#52 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#53 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#54 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#55 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9bbb8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1ce7e10, indexId=2696, indexOK=1 '\001', snapshot=0x0, nkeys=3, key=0x7ffe41449650) at genam.c:353
#4  0x000000000094be9c in SearchCatCache (cache=0x2a6af38, v1=37208, v2=2, v3=0, v4=0) at catcache.c:1169
#5  0x000000000095e65e in SearchSysCache (cacheId=57, key1=37208, key2=2, key3=0, key4=0) at syscache.c:1109
#6  0x0000000000962ad4 in get_attavgwidth (relid=37208, attnum=2) at lsyscache.c:2839
#7  0x000000000076bde8 in get_rel_data_width (rel=0x7f12f1c58138, attr_widths=0x2b4fa0c) at plancat.c:1089
#8  0x000000000076bb47 in estimate_rel_size (rel=0x7f12f1c58138, attr_widths=0x2b4fa0c, pages=0x2b4f798, tuples=0x2b4f7a0, allvisfrac=0x2b4f7a8) at plancat.c:1011
#9  0x000000000076a595 in get_relation_info (root=0x2b4f498, relationObjectId=37208, inhparent=0 '\000', rel=0x2b4f6e8) at plancat.c:139
#10 0x000000000076f866 in build_simple_rel (root=0x2b4f498, relid=1, parent=0x0) at relnode.c:171
#11 0x000000000073e5c7 in add_base_rels_to_query (root=0x2b4f498, jtnode=0x2c4d830) at initsplan.c:112
#12 0x000000000073e60d in add_base_rels_to_query (root=0x2b4f498, jtnode=0x2c4d7b0) at initsplan.c:120
#13 0x000000000074267e in query_planner (root=0x2b4f498, tlist=0x0, qp_callback=0x74768b <standard_qp_callback>, qp_extra=0x7ffe41449bb0) at planmain.c:138
#14 0x0000000000744f81 in grouping_planner (root=0x2b4f498, inheritance_update=0 '\000', tuple_fraction=1) at planner.c:1714
#15 0x0000000000743b2e in subquery_planner (glob=0x2c4d118, parse=0x2c4c800, parent_root=0x2c4d1a8, hasRecursion=0 '\000', tuple_fraction=1) at planner.c:862
#16 0x00000000007506a2 in make_subplan (root=0x2c4d1a8, orig_subquery=0x2c4c910, subLinkType=EXISTS_SUBLINK, subLinkId=0, testexpr=0x0, isTopQual=0 '\000') at subselect.c:534
#17 0x000000000075283c in process_sublinks_mutator (node=0x2c4d438, context=0x7ffe4144a2a0) at subselect.c:1977
#18 0x00000000006d4048 in expression_tree_mutator (node=0x2c4d3e8, mutator=0x7527a3 <process_sublinks_mutator>, context=0x7ffe4144a2a0) at nodeFuncs.c:2854
#19 0x0000000000752a15 in process_sublinks_mutator (node=0x2c4d3e8, context=0x7ffe4144a660) at subselect.c:2073
#20 0x00000000006d4231 in expression_tree_mutator (node=0x2c4d4a8, mutator=0x7527a3 <process_sublinks_mutator>, context=0x7ffe4144a660) at nodeFuncs.c:2903
#21 0x0000000000752a15 in process_sublinks_mutator (node=0x2c4d4a8, context=0x7ffe4144a6e0) at subselect.c:2073
#22 0x00000000007527a1 in SS_process_sublinks (root=0x2c4d1a8, expr=0x2c4d4a8, isQual=0 '\000') at subselect.c:1950
#23 0x0000000000743c46 in preprocess_expression (root=0x2c4d1a8, expr=0x2c4d4a8, kind=1) at planner.c:954
#24 0x00000000007433b4 in subquery_planner (glob=0x2c4d118, parse=0x2c4c6f0, parent_root=0x0, hasRecursion=0 '\000', tuple_fraction=0) at planner.c:628
#25 0x0000000000742b54 in standard_planner (parse=0x2c4c6f0, cursorOptions=256, boundParams=0x0) at planner.c:334
#26 0x00007f12ea63c61b in distributed_planner (parse=0x2c4c6f0, cursorOptions=256, boundParams=0x0) at planner/distributed_planner.c:172
#27 0x00000000007428cc in planner (parse=0x2c4c6f0, cursorOptions=256, boundParams=0x0) at planner.c:208
#28 0x000000000081361a in pg_plan_query (querytree=0x2c4c6f0, cursorOptions=256, boundParams=0x0) at postgres.c:796
#29 0x000000000081373a in pg_plan_queries (querytrees=0x2c4cfe0, cursorOptions=256, boundParams=0x0) at postgres.c:862
#30 0x000000000094fe6e in BuildCachedPlan (plansource=0x2c4c480, qlist=0x2c4cfe0, boundParams=0x0, queryEnv=0x0) at plancache.c:937
#31 0x000000000095039d in GetCachedPlan (plansource=0x2c4c480, boundParams=0x0, useResOwner=0 '\000', queryEnv=0x0) at plancache.c:1211
---Type <return> to continue, or q <return> to quit---
#32 0x00000000006b6eb4 in _SPI_execute_plan (plan=0x7ffe4144ad40, paramLI=0x0, snapshot=0x0, crosscheck_snapshot=0x0, read_only=1 '\001', fire_triggers=1 '\001', tcount=0) at spi.c:2027
#33 0x00000000006b4286 in SPI_execute (src=0x2c5b5b0 "SELECT EXISTS (SELECT 1 FROM public.test1)", read_only=1 '\001', tcount=0) at spi.c:328
#34 0x00007f12ea60fddb in LocalTableEmpty (tableId=37208) at commands/create_distributed_table.c:1066
#35 0x00007f12ea60e9c5 in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:340
#36 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#37 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#38 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#39 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#40 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#41 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#42 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#43 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#44 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#45 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#46 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#47 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#48 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#49 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#50 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#51 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#52 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#53 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#54 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#55 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9bbb8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1ce5f10, indexId=3379, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe414497f0) at genam.c:353
#4  0x00000000009593a7 in RelationGetStatExtList (relation=0x7f12f1c58138) at relcache.c:4521
#5  0x000000000076c1ac in get_relation_statistics (rel=0x2b4f6e8, relation=0x7f12f1c58138) at plancat.c:1276
#6  0x000000000076aecc in get_relation_info (root=0x2b4f498, relationObjectId=37208, inhparent=0 '\000', rel=0x2b4f6e8) at plancat.c:406
#7  0x000000000076f866 in build_simple_rel (root=0x2b4f498, relid=1, parent=0x0) at relnode.c:171
#8  0x000000000073e5c7 in add_base_rels_to_query (root=0x2b4f498, jtnode=0x2c4d830) at initsplan.c:112
#9  0x000000000073e60d in add_base_rels_to_query (root=0x2b4f498, jtnode=0x2c4d7b0) at initsplan.c:120
#10 0x000000000074267e in query_planner (root=0x2b4f498, tlist=0x0, qp_callback=0x74768b <standard_qp_callback>, qp_extra=0x7ffe41449bb0) at planmain.c:138
#11 0x0000000000744f81 in grouping_planner (root=0x2b4f498, inheritance_update=0 '\000', tuple_fraction=1) at planner.c:1714
#12 0x0000000000743b2e in subquery_planner (glob=0x2c4d118, parse=0x2c4c800, parent_root=0x2c4d1a8, hasRecursion=0 '\000', tuple_fraction=1) at planner.c:862
#13 0x00000000007506a2 in make_subplan (root=0x2c4d1a8, orig_subquery=0x2c4c910, subLinkType=EXISTS_SUBLINK, subLinkId=0, testexpr=0x0, isTopQual=0 '\000') at subselect.c:534
#14 0x000000000075283c in process_sublinks_mutator (node=0x2c4d438, context=0x7ffe4144a2a0) at subselect.c:1977
#15 0x00000000006d4048 in expression_tree_mutator (node=0x2c4d3e8, mutator=0x7527a3 <process_sublinks_mutator>, context=0x7ffe4144a2a0) at nodeFuncs.c:2854
#16 0x0000000000752a15 in process_sublinks_mutator (node=0x2c4d3e8, context=0x7ffe4144a660) at subselect.c:2073
#17 0x00000000006d4231 in expression_tree_mutator (node=0x2c4d4a8, mutator=0x7527a3 <process_sublinks_mutator>, context=0x7ffe4144a660) at nodeFuncs.c:2903
#18 0x0000000000752a15 in process_sublinks_mutator (node=0x2c4d4a8, context=0x7ffe4144a6e0) at subselect.c:2073
#19 0x00000000007527a1 in SS_process_sublinks (root=0x2c4d1a8, expr=0x2c4d4a8, isQual=0 '\000') at subselect.c:1950
#20 0x0000000000743c46 in preprocess_expression (root=0x2c4d1a8, expr=0x2c4d4a8, kind=1) at planner.c:954
#21 0x00000000007433b4 in subquery_planner (glob=0x2c4d118, parse=0x2c4c6f0, parent_root=0x0, hasRecursion=0 '\000', tuple_fraction=0) at planner.c:628
#22 0x0000000000742b54 in standard_planner (parse=0x2c4c6f0, cursorOptions=256, boundParams=0x0) at planner.c:334
#23 0x00007f12ea63c61b in distributed_planner (parse=0x2c4c6f0, cursorOptions=256, boundParams=0x0) at planner/distributed_planner.c:172
#24 0x00000000007428cc in planner (parse=0x2c4c6f0, cursorOptions=256, boundParams=0x0) at planner.c:208
#25 0x000000000081361a in pg_plan_query (querytree=0x2c4c6f0, cursorOptions=256, boundParams=0x0) at postgres.c:796
#26 0x000000000081373a in pg_plan_queries (querytrees=0x2c4cfe0, cursorOptions=256, boundParams=0x0) at postgres.c:862
#27 0x000000000094fe6e in BuildCachedPlan (plansource=0x2c4c480, qlist=0x2c4cfe0, boundParams=0x0, queryEnv=0x0) at plancache.c:937
#28 0x000000000095039d in GetCachedPlan (plansource=0x2c4c480, boundParams=0x0, useResOwner=0 '\000', queryEnv=0x0) at plancache.c:1211
#29 0x00000000006b6eb4 in _SPI_execute_plan (plan=0x7ffe4144ad40, paramLI=0x0, snapshot=0x0, crosscheck_snapshot=0x0, read_only=1 '\001', fire_triggers=1 '\001', tcount=0) at spi.c:2027
#30 0x00000000006b4286 in SPI_execute (src=0x2c5b5b0 "SELECT EXISTS (SELECT 1 FROM public.test1)", read_only=1 '\001', tcount=0) at spi.c:328
#31 0x00007f12ea60fddb in LocalTableEmpty (tableId=37208) at commands/create_distributed_table.c:1066
---Type <return> to continue, or q <return> to quit---
#32 0x00007f12ea60e9c5 in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:340
#33 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#34 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#35 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#36 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#37 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#38 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#39 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#40 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#41 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#42 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#43 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#44 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#45 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#46 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#47 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#48 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#49 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#50 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#51 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#52 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9bbb8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bb28) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bb28) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0x2a9bb28, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0x2a9bb28) at snapmgr.c:868
#3  0x000000000081878e in CreateQueryDesc (plannedstmt=0x2b513c8, sourceText=0x2c5b5b0 "SELECT EXISTS (SELECT 1 FROM public.test1)", snapshot=0x2a9bb28, crosscheck_snapshot=0x0, 
    dest=0xe0bda0 <spi_printtupDR>, params=0x0, queryEnv=0x0, instrument_options=0) at pquery.c:81
#4  0x00000000006b7120 in _SPI_execute_plan (plan=0x7ffe4144ad40, paramLI=0x0, snapshot=0x0, crosscheck_snapshot=0x0, read_only=1 '\001', fire_triggers=1 '\001', tcount=0) at spi.c:2103
#5  0x00000000006b4286 in SPI_execute (src=0x2c5b5b0 "SELECT EXISTS (SELECT 1 FROM public.test1)", read_only=1 '\001', tcount=0) at spi.c:328
#6  0x00007f12ea60fddb in LocalTableEmpty (tableId=37208) at commands/create_distributed_table.c:1066
#7  0x00007f12ea60e9c5 in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:340
#8  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) 
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bb28) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0x2a9bb28, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0x2a9bb28) at snapmgr.c:868
#3  0x000000000081878e in CreateQueryDesc (plannedstmt=0x2b513c8, sourceText=0x2c5b5b0 "SELECT EXISTS (SELECT 1 FROM public.test1)", snapshot=0x2a9bb28, crosscheck_snapshot=0x0, 
    dest=0xe0bda0 <spi_printtupDR>, params=0x0, queryEnv=0x0, instrument_options=0) at pquery.c:81
#4  0x00000000006b7120 in _SPI_execute_plan (plan=0x7ffe4144ad40, paramLI=0x0, snapshot=0x0, crosscheck_snapshot=0x0, read_only=1 '\001', fire_triggers=1 '\001', tcount=0) at spi.c:2103
#5  0x00000000006b4286 in SPI_execute (src=0x2c5b5b0 "SELECT EXISTS (SELECT 1 FROM public.test1)", read_only=1 '\001', tcount=0) at spi.c:328
#6  0x00007f12ea60fddb in LocalTableEmpty (tableId=37208) at commands/create_distributed_table.c:1066
#7  0x00007f12ea60e9c5 in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:340
#8  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bb28) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9bb28, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9bb28) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9bb28) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2a9bb28, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2a9bb28) at snapmgr.c:910
#3  0x0000000000678ac4 in standard_ExecutorEnd (queryDesc=0x2b514a8) at execMain.c:498
#4  0x0000000000678a6c in ExecutorEnd (queryDesc=0x2b514a8) at execMain.c:466
#5  0x00000000006b771d in _SPI_pquery (queryDesc=0x2b514a8, fire_triggers=1 '\001', tcount=0) at spi.c:2346
#6  0x00000000006b7154 in _SPI_execute_plan (plan=0x7ffe4144ad40, paramLI=0x0, snapshot=0x0, crosscheck_snapshot=0x0, read_only=1 '\001', fire_triggers=1 '\001', tcount=0) at spi.c:2109
#7  0x00000000006b4286 in SPI_execute (src=0x2c5b5b0 "SELECT EXISTS (SELECT 1 FROM public.test1)", read_only=1 '\001', tcount=0) at spi.c:328
#8  0x00007f12ea60fddb in LocalTableEmpty (tableId=37208) at commands/create_distributed_table.c:1066
#9  0x00007f12ea60e9c5 in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:340
#10 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#11 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#12 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#13 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#14 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#15 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#16 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#17 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#18 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#19 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#20 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#21 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#22 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#23 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#24 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#25 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#26 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#27 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#28 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
---Type <return> to continue, or q <return> to quit---
#29 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9bb28, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9bb28) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d04bd8, indexId=20539, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144ad50) at genam.c:353
#4  0x00007f12ea67a9a1 in ColocatedTableId (colocationId=2) at utils/colocation_utils.c:959
#5  0x00007f12ea60e9d2 in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:341
#6  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#7  0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#8  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#9  0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#10 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#11 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#12 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#13 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#14 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#15 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#16 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#17 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#18 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#19 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#20 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#21 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#22 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#23 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#24 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#25 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9c458) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9c458, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9c458) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9c458) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2a9c458, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2a9c458) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2c5c1d0) at genam.c:510
#4  0x00000000009518f6 in RelationBuildTupleDesc (relation=0x7f12f1c57a58) at relcache.c:576
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=28994, insertIt=1 '\001') at relcache.c:1325
#6  0x000000000095509c in RelationIdGetRelation (relationId=28994) at relcache.c:2107
#7  0x00007f12ea67abe4 in ColocatedTableId (colocationId=2) at utils/colocation_utils.c:981
#8  0x00007f12ea60e9d2 in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:341
#9  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#10 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#11 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#12 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#13 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#14 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#15 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#16 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#17 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#18 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#19 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#20 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#21 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#22 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#23 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#24 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#25 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#26 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#27 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#28 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9c458) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9c458) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d023d8, indexId=2701, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144abe0) at genam.c:353
#4  0x000000000064bdac in RelationBuildTriggers (relation=0x7f12f1c57a58) at trigger.c:1716
#5  0x00000000009534b5 in RelationBuildDesc (targetRelId=28994, insertIt=1 '\001') at relcache.c:1339
#6  0x000000000095509c in RelationIdGetRelation (relationId=28994) at relcache.c:2107
#7  0x00007f12ea67abe4 in ColocatedTableId (colocationId=2) at utils/colocation_utils.c:981
#8  0x00007f12ea60e9d2 in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:341
#9  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#10 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#11 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#12 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#13 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#14 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#15 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#16 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#17 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#18 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#19 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#20 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#21 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#22 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#23 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#24 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#25 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#26 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#27 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#28 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9c458, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9c458) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9bbb8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2a9bbb8, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2a9bbb8) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2c5b4c8) at genam.c:510
#3  0x00007f12ea67ac2b in ColocatedTableId (colocationId=2) at utils/colocation_utils.c:995
#4  0x00007f12ea60e9d2 in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:341
#5  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#6  0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#7  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#8  0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#9  0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#10 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#11 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#12 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#13 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#14 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#15 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#16 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#17 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#18 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#19 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#20 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#21 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#22 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#23 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#24 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9bbb8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9c458) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9c458) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d03bc8, indexId=3081, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144acb0) at genam.c:353
#4  0x00000000005fef40 in get_extension_oid (extname=0x7f12ea6acf03 "citus", missing_ok=0 '\000') at extension.c:150
#5  0x00007f12ea63323c in RecordDistributedRelationDependencies (distributedRelationId=37208, distributionKey=0x2c5abb8) at master/master_metadata_utility.c:1045
#6  0x00007f12ea6331bf in InsertIntoPgDistPartition (relationId=37208, distributionMethod=104 'h', distributionColumn=0x2c5abb8, colocationId=2, replicationModel=99 'c')
    at master/master_metadata_utility.c:1014
#7  0x00007f12ea60e9f1 in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:344
#8  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9c458, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9c458) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9c458) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9c458) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c50070, indexId=2674, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144abb0) at genam.c:353
#4  0x0000000000560dda in isObjectPinned (object=0x7ffe4144ad50, rel=0x7f12f1c50070) at pg_depend.c:406
#5  0x0000000000560606 in recordMultipleDependencies (depender=0x7ffe4144ad60, referenced=0x7ffe4144ad50, nreferenced=1, behavior=DEPENDENCY_NORMAL) at pg_depend.c:92
#6  0x0000000000560578 in recordDependencyOn (depender=0x7ffe4144ad60, referenced=0x7ffe4144ad50, behavior=DEPENDENCY_NORMAL) at pg_depend.c:48
#7  0x00007f12ea63325e in RecordDistributedRelationDependencies (distributedRelationId=37208, distributionKey=0x2c5abb8) at master/master_metadata_utility.c:1049
#8  0x00007f12ea6331bf in InsertIntoPgDistPartition (relationId=37208, distributionMethod=104 'h', distributionColumn=0x2c5abb8, colocationId=2, replicationModel=99 'c')
    at master/master_metadata_utility.c:1014
#9  0x00007f12ea60e9f1 in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:344
#10 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#11 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#12 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#13 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#14 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#15 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#16 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#17 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#18 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#19 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#20 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#21 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#22 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#23 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#24 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#25 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#26 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#27 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
---Type <return> to continue, or q <return> to quit---
#28 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#29 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9c458, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9c458) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9c978) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9c978) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2659, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a8c0) at genam.c:353
#4  0x000000000095174b in RelationBuildTupleDesc (relation=0x7f12f1c57348) at relcache.c:527
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=37208, insertIt=0 '\000') at relcache.c:1325
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c58138, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c58138) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37208) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2a9c578) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2a9c528, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea6331c4 in InsertIntoPgDistPartition (relationId=37208, distributionMethod=104 'h', distributionColumn=0x2c5abb8, colocationId=2, replicationModel=99 'c')
    at master/master_metadata_utility.c:1016
#15 0x00007f12ea60e9f1 in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:344
#16 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#17 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#18 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#19 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#20 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#21 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#22 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#23 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#24 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#25 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#26 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#27 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#28 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
---Type <return> to continue, or q <return> to quit---
    at pquery.c:773
#29 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#30 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#31 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#32 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#33 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#34 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#35 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9c978, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9c978) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c50070, indexId=2674, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a860) at genam.c:353
#4  0x0000000000560dda in isObjectPinned (object=0x7ffe4144aae0, rel=0x7f12f1c50070) at pg_depend.c:406
#5  0x0000000000560606 in recordMultipleDependencies (depender=0x7ffe4144aaf0, referenced=0x7ffe4144aae0, nreferenced=1, behavior=DEPENDENCY_NORMAL) at pg_depend.c:92
#6  0x0000000000560578 in recordDependencyOn (depender=0x7ffe4144aaf0, referenced=0x7ffe4144aae0, behavior=DEPENDENCY_NORMAL) at pg_depend.c:48
#7  0x000000000064a3f4 in CreateTrigger (stmt=0x2c5b1b8, queryString=0x0, relOid=37208, refRelOid=0, constraintOid=0, indexOid=0, isInternal=1 '\001') at trigger.c:910
#8  0x00007f12ea610126 in CreateTruncateTrigger (relationId=37208) at commands/create_distributed_table.c:1169
#9  0x00007f12ea60ea09 in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:350
#10 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#11 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#12 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#13 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#14 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#15 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#16 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#17 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#18 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#19 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#20 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#21 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#22 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#23 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#24 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#25 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#26 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#27 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#28 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
---Type <return> to continue, or q <return> to quit---
#29 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d2b8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c50070, indexId=2674, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a860) at genam.c:353
#4  0x0000000000560dda in isObjectPinned (object=0x7ffe4144aae0, rel=0x7f12f1c50070) at pg_depend.c:406
#5  0x0000000000560606 in recordMultipleDependencies (depender=0x7ffe4144aaf0, referenced=0x7ffe4144aae0, nreferenced=1, behavior=DEPENDENCY_AUTO) at pg_depend.c:92
#6  0x0000000000560578 in recordDependencyOn (depender=0x7ffe4144aaf0, referenced=0x7ffe4144aae0, behavior=DEPENDENCY_AUTO) at pg_depend.c:48
#7  0x000000000064a488 in CreateTrigger (stmt=0x2c5b1b8, queryString=0x0, relOid=37208, refRelOid=0, constraintOid=0, indexOid=0, isInternal=1 '\001') at trigger.c:935
#8  0x00007f12ea610126 in CreateTruncateTrigger (relationId=37208) at commands/create_distributed_table.c:1169
#9  0x00007f12ea60ea09 in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:350
#10 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#11 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#12 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#13 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#14 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#15 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#16 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#17 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#18 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#19 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#20 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#21 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#22 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#23 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#24 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#25 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#26 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#27 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#28 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
---Type <return> to continue, or q <return> to quit---
#29 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d2b8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ad96d0, indexId=2665, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144acf0) at genam.c:353
#4  0x00007f12ea611740 in HasForeignKeyToReferenceTable (relationId=37208) at commands/foreign_constraint.c:544
#5  0x00007f12ea60feb1 in CanUseExclusiveConnections (relationId=37208, localTableEmpty=0 '\000') at commands/create_distributed_table.c:1095
#6  0x00007f12ea60ec86 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:488
#7  0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#8  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d2b8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d04bd8, indexId=20453, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144ab00) at genam.c:353
#4  0x00007f12ea6820fa in LookupDistPartitionTuple (pgDistPartition=0x7f12f1d04bd8, relationId=37208) at utils/metadata_cache.c:3534
#5  0x00007f12ea67df91 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:961
#6  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#7  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=37208) at utils/metadata_cache.c:835
#8  0x00007f12ea644336 in PartitionMethod (relationId=37208) at planner/multi_join_order.c:1246
#9  0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=37208) at master/master_create_shards.c:426
#10 0x00007f12ea6303ec in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:266
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d2b8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2659, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a7e0) at genam.c:353
#4  0x000000000095174b in RelationBuildTupleDesc (relation=0x7f12f1c57348) at relcache.c:527
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=20380, insertIt=1 '\001') at relcache.c:1325
#6  0x000000000095509c in RelationIdGetRelation (relationId=20380) at relcache.c:2107
#7  0x00000000004ba793 in relation_open (relationId=20380, lockmode=1) at heapam.c:1125
#8  0x00000000004ba9e7 in heap_open (relationId=20380, lockmode=1) at heapam.c:1288
#9  0x00007f12ea68216b in LookupDistShardTuples (relationId=37208) at utils/metadata_cache.c:3566
#10 0x00007f12ea67e303 in BuildCachedShardList (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1094
#11 0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1026
#12 0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#13 0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=37208) at utils/metadata_cache.c:835
#14 0x00007f12ea644336 in PartitionMethod (relationId=37208) at planner/multi_join_order.c:1246
#15 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=37208) at master/master_create_shards.c:426
#16 0x00007f12ea6303ec in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:266
#17 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#18 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#19 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#20 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#21 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#22 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#23 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#24 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#25 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#26 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#27 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#28 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#29 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#31 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#32 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#33 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#34 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#35 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#36 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#37 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#38 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d2b8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d023d8, indexId=2701, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a7f0) at genam.c:353
#4  0x000000000064bdac in RelationBuildTriggers (relation=0x7f12f1c57348) at trigger.c:1716
#5  0x00000000009534b5 in RelationBuildDesc (targetRelId=20380, insertIt=1 '\001') at relcache.c:1339
#6  0x000000000095509c in RelationIdGetRelation (relationId=20380) at relcache.c:2107
#7  0x00000000004ba793 in relation_open (relationId=20380, lockmode=1) at heapam.c:1125
#8  0x00000000004ba9e7 in heap_open (relationId=20380, lockmode=1) at heapam.c:1288
#9  0x00007f12ea68216b in LookupDistShardTuples (relationId=37208) at utils/metadata_cache.c:3566
#10 0x00007f12ea67e303 in BuildCachedShardList (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1094
#11 0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1026
#12 0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#13 0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=37208) at utils/metadata_cache.c:835
#14 0x00007f12ea644336 in PartitionMethod (relationId=37208) at planner/multi_join_order.c:1246
#15 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=37208) at master/master_create_shards.c:426
#16 0x00007f12ea6303ec in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:266
#17 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#18 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#19 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#20 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#21 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#22 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#23 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#24 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#25 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#26 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#27 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#28 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#29 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#31 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#32 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#33 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#34 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#35 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#36 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#37 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#38 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d2b8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2659, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a780) at genam.c:353
#4  0x000000000095174b in RelationBuildTupleDesc (relation=0x7f12f1c5c950) at relcache.c:527
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=20454, insertIt=1 '\001') at relcache.c:1325
#6  0x000000000095509c in RelationIdGetRelation (relationId=20454) at relcache.c:2107
#7  0x00000000004ba793 in relation_open (relationId=20454, lockmode=1) at heapam.c:1125
#8  0x00000000004d1fb2 in index_open (relationId=20454, lockmode=1) at indexam.c:155
#9  0x00000000004d18b9 in systable_beginscan (heapRelation=0x7f12f1c57348, indexId=20454, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9d0) at genam.c:340
#10 0x00007f12ea682203 in LookupDistShardTuples (relationId=37208) at utils/metadata_cache.c:3574
#11 0x00007f12ea67e303 in BuildCachedShardList (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1094
#12 0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1026
#13 0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#14 0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=37208) at utils/metadata_cache.c:835
#15 0x00007f12ea644336 in PartitionMethod (relationId=37208) at planner/multi_join_order.c:1246
#16 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=37208) at master/master_create_shards.c:426
#17 0x00007f12ea6303ec in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:266
#18 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#19 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#20 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#21 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#22 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#23 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#24 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#25 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#26 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#27 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#28 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#29 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
---Type <return> to continue, or q <return> to quit---
#30 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#31 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#32 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#33 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#34 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#35 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#36 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#37 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#38 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#39 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d2b8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c57348, indexId=20454, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9d0) at genam.c:353
#4  0x00007f12ea682203 in LookupDistShardTuples (relationId=37208) at utils/metadata_cache.c:3574
#5  0x00007f12ea67e303 in BuildCachedShardList (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1094
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=37208) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=37208) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=37208) at master/master_create_shards.c:426
#11 0x00007f12ea6303ec in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:266
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d2b8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ac2098, indexId=2686, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a970) at genam.c:353
#4  0x0000000000610d63 in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1427
#5  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#6  0x00007f12ea67e500 in BuildCachedShardList (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1146
#7  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1026
#8  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#9  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=37208) at utils/metadata_cache.c:835
#10 0x00007f12ea644336 in PartitionMethod (relationId=37208) at planner/multi_join_order.c:1246
#11 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=37208) at master/master_create_shards.c:426
#12 0x00007f12ea6303ec in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:266
#13 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#14 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#15 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#16 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#17 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#18 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#19 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#20 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#21 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#22 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#23 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#24 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#25 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#26 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#27 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#28 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
---Type <return> to continue, or q <return> to quit---
#29 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#30 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#31 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#32 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#33 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#34 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d2b8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ac2098, indexId=2686, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a970) at genam.c:353
#4  0x0000000000610d63 in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1427
#5  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#6  0x00007f12ea67e557 in BuildCachedShardList (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1161
#7  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1026
#8  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#9  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=37208) at utils/metadata_cache.c:835
#10 0x00007f12ea644336 in PartitionMethod (relationId=37208) at planner/multi_join_order.c:1246
#11 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=37208) at master/master_create_shards.c:426
#12 0x00007f12ea6303ec in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:266
#13 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#14 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#15 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#16 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#17 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#18 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#19 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#20 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#21 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#22 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#23 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#24 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#25 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#26 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#27 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#28 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
---Type <return> to continue, or q <return> to quit---
#29 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#30 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#31 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#32 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#33 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#34 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d2b8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d04bd8, indexId=20453, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144ab00) at genam.c:353
#4  0x00007f12ea6820fa in LookupDistPartitionTuple (pgDistPartition=0x7f12f1d04bd8, relationId=28994) at utils/metadata_cache.c:3534
#5  0x00007f12ea67df91 in BuildDistTableCacheEntry (cacheEntry=0x2b20648) at utils/metadata_cache.c:961
#6  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=28994) at utils/metadata_cache.c:932
#7  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=28994) at utils/metadata_cache.c:835
#8  0x00007f12ea644336 in PartitionMethod (relationId=28994) at planner/multi_join_order.c:1246
#9  0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=28994) at master/master_create_shards.c:426
#10 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d2b8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c57348, indexId=20454, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9d0) at genam.c:353
#4  0x00007f12ea682203 in LookupDistShardTuples (relationId=28994) at utils/metadata_cache.c:3574
#5  0x00007f12ea67e303 in BuildCachedShardList (cacheEntry=0x2b20648) at utils/metadata_cache.c:1094
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20648) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=28994) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=28994) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=28994) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=28994) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d2b8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ac2098, indexId=2686, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a970) at genam.c:353
#4  0x0000000000610d63 in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1427
#5  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#6  0x00007f12ea67e500 in BuildCachedShardList (cacheEntry=0x2b20648) at utils/metadata_cache.c:1146
#7  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20648) at utils/metadata_cache.c:1026
#8  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=28994) at utils/metadata_cache.c:932
#9  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=28994) at utils/metadata_cache.c:835
#10 0x00007f12ea644336 in PartitionMethod (relationId=28994) at planner/multi_join_order.c:1246
#11 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=28994) at master/master_create_shards.c:426
#12 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#13 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#14 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#15 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#16 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#17 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#18 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#19 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#20 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#21 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#22 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#23 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#24 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#25 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#26 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#27 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#28 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
---Type <return> to continue, or q <return> to quit---
#29 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#30 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#31 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#32 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#33 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#34 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d2b8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ac2098, indexId=2686, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a970) at genam.c:353
#4  0x0000000000610d63 in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1427
#5  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#6  0x00007f12ea67e557 in BuildCachedShardList (cacheEntry=0x2b20648) at utils/metadata_cache.c:1161
#7  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20648) at utils/metadata_cache.c:1026
#8  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=28994) at utils/metadata_cache.c:932
#9  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=28994) at utils/metadata_cache.c:835
#10 0x00007f12ea644336 in PartitionMethod (relationId=28994) at planner/multi_join_order.c:1246
#11 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=28994) at master/master_create_shards.c:426
#12 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#13 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#14 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#15 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#16 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#17 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#18 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#19 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#20 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#21 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#22 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#23 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#24 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#25 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#26 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#27 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#28 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
---Type <return> to continue, or q <return> to quit---
#29 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#30 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#31 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#32 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#33 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#34 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d2b8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2659, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a7b0) at genam.c:353
#4  0x000000000095174b in RelationBuildTupleDesc (relation=0x7f12f1c5cc70) at relcache.c:527
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=20597, insertIt=1 '\001') at relcache.c:1325
#6  0x000000000095509c in RelationIdGetRelation (relationId=20597) at relcache.c:2107
#7  0x00000000004ba793 in relation_open (relationId=20597, lockmode=1) at heapam.c:1125
#8  0x00000000004ba9e7 in heap_open (relationId=20597, lockmode=1) at heapam.c:1288
#9  0x00007f12ea632b10 in BuildShardPlacementList (shardInterval=0x7f12f1c70800) at master/master_metadata_utility.c:748
#10 0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b20648) at utils/metadata_cache.c:1276
#11 0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20648) at utils/metadata_cache.c:1026
#12 0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=28994) at utils/metadata_cache.c:932
#13 0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=28994) at utils/metadata_cache.c:835
#14 0x00007f12ea644336 in PartitionMethod (relationId=28994) at planner/multi_join_order.c:1246
#15 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=28994) at master/master_create_shards.c:426
#16 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#17 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#18 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#19 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#20 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#21 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#22 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#23 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#24 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#25 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#26 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#27 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#28 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#29 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#31 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#32 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#33 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#34 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#35 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#36 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#37 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#38 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d2b8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1cffd78, indexId=2656, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a6f0) at genam.c:353
#4  0x000000000095773d in AttrDefaultFetch (relation=0x7f12f1c5cc70) at relcache.c:4038
#5  0x0000000000951a16 in RelationBuildTupleDesc (relation=0x7f12f1c5cc70) at relcache.c:620
#6  0x0000000000953463 in RelationBuildDesc (targetRelId=20597, insertIt=1 '\001') at relcache.c:1325
#7  0x000000000095509c in RelationIdGetRelation (relationId=20597) at relcache.c:2107
#8  0x00000000004ba793 in relation_open (relationId=20597, lockmode=1) at heapam.c:1125
#9  0x00000000004ba9e7 in heap_open (relationId=20597, lockmode=1) at heapam.c:1288
#10 0x00007f12ea632b10 in BuildShardPlacementList (shardInterval=0x7f12f1c70800) at master/master_metadata_utility.c:748
#11 0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b20648) at utils/metadata_cache.c:1276
#12 0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20648) at utils/metadata_cache.c:1026
#13 0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=28994) at utils/metadata_cache.c:932
#14 0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=28994) at utils/metadata_cache.c:835
#15 0x00007f12ea644336 in PartitionMethod (relationId=28994) at planner/multi_join_order.c:1246
#16 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=28994) at master/master_create_shards.c:426
#17 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#18 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#19 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#20 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#21 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#22 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#23 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#24 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#25 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#26 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#27 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#28 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#29 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
---Type <return> to continue, or q <return> to quit---
#30 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#31 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#32 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#33 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#34 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#35 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#36 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#37 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#38 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#39 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d2b8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d023d8, indexId=2701, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a7c0) at genam.c:353
#4  0x000000000064bdac in RelationBuildTriggers (relation=0x7f12f1c5cc70) at trigger.c:1716
#5  0x00000000009534b5 in RelationBuildDesc (targetRelId=20597, insertIt=1 '\001') at relcache.c:1339
#6  0x000000000095509c in RelationIdGetRelation (relationId=20597) at relcache.c:2107
#7  0x00000000004ba793 in relation_open (relationId=20597, lockmode=1) at heapam.c:1125
#8  0x00000000004ba9e7 in heap_open (relationId=20597, lockmode=1) at heapam.c:1288
#9  0x00007f12ea632b10 in BuildShardPlacementList (shardInterval=0x7f12f1c70800) at master/master_metadata_utility.c:748
#10 0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b20648) at utils/metadata_cache.c:1276
#11 0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20648) at utils/metadata_cache.c:1026
#12 0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=28994) at utils/metadata_cache.c:932
#13 0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=28994) at utils/metadata_cache.c:835
#14 0x00007f12ea644336 in PartitionMethod (relationId=28994) at planner/multi_join_order.c:1246
#15 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=28994) at master/master_create_shards.c:426
#16 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#17 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#18 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#19 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#20 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#21 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#22 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#23 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#24 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#25 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#26 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#27 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#28 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#29 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#31 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#32 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#33 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#34 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#35 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#36 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#37 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#38 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d2b8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2659, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a750) at genam.c:353
#4  0x000000000095174b in RelationBuildTupleDesc (relation=0x7f12f1c58b58) at relcache.c:527
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=20602, insertIt=1 '\001') at relcache.c:1325
#6  0x000000000095509c in RelationIdGetRelation (relationId=20602) at relcache.c:2107
#7  0x00000000004ba793 in relation_open (relationId=20602, lockmode=1) at heapam.c:1125
#8  0x00000000004d1fb2 in index_open (relationId=20602, lockmode=1) at indexam.c:155
#9  0x00000000004d18b9 in systable_beginscan (heapRelation=0x7f12f1c5cc70, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:340
#10 0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c70800) at master/master_metadata_utility.c:753
#11 0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b20648) at utils/metadata_cache.c:1276
#12 0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20648) at utils/metadata_cache.c:1026
#13 0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=28994) at utils/metadata_cache.c:932
#14 0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=28994) at utils/metadata_cache.c:835
#15 0x00007f12ea644336 in PartitionMethod (relationId=28994) at planner/multi_join_order.c:1246
#16 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=28994) at master/master_create_shards.c:426
#17 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#18 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#19 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#20 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#21 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#22 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#23 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#24 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#25 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#26 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#27 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#28 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#29 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
---Type <return> to continue, or q <return> to quit---
#30 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#31 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#32 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#33 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#34 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#35 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#36 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#37 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#38 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#39 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d2b8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c5cc70, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c70800) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b20648) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20648) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=28994) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=28994) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=28994) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=28994) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d2b8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c5cc70, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c64a10) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b20648) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20648) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=28994) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=28994) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=28994) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=28994) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d2b8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c5cc70, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c61560) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b20648) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20648) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=28994) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=28994) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=28994) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=28994) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d2b8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c5cc70, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c64d30) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b20648) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b20648) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=28994) at utils/metadata_cache.c:932
#8  0x00007f12ea67dd72 in DistributedTableCacheEntry (distributedRelationId=28994) at utils/metadata_cache.c:835
#9  0x00007f12ea644336 in PartitionMethod (relationId=28994) at planner/multi_join_order.c:1246
#10 0x00007f12ea63085d in CheckHashPartitionedTable (distributedTableId=28994) at master/master_create_shards.c:426
#11 0x00007f12ea6303f9 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:267
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d2b8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a78398, indexId=2678, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144aae0) at genam.c:353
#4  0x0000000000958e9f in RelationGetIndexList (relation=0x7f12f1c57348) at relcache.c:4383
#5  0x0000000000676d65 in ExecOpenIndices (resultRelInfo=0x2b4fdd0, speculative=0 '\000') at execIndexing.c:168
#6  0x000000000053b61d in CatalogOpenIndexes (heapRel=0x7f12f1c57348) at indexing.c:49
#7  0x000000000053b801 in CatalogTupleInsert (heapRel=0x7f12f1c57348, tup=0x2b9f2b8) at indexing.c:167
#8  0x00007f12ea632f64 in InsertShardRow (relationId=37208, shardId=102182, storageType=116 't', shardMinValue=0x2b52970, shardMaxValue=0x2b53250) at master/master_metadata_utility.c:906
#9  0x00007f12ea630580 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:312
#10 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#11 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#12 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#13 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#14 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#15 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#16 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#17 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#18 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#19 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#20 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#21 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#22 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#23 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#24 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#25 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#26 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#27 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#28 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
---Type <return> to continue, or q <return> to quit---
#29 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#30 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#31 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d2b8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2659, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a9c0) at genam.c:353
#4  0x000000000095174b in RelationBuildTupleDesc (relation=0x7f12f1c58e78) at relcache.c:527
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=20386, insertIt=1 '\001') at relcache.c:1325
#6  0x000000000095509c in RelationIdGetRelation (relationId=20386) at relcache.c:2107
#7  0x00000000004ba793 in relation_open (relationId=20386, lockmode=3) at heapam.c:1125
#8  0x00000000004d1fb2 in index_open (relationId=20386, lockmode=3) at indexam.c:155
#9  0x0000000000676e03 in ExecOpenIndices (resultRelInfo=0x2b4fdd0, speculative=0 '\000') at execIndexing.c:197
#10 0x000000000053b61d in CatalogOpenIndexes (heapRel=0x7f12f1c57348) at indexing.c:49
#11 0x000000000053b801 in CatalogTupleInsert (heapRel=0x7f12f1c57348, tup=0x2b9f2b8) at indexing.c:167
#12 0x00007f12ea632f64 in InsertShardRow (relationId=37208, shardId=102182, storageType=116 't', shardMinValue=0x2b52970, shardMaxValue=0x2b53250) at master/master_metadata_utility.c:906
#13 0x00007f12ea630580 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:312
#14 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#15 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#16 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#17 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#18 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#19 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#20 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#21 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#22 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#23 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#24 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#25 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#26 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#27 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#28 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
---Type <return> to continue, or q <return> to quit---
#29 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#30 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#31 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#32 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#33 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#34 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#35 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d2b8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d2b8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d348) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d348) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2659, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a7b0) at genam.c:353
#4  0x000000000095174b in RelationBuildTupleDesc (relation=0x7f12f1c538c0) at relcache.c:527
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=37208, insertIt=0 '\000') at relcache.c:1325
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c58138, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c58138) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37208) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2a9ce28) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2a9c528, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea632f73 in InsertShardRow (relationId=37208, shardId=102182, storageType=116 't', shardMinValue=0x2b52970, shardMaxValue=0x2b53250) at master/master_metadata_utility.c:911
#15 0x00007f12ea630580 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:312
#16 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#17 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#18 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#19 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#20 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#21 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#22 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#23 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#24 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#25 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#26 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#27 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#28 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#29 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#31 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#32 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#33 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#34 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#35 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#36 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#37 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d348, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d348) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d348) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d348) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d023d8, indexId=2701, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a7c0) at genam.c:353
#4  0x000000000064bdac in RelationBuildTriggers (relation=0x7f12f1c538c0) at trigger.c:1716
#5  0x00000000009534b5 in RelationBuildDesc (targetRelId=37208, insertIt=0 '\000') at relcache.c:1339
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c58138, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c58138) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37208) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2a9ce28) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2a9c528, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea632f73 in InsertShardRow (relationId=37208, shardId=102182, storageType=116 't', shardMinValue=0x2b52970, shardMaxValue=0x2b53250) at master/master_metadata_utility.c:911
#15 0x00007f12ea630580 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:312
#16 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#17 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#18 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#19 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#20 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#21 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#22 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#23 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#24 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#25 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#26 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#27 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#28 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#29 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#31 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#32 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#33 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#34 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#35 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#36 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#37 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d348, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d348) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d348) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d348) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a78398, indexId=2678, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144aaf0) at genam.c:353
#4  0x0000000000958e9f in RelationGetIndexList (relation=0x7f12f1c5cc70) at relcache.c:4383
#5  0x0000000000676d65 in ExecOpenIndices (resultRelInfo=0x2b51d80, speculative=0 '\000') at execIndexing.c:168
#6  0x000000000053b61d in CatalogOpenIndexes (heapRel=0x7f12f1c5cc70) at indexing.c:49
#7  0x000000000053b801 in CatalogTupleInsert (heapRel=0x7f12f1c5cc70, tup=0x2b9f398) at indexing.c:167
#8  0x00007f12ea63307a in InsertShardPlacementRow (shardId=102182, placementId=176, shardState=1 '\001', shardLength=0, groupId=4) at master/master_metadata_utility.c:953
#9  0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#10 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#11 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#12 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#13 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#14 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#15 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#16 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#17 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#18 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#19 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#20 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#21 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#22 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#23 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#24 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#25 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#26 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#27 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#28 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
---Type <return> to continue, or q <return> to quit---
#29 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#30 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#31 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d348, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d348) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d348) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d348) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2659, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a9d0) at genam.c:353
#4  0x000000000095174b in RelationBuildTupleDesc (relation=0x7f12f1c538c0) at relcache.c:527
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=20601, insertIt=1 '\001') at relcache.c:1325
#6  0x000000000095509c in RelationIdGetRelation (relationId=20601) at relcache.c:2107
#7  0x00000000004ba793 in relation_open (relationId=20601, lockmode=3) at heapam.c:1125
#8  0x00000000004d1fb2 in index_open (relationId=20601, lockmode=3) at indexam.c:155
#9  0x0000000000676e03 in ExecOpenIndices (resultRelInfo=0x2b51d80, speculative=0 '\000') at execIndexing.c:197
#10 0x000000000053b61d in CatalogOpenIndexes (heapRel=0x7f12f1c5cc70) at indexing.c:49
#11 0x000000000053b801 in CatalogTupleInsert (heapRel=0x7f12f1c5cc70, tup=0x2b9f398) at indexing.c:167
#12 0x00007f12ea63307a in InsertShardPlacementRow (shardId=102182, placementId=176, shardState=1 '\001', shardLength=0, groupId=4) at master/master_metadata_utility.c:953
#13 0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#14 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#15 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#16 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#17 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#18 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#19 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#20 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#21 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#22 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#23 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#24 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#25 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#26 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#27 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#28 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
---Type <return> to continue, or q <return> to quit---
#29 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#30 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#31 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#32 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#33 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#34 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#35 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d348, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d348) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d348) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d348) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2659, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a9d0) at genam.c:353
#4  0x000000000095174b in RelationBuildTupleDesc (relation=0x7f12f1c542a0) at relcache.c:527
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=20603, insertIt=1 '\001') at relcache.c:1325
#6  0x000000000095509c in RelationIdGetRelation (relationId=20603) at relcache.c:2107
#7  0x00000000004ba793 in relation_open (relationId=20603, lockmode=3) at heapam.c:1125
#8  0x00000000004d1fb2 in index_open (relationId=20603, lockmode=3) at indexam.c:155
#9  0x0000000000676e03 in ExecOpenIndices (resultRelInfo=0x2b51d80, speculative=0 '\000') at execIndexing.c:197
#10 0x000000000053b61d in CatalogOpenIndexes (heapRel=0x7f12f1c5cc70) at indexing.c:49
#11 0x000000000053b801 in CatalogTupleInsert (heapRel=0x7f12f1c5cc70, tup=0x2b9f398) at indexing.c:167
#12 0x00007f12ea63307a in InsertShardPlacementRow (shardId=102182, placementId=176, shardState=1 '\001', shardLength=0, groupId=4) at master/master_metadata_utility.c:953
#13 0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#14 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#15 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#16 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#17 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#18 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#19 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#20 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#21 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#22 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#23 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#24 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#25 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#26 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#27 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#28 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
---Type <return> to continue, or q <return> to quit---
#29 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#30 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#31 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#32 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#33 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#34 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#35 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d348, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d348) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c57348, indexId=20386, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144ac00) at genam.c:353
#4  0x00007f12ea682941 in CitusInvalidateRelcacheByShardId (shardId=102182) at utils/metadata_cache.c:3846
#5  0x00007f12ea633086 in InsertShardPlacementRow (shardId=102182, placementId=176, shardState=1 '\001', shardLength=0, groupId=4) at master/master_metadata_utility.c:955
#6  0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#7  0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#8  0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#9  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#10 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#11 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#12 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#13 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#14 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#15 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#16 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#17 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#18 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#19 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#20 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#21 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#22 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#23 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#24 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#25 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#26 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#27 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#28 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d468) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d468, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d468) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d468) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2a9d468, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2a9d468) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2b9fd40) at genam.c:510
#4  0x000000000094bf29 in SearchCatCache (cache=0x2a69308, v1=37208, v2=0, v3=0, v4=0) at catcache.c:1190
#5  0x000000000095e65e in SearchSysCache (cacheId=50, key1=37208, key2=0, key3=0, key4=0) at syscache.c:1109
#6  0x00007f12ea682890 in CitusInvalidateRelcacheByRelid (relationId=37208) at utils/metadata_cache.c:3812
#7  0x00007f12ea682987 in CitusInvalidateRelcacheByShardId (shardId=102182) at utils/metadata_cache.c:3854
#8  0x00007f12ea633086 in InsertShardPlacementRow (shardId=102182, placementId=176, shardState=1 '\001', shardLength=0, groupId=4) at master/master_metadata_utility.c:955
#9  0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#10 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#11 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#12 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#13 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#14 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#15 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#16 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#17 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#18 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#19 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#20 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#21 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#22 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#23 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#24 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#25 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#26 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#27 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#28 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
---Type <return> to continue, or q <return> to quit---
#29 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#30 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#31 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d3d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2659, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a730) at genam.c:353
#4  0x000000000095174b in RelationBuildTupleDesc (relation=0x7f12f1c55890) at relcache.c:527
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=37208, insertIt=0 '\000') at relcache.c:1325
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c58138, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c58138) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37208) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2a9d508) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2a9c528, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea6829f6 in CitusInvalidateRelcacheByShardId (shardId=102182) at utils/metadata_cache.c:3879
#15 0x00007f12ea633086 in InsertShardPlacementRow (shardId=102182, placementId=176, shardState=1 '\001', shardLength=0, groupId=4) at master/master_metadata_utility.c:955
#16 0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#17 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#18 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#19 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#20 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#21 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#22 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#23 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#24 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#25 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#26 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#27 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#28 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#29 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#31 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#32 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#33 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#34 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#35 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#36 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#37 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#38 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d3d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d023d8, indexId=2701, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a740) at genam.c:353
#4  0x000000000064bdac in RelationBuildTriggers (relation=0x7f12f1c55890) at trigger.c:1716
#5  0x00000000009534b5 in RelationBuildDesc (targetRelId=37208, insertIt=0 '\000') at relcache.c:1339
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c58138, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c58138) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37208) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2a9d508) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2a9c528, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea6829f6 in CitusInvalidateRelcacheByShardId (shardId=102182) at utils/metadata_cache.c:3879
#15 0x00007f12ea633086 in InsertShardPlacementRow (shardId=102182, placementId=176, shardState=1 '\001', shardLength=0, groupId=4) at master/master_metadata_utility.c:955
#16 0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#17 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#18 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#19 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#20 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#21 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#22 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#23 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#24 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#25 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#26 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#27 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#28 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#29 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#31 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#32 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#33 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#34 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#35 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#36 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#37 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#38 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d3d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c57348, indexId=20386, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144abf0) at genam.c:353
#4  0x00007f12ea68231e in LookupShardRelation (shardId=102182, missingOk=0 '\000') at utils/metadata_cache.c:3613
#5  0x00007f12ea67dc72 in LookupShardCacheEntry (shardId=102182) at utils/metadata_cache.c:771
#6  0x00007f12ea67d55d in LoadShardPlacement (shardId=102182, placementId=176) at utils/metadata_cache.c:483
#7  0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#8  0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#9  0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#10 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#11 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#12 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#13 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#14 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#15 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#16 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#17 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#18 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#19 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#20 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#21 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#22 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#23 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#24 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#25 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#26 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#27 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#28 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
---Type <return> to continue, or q <return> to quit---
#29 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d3d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d04bd8, indexId=20453, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144ab20) at genam.c:353
#4  0x00007f12ea6820fa in LookupDistPartitionTuple (pgDistPartition=0x7f12f1d04bd8, relationId=37208) at utils/metadata_cache.c:3534
#5  0x00007f12ea67df91 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:961
#6  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#7  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102182) at utils/metadata_cache.c:774
#8  0x00007f12ea67d55d in LoadShardPlacement (shardId=102182, placementId=176) at utils/metadata_cache.c:483
#9  0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#10 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#11 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#12 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#13 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#14 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#15 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#16 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#17 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#18 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#19 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#20 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#21 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#22 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#23 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#24 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#25 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#26 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#27 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#28 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
---Type <return> to continue, or q <return> to quit---
#29 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#30 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#31 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d3d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c57348, indexId=20454, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9f0) at genam.c:353
#4  0x00007f12ea682203 in LookupDistShardTuples (relationId=37208) at utils/metadata_cache.c:3574
#5  0x00007f12ea67e303 in BuildCachedShardList (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1094
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#8  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102182) at utils/metadata_cache.c:774
#9  0x00007f12ea67d55d in LoadShardPlacement (shardId=102182, placementId=176) at utils/metadata_cache.c:483
#10 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d3d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ac2098, indexId=2686, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a990) at genam.c:353
#4  0x0000000000610d63 in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1427
#5  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#6  0x00007f12ea67e500 in BuildCachedShardList (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1146
#7  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1026
#8  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#9  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102182) at utils/metadata_cache.c:774
#10 0x00007f12ea67d55d in LoadShardPlacement (shardId=102182, placementId=176) at utils/metadata_cache.c:483
#11 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d3d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ac2098, indexId=2686, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a990) at genam.c:353
#4  0x0000000000610d63 in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1427
#5  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#6  0x00007f12ea67e557 in BuildCachedShardList (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1161
#7  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1026
#8  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#9  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102182) at utils/metadata_cache.c:774
#10 0x00007f12ea67d55d in LoadShardPlacement (shardId=102182, placementId=176) at utils/metadata_cache.c:483
#11 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d3d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c5cc70, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9c0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c591e0) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#8  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102182) at utils/metadata_cache.c:774
#9  0x00007f12ea67d55d in LoadShardPlacement (shardId=102182, placementId=176) at utils/metadata_cache.c:483
#10 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d3d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2659, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a7b0) at genam.c:353
#4  0x000000000095174b in RelationBuildTupleDesc (relation=0x7f12f1c55890) at relcache.c:527
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=37208, insertIt=0 '\000') at relcache.c:1325
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c58138, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c58138) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37208) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2c4b8d8) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2a9c528, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea632f73 in InsertShardRow (relationId=37208, shardId=102183, storageType=116 't', shardMinValue=0x2ba0020, shardMaxValue=0x2b9f678) at master/master_metadata_utility.c:911
#15 0x00007f12ea630580 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:312
#16 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#17 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#18 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#19 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#20 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#21 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#22 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#23 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#24 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#25 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#26 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#27 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#28 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#29 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#31 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#32 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#33 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#34 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#35 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#36 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#37 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d023d8, indexId=2701, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a7c0) at genam.c:353
#4  0x000000000064bdac in RelationBuildTriggers (relation=0x7f12f1c55890) at trigger.c:1716
#5  0x00000000009534b5 in RelationBuildDesc (targetRelId=37208, insertIt=0 '\000') at relcache.c:1339
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c58138, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c58138) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37208) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2c4b8d8) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2a9c528, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea632f73 in InsertShardRow (relationId=37208, shardId=102183, storageType=116 't', shardMinValue=0x2ba0020, shardMaxValue=0x2b9f678) at master/master_metadata_utility.c:911
#15 0x00007f12ea630580 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:312
#16 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#17 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#18 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#19 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#20 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#21 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#22 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#23 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#24 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#25 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#26 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#27 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#28 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#29 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#31 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#32 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#33 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#34 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#35 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#36 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#37 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c57348, indexId=20386, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144ac00) at genam.c:353
#4  0x00007f12ea682941 in CitusInvalidateRelcacheByShardId (shardId=102183) at utils/metadata_cache.c:3846
#5  0x00007f12ea633086 in InsertShardPlacementRow (shardId=102183, placementId=177, shardState=1 '\001', shardLength=0, groupId=5) at master/master_metadata_utility.c:955
#6  0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#7  0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#8  0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#9  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#10 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#11 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#12 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#13 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#14 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#15 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#16 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#17 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#18 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#19 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#20 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#21 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#22 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#23 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#24 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#25 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#26 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#27 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#28 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2659, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a730) at genam.c:353
#4  0x000000000095174b in RelationBuildTupleDesc (relation=0x7f12f1c55890) at relcache.c:527
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=37208, insertIt=0 '\000') at relcache.c:1325
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c58138, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c58138) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37208) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2c4bce8) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2a9c528, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea6829f6 in CitusInvalidateRelcacheByShardId (shardId=102183) at utils/metadata_cache.c:3879
#15 0x00007f12ea633086 in InsertShardPlacementRow (shardId=102183, placementId=177, shardState=1 '\001', shardLength=0, groupId=5) at master/master_metadata_utility.c:955
#16 0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#17 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#18 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#19 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#20 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#21 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#22 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#23 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#24 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#25 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#26 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#27 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#28 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#29 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#31 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#32 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#33 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#34 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#35 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#36 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#37 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#38 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d023d8, indexId=2701, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a740) at genam.c:353
#4  0x000000000064bdac in RelationBuildTriggers (relation=0x7f12f1c55890) at trigger.c:1716
#5  0x00000000009534b5 in RelationBuildDesc (targetRelId=37208, insertIt=0 '\000') at relcache.c:1339
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c58138, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c58138) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37208) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2c4bce8) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2a9c528, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea6829f6 in CitusInvalidateRelcacheByShardId (shardId=102183) at utils/metadata_cache.c:3879
#15 0x00007f12ea633086 in InsertShardPlacementRow (shardId=102183, placementId=177, shardState=1 '\001', shardLength=0, groupId=5) at master/master_metadata_utility.c:955
#16 0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#17 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#18 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#19 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#20 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#21 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#22 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#23 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#24 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#25 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#26 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#27 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#28 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#29 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#31 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#32 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#33 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#34 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#35 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#36 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#37 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#38 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c57348, indexId=20386, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144abf0) at genam.c:353
#4  0x00007f12ea68231e in LookupShardRelation (shardId=102183, missingOk=0 '\000') at utils/metadata_cache.c:3613
#5  0x00007f12ea67dc72 in LookupShardCacheEntry (shardId=102183) at utils/metadata_cache.c:771
#6  0x00007f12ea67d55d in LoadShardPlacement (shardId=102183, placementId=177) at utils/metadata_cache.c:483
#7  0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#8  0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#9  0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#10 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#11 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#12 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#13 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#14 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#15 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#16 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#17 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#18 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#19 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#20 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#21 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#22 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#23 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#24 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#25 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#26 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#27 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#28 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
---Type <return> to continue, or q <return> to quit---
#29 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d04bd8, indexId=20453, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144ab20) at genam.c:353
#4  0x00007f12ea6820fa in LookupDistPartitionTuple (pgDistPartition=0x7f12f1d04bd8, relationId=37208) at utils/metadata_cache.c:3534
#5  0x00007f12ea67df91 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:961
#6  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#7  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102183) at utils/metadata_cache.c:774
#8  0x00007f12ea67d55d in LoadShardPlacement (shardId=102183, placementId=177) at utils/metadata_cache.c:483
#9  0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#10 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#11 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#12 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#13 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#14 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#15 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#16 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#17 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#18 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#19 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#20 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#21 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#22 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#23 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#24 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#25 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#26 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#27 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#28 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
---Type <return> to continue, or q <return> to quit---
#29 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#30 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#31 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c57348, indexId=20454, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9f0) at genam.c:353
#4  0x00007f12ea682203 in LookupDistShardTuples (relationId=37208) at utils/metadata_cache.c:3574
#5  0x00007f12ea67e303 in BuildCachedShardList (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1094
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#8  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102183) at utils/metadata_cache.c:774
#9  0x00007f12ea67d55d in LoadShardPlacement (shardId=102183, placementId=177) at utils/metadata_cache.c:483
#10 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ac2098, indexId=2686, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a990) at genam.c:353
#4  0x0000000000610d63 in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1427
#5  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#6  0x00007f12ea67e500 in BuildCachedShardList (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1146
#7  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1026
#8  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#9  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102183) at utils/metadata_cache.c:774
#10 0x00007f12ea67d55d in LoadShardPlacement (shardId=102183, placementId=177) at utils/metadata_cache.c:483
#11 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ac2098, indexId=2686, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a990) at genam.c:353
#4  0x0000000000610d63 in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1427
#5  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#6  0x00007f12ea67e557 in BuildCachedShardList (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1161
#7  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1026
#8  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#9  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102183) at utils/metadata_cache.c:774
#10 0x00007f12ea67d55d in LoadShardPlacement (shardId=102183, placementId=177) at utils/metadata_cache.c:483
#11 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c5cc70, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9c0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c70dd0) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#8  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102183) at utils/metadata_cache.c:774
#9  0x00007f12ea67d55d in LoadShardPlacement (shardId=102183, placementId=177) at utils/metadata_cache.c:483
#10 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c5cc70, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9c0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c58818) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#8  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102183) at utils/metadata_cache.c:774
#9  0x00007f12ea67d55d in LoadShardPlacement (shardId=102183, placementId=177) at utils/metadata_cache.c:483
#10 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2659, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a7b0) at genam.c:353
#4  0x000000000095174b in RelationBuildTupleDesc (relation=0x7f12f1c55890) at relcache.c:527
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=37208, insertIt=0 '\000') at relcache.c:1325
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c58138, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c58138) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37208) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2c4c0f8) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2a9c528, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea632f73 in InsertShardRow (relationId=37208, shardId=102184, storageType=116 't', shardMinValue=0x2ba1c98, shardMaxValue=0x2ba1778) at master/master_metadata_utility.c:911
#15 0x00007f12ea630580 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:312
#16 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#17 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#18 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#19 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#20 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#21 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#22 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#23 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#24 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#25 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#26 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#27 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#28 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#29 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#31 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#32 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#33 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#34 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#35 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#36 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#37 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d023d8, indexId=2701, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a7c0) at genam.c:353
#4  0x000000000064bdac in RelationBuildTriggers (relation=0x7f12f1c55890) at trigger.c:1716
#5  0x00000000009534b5 in RelationBuildDesc (targetRelId=37208, insertIt=0 '\000') at relcache.c:1339
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c58138, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c58138) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37208) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2c4c0f8) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2a9c528, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea632f73 in InsertShardRow (relationId=37208, shardId=102184, storageType=116 't', shardMinValue=0x2ba1c98, shardMaxValue=0x2ba1778) at master/master_metadata_utility.c:911
#15 0x00007f12ea630580 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:312
#16 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#17 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#18 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#19 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#20 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#21 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#22 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#23 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#24 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#25 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#26 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#27 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#28 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#29 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#31 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#32 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#33 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#34 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#35 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#36 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#37 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c57348, indexId=20386, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144ac00) at genam.c:353
#4  0x00007f12ea682941 in CitusInvalidateRelcacheByShardId (shardId=102184) at utils/metadata_cache.c:3846
#5  0x00007f12ea633086 in InsertShardPlacementRow (shardId=102184, placementId=178, shardState=1 '\001', shardLength=0, groupId=4) at master/master_metadata_utility.c:955
#6  0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#7  0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#8  0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#9  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#10 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#11 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#12 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#13 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#14 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#15 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#16 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#17 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#18 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#19 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#20 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#21 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#22 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#23 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#24 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#25 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#26 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#27 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#28 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2659, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a730) at genam.c:353
#4  0x000000000095174b in RelationBuildTupleDesc (relation=0x7f12f1c55890) at relcache.c:527
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=37208, insertIt=0 '\000') at relcache.c:1325
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c58138, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c58138) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37208) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2c4c508) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2a9c528, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea6829f6 in CitusInvalidateRelcacheByShardId (shardId=102184) at utils/metadata_cache.c:3879
#15 0x00007f12ea633086 in InsertShardPlacementRow (shardId=102184, placementId=178, shardState=1 '\001', shardLength=0, groupId=4) at master/master_metadata_utility.c:955
#16 0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#17 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#18 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#19 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#20 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#21 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#22 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#23 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#24 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#25 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#26 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#27 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#28 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#29 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#31 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#32 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#33 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#34 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#35 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#36 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#37 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#38 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d023d8, indexId=2701, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a740) at genam.c:353
#4  0x000000000064bdac in RelationBuildTriggers (relation=0x7f12f1c55890) at trigger.c:1716
#5  0x00000000009534b5 in RelationBuildDesc (targetRelId=37208, insertIt=0 '\000') at relcache.c:1339
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c58138, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c58138) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37208) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2c4c508) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2a9c528, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea6829f6 in CitusInvalidateRelcacheByShardId (shardId=102184) at utils/metadata_cache.c:3879
#15 0x00007f12ea633086 in InsertShardPlacementRow (shardId=102184, placementId=178, shardState=1 '\001', shardLength=0, groupId=4) at master/master_metadata_utility.c:955
#16 0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#17 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#18 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#19 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#20 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#21 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#22 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#23 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#24 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#25 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#26 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#27 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#28 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#29 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#31 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#32 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#33 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#34 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#35 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#36 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#37 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#38 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c57348, indexId=20386, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144abf0) at genam.c:353
#4  0x00007f12ea68231e in LookupShardRelation (shardId=102184, missingOk=0 '\000') at utils/metadata_cache.c:3613
#5  0x00007f12ea67dc72 in LookupShardCacheEntry (shardId=102184) at utils/metadata_cache.c:771
#6  0x00007f12ea67d55d in LoadShardPlacement (shardId=102184, placementId=178) at utils/metadata_cache.c:483
#7  0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#8  0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#9  0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#10 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#11 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#12 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#13 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#14 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#15 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#16 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#17 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#18 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#19 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#20 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#21 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#22 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#23 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#24 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#25 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#26 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#27 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#28 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
---Type <return> to continue, or q <return> to quit---
#29 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d04bd8, indexId=20453, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144ab20) at genam.c:353
#4  0x00007f12ea6820fa in LookupDistPartitionTuple (pgDistPartition=0x7f12f1d04bd8, relationId=37208) at utils/metadata_cache.c:3534
#5  0x00007f12ea67df91 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:961
#6  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#7  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102184) at utils/metadata_cache.c:774
#8  0x00007f12ea67d55d in LoadShardPlacement (shardId=102184, placementId=178) at utils/metadata_cache.c:483
#9  0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#10 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#11 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#12 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#13 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#14 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#15 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#16 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#17 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#18 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#19 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#20 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#21 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#22 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#23 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#24 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#25 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#26 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#27 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#28 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
---Type <return> to continue, or q <return> to quit---
#29 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#30 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#31 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c57348, indexId=20454, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9f0) at genam.c:353
#4  0x00007f12ea682203 in LookupDistShardTuples (relationId=37208) at utils/metadata_cache.c:3574
#5  0x00007f12ea67e303 in BuildCachedShardList (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1094
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#8  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102184) at utils/metadata_cache.c:774
#9  0x00007f12ea67d55d in LoadShardPlacement (shardId=102184, placementId=178) at utils/metadata_cache.c:483
#10 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ac2098, indexId=2686, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a990) at genam.c:353
#4  0x0000000000610d63 in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1427
#5  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#6  0x00007f12ea67e500 in BuildCachedShardList (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1146
#7  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1026
#8  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#9  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102184) at utils/metadata_cache.c:774
#10 0x00007f12ea67d55d in LoadShardPlacement (shardId=102184, placementId=178) at utils/metadata_cache.c:483
#11 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ac2098, indexId=2686, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a990) at genam.c:353
#4  0x0000000000610d63 in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1427
#5  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#6  0x00007f12ea67e557 in BuildCachedShardList (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1161
#7  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1026
#8  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#9  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102184) at utils/metadata_cache.c:774
#10 0x00007f12ea67d55d in LoadShardPlacement (shardId=102184, placementId=178) at utils/metadata_cache.c:483
#11 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c5cc70, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9c0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c714f0) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#8  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102184) at utils/metadata_cache.c:774
#9  0x00007f12ea67d55d in LoadShardPlacement (shardId=102184, placementId=178) at utils/metadata_cache.c:483
#10 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c5cc70, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9c0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c591e0) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#8  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102184) at utils/metadata_cache.c:774
#9  0x00007f12ea67d55d in LoadShardPlacement (shardId=102184, placementId=178) at utils/metadata_cache.c:483
#10 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c5cc70, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9c0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c70dd0) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#8  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102184) at utils/metadata_cache.c:774
#9  0x00007f12ea67d55d in LoadShardPlacement (shardId=102184, placementId=178) at utils/metadata_cache.c:483
#10 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2659, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a7b0) at genam.c:353
#4  0x000000000095174b in RelationBuildTupleDesc (relation=0x7f12f1c55890) at relcache.c:527
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=37208, insertIt=0 '\000') at relcache.c:1325
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c58138, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c58138) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37208) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2c4c918) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2a9c528, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea632f73 in InsertShardRow (relationId=37208, shardId=102185, storageType=116 't', shardMinValue=0x2ba3100, shardMaxValue=0x2ba3a30) at master/master_metadata_utility.c:911
#15 0x00007f12ea630580 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:312
#16 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#17 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#18 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#19 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#20 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#21 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#22 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#23 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#24 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#25 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#26 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#27 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#28 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#29 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#31 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#32 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#33 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#34 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#35 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#36 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#37 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d023d8, indexId=2701, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a7c0) at genam.c:353
#4  0x000000000064bdac in RelationBuildTriggers (relation=0x7f12f1c55890) at trigger.c:1716
#5  0x00000000009534b5 in RelationBuildDesc (targetRelId=37208, insertIt=0 '\000') at relcache.c:1339
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c58138, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c58138) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37208) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2c4c918) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2a9c528, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea632f73 in InsertShardRow (relationId=37208, shardId=102185, storageType=116 't', shardMinValue=0x2ba3100, shardMaxValue=0x2ba3a30) at master/master_metadata_utility.c:911
#15 0x00007f12ea630580 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:312
#16 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#17 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#18 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#19 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#20 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#21 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#22 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#23 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#24 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#25 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#26 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#27 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#28 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#29 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#31 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#32 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#33 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#34 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#35 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#36 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#37 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c57348, indexId=20386, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144ac00) at genam.c:353
#4  0x00007f12ea682941 in CitusInvalidateRelcacheByShardId (shardId=102185) at utils/metadata_cache.c:3846
#5  0x00007f12ea633086 in InsertShardPlacementRow (shardId=102185, placementId=179, shardState=1 '\001', shardLength=0, groupId=5) at master/master_metadata_utility.c:955
#6  0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#7  0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#8  0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#9  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#10 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#11 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#12 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#13 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#14 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#15 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#16 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#17 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#18 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#19 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#20 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#21 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#22 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#23 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#24 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#25 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#26 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#27 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#28 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2659, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a730) at genam.c:353
#4  0x000000000095174b in RelationBuildTupleDesc (relation=0x7f12f1c55890) at relcache.c:527
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=37208, insertIt=0 '\000') at relcache.c:1325
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c58138, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c58138) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37208) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2c4cd28) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2a9c528, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea6829f6 in CitusInvalidateRelcacheByShardId (shardId=102185) at utils/metadata_cache.c:3879
#15 0x00007f12ea633086 in InsertShardPlacementRow (shardId=102185, placementId=179, shardState=1 '\001', shardLength=0, groupId=5) at master/master_metadata_utility.c:955
#16 0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#17 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#18 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#19 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#20 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#21 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#22 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#23 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#24 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#25 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#26 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#27 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#28 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#29 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#31 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#32 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#33 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#34 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#35 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#36 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#37 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#38 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d023d8, indexId=2701, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a740) at genam.c:353
#4  0x000000000064bdac in RelationBuildTriggers (relation=0x7f12f1c55890) at trigger.c:1716
#5  0x00000000009534b5 in RelationBuildDesc (targetRelId=37208, insertIt=0 '\000') at relcache.c:1339
#6  0x00000000009558b1 in RelationClearRelation (relation=0x7f12f1c58138, rebuild=1 '\001') at relcache.c:2535
#7  0x0000000000955db5 in RelationFlushRelation (relation=0x7f12f1c58138) at relcache.c:2673
#8  0x0000000000955ec2 in RelationCacheInvalidateEntry (relationId=37208) at relcache.c:2725
#9  0x000000000094e184 in LocalExecuteInvalidationMessage (msg=0x2c4cd28) at inval.c:587
#10 0x000000000094dede in ProcessInvalidationMessages (hdr=0x2a9c528, func=0x94e081 <LocalExecuteInvalidationMessage>) at inval.c:458
#11 0x000000000094e8ac in CommandEndInvalidationMessages () at inval.c:1075
#12 0x0000000000509dd1 in AtCCI_LocalCache () at xact.c:1377
#13 0x00000000005098e6 in CommandCounterIncrement () at xact.c:959
#14 0x00007f12ea6829f6 in CitusInvalidateRelcacheByShardId (shardId=102185) at utils/metadata_cache.c:3879
#15 0x00007f12ea633086 in InsertShardPlacementRow (shardId=102185, placementId=179, shardState=1 '\001', shardLength=0, groupId=5) at master/master_metadata_utility.c:955
#16 0x00007f12ea63060b in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:329
#17 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#18 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#19 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#20 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#21 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#22 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#23 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#24 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#25 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#26 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#27 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#28 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#29 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
---Type <return> to continue, or q <return> to quit---
#30 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#31 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#32 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#33 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#34 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#35 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#36 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#37 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#38 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c57348, indexId=20386, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144abf0) at genam.c:353
#4  0x00007f12ea68231e in LookupShardRelation (shardId=102185, missingOk=0 '\000') at utils/metadata_cache.c:3613
#5  0x00007f12ea67dc72 in LookupShardCacheEntry (shardId=102185) at utils/metadata_cache.c:771
#6  0x00007f12ea67d55d in LoadShardPlacement (shardId=102185, placementId=179) at utils/metadata_cache.c:483
#7  0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#8  0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#9  0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#10 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#11 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#12 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#13 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#14 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#15 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#16 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#17 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#18 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#19 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#20 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#21 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#22 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#23 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#24 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#25 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#26 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#27 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#28 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
---Type <return> to continue, or q <return> to quit---
#29 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1d04bd8, indexId=20453, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144ab20) at genam.c:353
#4  0x00007f12ea6820fa in LookupDistPartitionTuple (pgDistPartition=0x7f12f1d04bd8, relationId=37208) at utils/metadata_cache.c:3534
#5  0x00007f12ea67df91 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:961
#6  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#7  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102185) at utils/metadata_cache.c:774
#8  0x00007f12ea67d55d in LoadShardPlacement (shardId=102185, placementId=179) at utils/metadata_cache.c:483
#9  0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#10 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#11 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#12 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#13 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#14 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#15 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#16 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#17 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#18 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#19 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#20 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#21 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#22 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#23 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#24 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#25 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#26 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#27 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#28 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
---Type <return> to continue, or q <return> to quit---
#29 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#30 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#31 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c57348, indexId=20454, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9f0) at genam.c:353
#4  0x00007f12ea682203 in LookupDistShardTuples (relationId=37208) at utils/metadata_cache.c:3574
#5  0x00007f12ea67e303 in BuildCachedShardList (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1094
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#8  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102185) at utils/metadata_cache.c:774
#9  0x00007f12ea67d55d in LoadShardPlacement (shardId=102185, placementId=179) at utils/metadata_cache.c:483
#10 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ac2098, indexId=2686, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a990) at genam.c:353
#4  0x0000000000610d63 in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1427
#5  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#6  0x00007f12ea67e500 in BuildCachedShardList (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1146
#7  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1026
#8  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#9  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102185) at utils/metadata_cache.c:774
#10 0x00007f12ea67d55d in LoadShardPlacement (shardId=102185, placementId=179) at utils/metadata_cache.c:483
#11 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2ac2098, indexId=2686, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a990) at genam.c:353
#4  0x0000000000610d63 in GetDefaultOpClass (type_id=23, am_id=403) at indexcmds.c:1427
#5  0x00007f12ea69f748 in GetFunctionInfo (typeId=23, accessMethodId=403, procedureId=1) at worker/worker_partition_protocol.c:297
#6  0x00007f12ea67e557 in BuildCachedShardList (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1161
#7  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1026
#8  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#9  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102185) at utils/metadata_cache.c:774
#10 0x00007f12ea67d55d in LoadShardPlacement (shardId=102185, placementId=179) at utils/metadata_cache.c:483
#11 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#12 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#13 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#14 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#15 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#16 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#17 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#18 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#19 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#20 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#21 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#22 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#23 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#24 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#25 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#26 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#27 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#28 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#30 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#31 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#32 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#33 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c5cc70, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9c0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c71ba0) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#8  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102185) at utils/metadata_cache.c:774
#9  0x00007f12ea67d55d in LoadShardPlacement (shardId=102185, placementId=179) at utils/metadata_cache.c:483
#10 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c5cc70, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9c0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c58818) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#8  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102185) at utils/metadata_cache.c:774
#9  0x00007f12ea67d55d in LoadShardPlacement (shardId=102185, placementId=179) at utils/metadata_cache.c:483
#10 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c5cc70, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9c0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c714f0) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#8  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102185) at utils/metadata_cache.c:774
#9  0x00007f12ea67d55d in LoadShardPlacement (shardId=102185, placementId=179) at utils/metadata_cache.c:483
#10 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c5cc70, indexId=20602, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9c0) at genam.c:353
#4  0x00007f12ea632b67 in BuildShardPlacementList (shardInterval=0x7f12f1c591e0) at master/master_metadata_utility.c:753
#5  0x00007f12ea67e8d0 in BuildCachedShardList (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1276
#6  0x00007f12ea67e103 in BuildDistTableCacheEntry (cacheEntry=0x2b206c8) at utils/metadata_cache.c:1026
#7  0x00007f12ea67defc in LookupDistTableCacheEntry (relationId=37208) at utils/metadata_cache.c:932
#8  0x00007f12ea67dc7f in LookupShardCacheEntry (shardId=102185) at utils/metadata_cache.c:774
#9  0x00007f12ea67d55d in LoadShardPlacement (shardId=102185, placementId=179) at utils/metadata_cache.c:483
#10 0x00007f12ea630628 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:332
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
---Type <return> to continue, or q <return> to quit---
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c4adf0, indexId=0, indexOK=0 '\000', snapshot=0x0, nkeys=1, key=0x7ffe4144a9a0) at genam.c:353
#4  0x00007f12ea6830c3 in IsChildTable (relationId=37208) at utils/multi_partitioning_utils.c:151
#5  0x00007f12ea677958 in EnsureRelationKindSupported (relationId=37208) at utils/citus_ruleutils.c:479
#6  0x00007f12ea6773b7 in pg_get_tableschemadef_string (tableRelationId=37208, includeSequenceDefaults=0 '\000') at utils/citus_ruleutils.c:274
#7  0x00007f12ea635656 in GetTableCreationCommands (relationId=37208, includeSequenceDefaults=0 '\000') at master/master_node_protocol.c:659
#8  0x00007f12ea63543a in GetTableDDLEvents (relationId=37208, includeSequenceDefaults=0 '\000') at master/master_node_protocol.c:561
#9  0x00007f12ea637b74 in CreateShardsOnWorkers (distributedRelationId=37208, shardPlacements=0x2b9ff60, useExclusiveConnection=1 '\001', colocatedShard=1 '\001')
    at master/master_stage_protocol.c:490
#10 0x00007f12ea630693 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:337
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c4adf0, indexId=2187, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9b0) at genam.c:353
#4  0x00007f12ea6831c3 in IsParentTable (relationId=37208) at utils/multi_partitioning_utils.c:197
#5  0x00007f12ea677966 in EnsureRelationKindSupported (relationId=37208) at utils/citus_ruleutils.c:480
#6  0x00007f12ea6773b7 in pg_get_tableschemadef_string (tableRelationId=37208, includeSequenceDefaults=0 '\000') at utils/citus_ruleutils.c:274
#7  0x00007f12ea635656 in GetTableCreationCommands (relationId=37208, includeSequenceDefaults=0 '\000') at master/master_node_protocol.c:659
#8  0x00007f12ea63543a in GetTableDDLEvents (relationId=37208, includeSequenceDefaults=0 '\000') at master/master_node_protocol.c:561
#9  0x00007f12ea637b74 in CreateShardsOnWorkers (distributedRelationId=37208, shardPlacements=0x2b9ff60, useExclusiveConnection=1 '\001', colocatedShard=1 '\001')
    at master/master_stage_protocol.c:490
#10 0x00007f12ea630693 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:337
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c4adf0, indexId=0, indexOK=0 '\000', snapshot=0x0, nkeys=1, key=0x7ffe4144a9d0) at genam.c:353
#4  0x00007f12ea6830c3 in IsChildTable (relationId=37208) at utils/multi_partitioning_utils.c:151
#5  0x00007f12ea677958 in EnsureRelationKindSupported (relationId=37208) at utils/citus_ruleutils.c:479
#6  0x00007f12ea677a68 in pg_get_tablecolumnoptionsdef_string (tableRelationId=37208) at utils/citus_ruleutils.c:517
#7  0x00007f12ea635664 in GetTableCreationCommands (relationId=37208, includeSequenceDefaults=0 '\000') at master/master_node_protocol.c:660
#8  0x00007f12ea63543a in GetTableDDLEvents (relationId=37208, includeSequenceDefaults=0 '\000') at master/master_node_protocol.c:561
#9  0x00007f12ea637b74 in CreateShardsOnWorkers (distributedRelationId=37208, shardPlacements=0x2b9ff60, useExclusiveConnection=1 '\001', colocatedShard=1 '\001')
    at master/master_stage_protocol.c:490
#10 0x00007f12ea630693 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:337
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c4adf0, indexId=2187, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144a9e0) at genam.c:353
#4  0x00007f12ea6831c3 in IsParentTable (relationId=37208) at utils/multi_partitioning_utils.c:197
#5  0x00007f12ea677966 in EnsureRelationKindSupported (relationId=37208) at utils/citus_ruleutils.c:480
#6  0x00007f12ea677a68 in pg_get_tablecolumnoptionsdef_string (tableRelationId=37208) at utils/citus_ruleutils.c:517
#7  0x00007f12ea635664 in GetTableCreationCommands (relationId=37208, includeSequenceDefaults=0 '\000') at master/master_node_protocol.c:660
#8  0x00007f12ea63543a in GetTableDDLEvents (relationId=37208, includeSequenceDefaults=0 '\000') at master/master_node_protocol.c:561
#9  0x00007f12ea637b74 in CreateShardsOnWorkers (distributedRelationId=37208, shardPlacements=0x2b9ff60, useExclusiveConnection=1 '\001', colocatedShard=1 '\001')
    at master/master_stage_protocol.c:490
#10 0x00007f12ea630693 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:337
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a78398, indexId=2678, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144ab10) at genam.c:353
#4  0x00007f12ea6357a6 in GetTableIndexAndConstraintCommands (relationId=37208) at master/master_node_protocol.c:711
#5  0x00007f12ea63545f in GetTableDDLEvents (relationId=37208, includeSequenceDefaults=0 '\000') at master/master_node_protocol.c:565
#6  0x00007f12ea637b74 in CreateShardsOnWorkers (distributedRelationId=37208, shardPlacements=0x2b9ff60, useExclusiveConnection=1 '\001', colocatedShard=1 '\001')
    at master/master_stage_protocol.c:490
#7  0x00007f12ea630693 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:337
#8  0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#9  0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#10 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#11 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#12 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#13 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#14 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#15 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#16 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#17 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#18 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#19 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#20 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#21 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#22 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#23 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#24 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#25 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#26 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#27 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
---Type <return> to continue, or q <return> to quit---
#28 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#29 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d3d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2a9d3d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2a9d3d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2ba5ee8) at genam.c:510
#4  0x00000000005615e0 in get_index_constraint (indexId=37211) at pg_depend.c:728
#5  0x00007f12ea635849 in GetTableIndexAndConstraintCommands (relationId=37208) at master/master_node_protocol.c:746
#6  0x00007f12ea63545f in GetTableDDLEvents (relationId=37208, includeSequenceDefaults=0 '\000') at master/master_node_protocol.c:565
#7  0x00007f12ea637b74 in CreateShardsOnWorkers (distributedRelationId=37208, shardPlacements=0x2b9ff60, useExclusiveConnection=1 '\001', colocatedShard=1 '\001')
    at master/master_stage_protocol.c:490
#8  0x00007f12ea630693 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:337
#9  0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#10 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#11 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#12 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#13 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#14 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#15 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#16 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#17 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#18 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#19 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#20 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#21 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#22 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#23 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#24 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#25 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#26 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#27 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
---Type <return> to continue, or q <return> to quit---
#28 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#29 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#30 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d3d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2a9d3d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2a9d3d8) at snapmgr.c:910
#3  0x00000000008f3941 in pg_get_constraintdef_worker (constraintId=37212, fullCommand=1 '\001', prettyFlags=0, missing_ok=0 '\000') at ruleutils.c:1851
#4  0x00000000008f3880 in pg_get_constraintdef_command (constraintId=37212) at ruleutils.c:1815
#5  0x00007f12ea635856 in GetTableIndexAndConstraintCommands (relationId=37208) at master/master_node_protocol.c:749
#6  0x00007f12ea63545f in GetTableDDLEvents (relationId=37208, includeSequenceDefaults=0 '\000') at master/master_node_protocol.c:565
#7  0x00007f12ea637b74 in CreateShardsOnWorkers (distributedRelationId=37208, shardPlacements=0x2b9ff60, useExclusiveConnection=1 '\001', colocatedShard=1 '\001')
    at master/master_stage_protocol.c:490
#8  0x00007f12ea630693 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:337
#9  0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#10 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#11 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#12 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#13 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#14 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#15 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#16 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#17 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#18 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#19 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#20 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#21 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#22 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#23 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#24 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#25 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#26 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#27 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
---Type <return> to continue, or q <return> to quit---
#28 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#29 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#30 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d3d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x7f12f1c50070, indexId=2674, indexOK=1 '\001', snapshot=0x0, nkeys=3, key=0x7ffe4144a860) at genam.c:353
#4  0x00000000005613fa in get_constraint_index (constraintId=37212) at pg_depend.c:650
#5  0x00000000008f3e39 in pg_get_constraintdef_worker (constraintId=37212, fullCommand=1 '\001', prettyFlags=0, missing_ok=0 '\000') at ruleutils.c:2016
#6  0x00000000008f3880 in pg_get_constraintdef_command (constraintId=37212) at ruleutils.c:1815
#7  0x00007f12ea635856 in GetTableIndexAndConstraintCommands (relationId=37208) at master/master_node_protocol.c:749
#8  0x00007f12ea63545f in GetTableDDLEvents (relationId=37208, includeSequenceDefaults=0 '\000') at master/master_node_protocol.c:565
#9  0x00007f12ea637b74 in CreateShardsOnWorkers (distributedRelationId=37208, shardPlacements=0x2b9ff60, useExclusiveConnection=1 '\001', colocatedShard=1 '\001')
    at master/master_stage_protocol.c:490
#10 0x00007f12ea630693 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:337
#11 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#12 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d468) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d468, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d468) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d468) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2a9d468, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2a9d468) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2ba6a80) at genam.c:510
#4  0x000000000094bf29 in SearchCatCache (cache=0x2a69308, v1=37211, v2=0, v3=0, v4=0) at catcache.c:1190
#5  0x000000000095e65e in SearchSysCache (cacheId=50, key1=37211, key2=0, key3=0, key4=0) at syscache.c:1109
#6  0x00000000009613f1 in get_rel_relkind (relid=37211) at lsyscache.c:1805
#7  0x0000000000561450 in get_constraint_index (constraintId=37212) at pg_depend.c:665
#8  0x00000000008f3e39 in pg_get_constraintdef_worker (constraintId=37212, fullCommand=1 '\001', prettyFlags=0, missing_ok=0 '\000') at ruleutils.c:2016
#9  0x00000000008f3880 in pg_get_constraintdef_command (constraintId=37212) at ruleutils.c:1815
#10 0x00007f12ea635856 in GetTableIndexAndConstraintCommands (relationId=37208) at master/master_node_protocol.c:749
#11 0x00007f12ea63545f in GetTableDDLEvents (relationId=37208, includeSequenceDefaults=0 '\000') at master/master_node_protocol.c:565
#12 0x00007f12ea637b74 in CreateShardsOnWorkers (distributedRelationId=37208, shardPlacements=0x2b9ff60, useExclusiveConnection=1 '\001', colocatedShard=1 '\001')
    at master/master_stage_protocol.c:490
#13 0x00007f12ea630693 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:337
#14 0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#15 0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#16 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#17 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#18 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#19 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#20 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#21 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#22 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#23 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#24 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#25 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#26 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#27 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#28 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
---Type <return> to continue, or q <return> to quit---
    at pquery.c:773
#29 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#30 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#31 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#32 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#33 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#34 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#35 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d3d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2a9da18) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2ba5060) at genam.c:510
#3  0x00007f12ea6358d9 in GetTableIndexAndConstraintCommands (relationId=37208) at master/master_node_protocol.c:772
#4  0x00007f12ea63545f in GetTableDDLEvents (relationId=37208, includeSequenceDefaults=0 '\000') at master/master_node_protocol.c:565
#5  0x00007f12ea637b74 in CreateShardsOnWorkers (distributedRelationId=37208, shardPlacements=0x2b9ff60, useExclusiveConnection=1 '\001', colocatedShard=1 '\001')
    at master/master_stage_protocol.c:490
#6  0x00007f12ea630693 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:337
#7  0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#8  0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#9  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#10 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#11 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#12 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#13 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#14 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#15 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#16 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#17 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#18 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#19 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#20 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#21 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#22 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#23 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#24 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#25 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#26 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#27 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
---Type <return> to continue, or q <return> to quit---
#28 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2a9da18) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2ba5060) at genam.c:510
#3  0x00007f12ea611691 in GetTableForeignConstraintCommands (relationId=37208) at commands/foreign_constraint.c:516
#4  0x00007f12ea637b85 in CreateShardsOnWorkers (distributedRelationId=37208, shardPlacements=0x2b9ff60, useExclusiveConnection=1 '\001', colocatedShard=1 '\001')
    at master/master_stage_protocol.c:492
#5  0x00007f12ea630693 in CreateColocatedShards (targetRelationId=37208, sourceRelationId=28994, useExclusiveConnections=1 '\001') at master/master_create_shards.c:337
#6  0x00007f12ea60eca2 in CreateHashDistributedTableShards (relationId=37208, colocatedTableId=28994, localTableEmpty=0 '\000') at commands/create_distributed_table.c:494
#7  0x00007f12ea60ea2d in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:366
#8  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#9  0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#10 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#11 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#12 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#13 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#14 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#15 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#16 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#17 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#18 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#19 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#20 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#21 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#22 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#23 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#24 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#25 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#26 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#27 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2a9da18) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2ba5060) at genam.c:510
#3  0x00007f12ea611926 in TableReferenced (relationId=37208) at commands/foreign_constraint.c:623
#4  0x00007f12ea60ea61 in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:383
#5  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#6  0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#7  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#8  0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#9  0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#10 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#11 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#12 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#13 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#14 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#15 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#16 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#17 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#18 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#19 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#20 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#21 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#22 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#23 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#24 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) 
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) bt
#0  UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2aedb38) at snapmgr.c:920
#1  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2a9da18) at snapmgr.c:910
#2  0x00000000004d1c8b in systable_endscan (sysscan=0x2ba5060) at genam.c:510
#3  0x00007f12ea611b5f in TableReferencing (relationId=37208) at commands/foreign_constraint.c:704
#4  0x00007f12ea60ea6f in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:383
#5  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#6  0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#7  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#8  0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#9  0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#10 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#11 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#12 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#13 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#14 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#15 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#16 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#17 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#18 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#19 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#20 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#21 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#22 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#23 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#24 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) 
Continuing.

Breakpoint 5, CopyLocalDataIntoShards (distributedRelationId=37208) at commands/create_distributed_table.c:1223
1223		DestReceiver *copyDest = NULL;
(gdb) 
Continuing.

Breakpoint 1, PushActiveSnapshot (snap=0xe16fa0 <SecondarySnapshotData>) at snapmgr.c:739
739		newactive = MemoryContextAlloc(TopTransactionContext, sizeof(ActiveSnapshotElt));
(gdb) bt
#0  PushActiveSnapshot (snap=0xe16fa0 <SecondarySnapshotData>) at snapmgr.c:739
#1  0x00007f12ea610214 in CopyLocalDataIntoShards (distributedRelationId=37208) at commands/create_distributed_table.c:1262
#2  0x00007f12ea60eb0b in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:409
#3  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#4  0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#5  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#6  0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#7  0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#8  0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#9  0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#10 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#11 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#12 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#13 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#14 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#15 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#16 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#17 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#18 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#19 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#20 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#21 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#22 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2658, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144a960) at genam.c:353
#4  0x000000000094be9c in SearchCatCache (cache=0x2a5d4f8, v1=37208, v2=139719342385236, v3=0, v4=0) at catcache.c:1169
#5  0x000000000095e65e in SearchSysCache (cacheId=6, key1=37208, key2=139719342385236, key3=0, key4=0) at syscache.c:1109
#6  0x000000000095e80b in SearchSysCacheAttName (relid=37208, attname=0x7f12f1c56854 "name") at syscache.c:1209
#7  0x000000000095fead in get_attnum (relid=37208, attname=0x7f12f1c56854 "name") at lsyscache.c:825
#8  0x00007f12ea614fcf in TypeForColumnName (relationId=37208, tupleDescriptor=0x7f12f1c567a8, columnName=0x7f12f1c56854 "name") at commands/multi_copy.c:1367
#9  0x00007f12ea6151c1 in ColumnCoercionPaths (destTupleDescriptor=0x7f12f1c567a8, inputTupleDescriptor=0x7f12f1c567a8, destRelId=37208, columnNameList=0x2c33720, 
    finalColumnTypeArray=0x2c33c20) at commands/multi_copy.c:1436
#10 0x00007f12ea61657b in CitusCopyDestReceiverStartup (dest=0x2ba4438, operation=0, inputTupleDescriptor=0x7f12f1c567a8) at commands/multi_copy.c:2193
#11 0x00007f12ea6102eb in CopyLocalDataIntoShards (distributedRelationId=37208) at commands/create_distributed_table.c:1289
#12 0x00007f12ea60eb0b in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:409
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) n
1157	}
(gdb) 
RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2aedb38) at snapmgr.c:891
891		if (snap->regd_count == 1)
(gdb) p snap->regd_count 
$1 = 1
(gdb) n
892			pairingheap_add(&RegisteredSnapshots, &snap->ph_node);
(gdb) 
894		return snap;
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9d3d8, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9d3d8) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2a9d3d8, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2a9d3d8) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2ba68d8) at genam.c:510
#4  0x000000000094bf29 in SearchCatCache (cache=0x2a5d4f8, v1=37208, v2=139719342385236, v3=0, v4=0) at catcache.c:1190
#5  0x000000000095e65e in SearchSysCache (cacheId=6, key1=37208, key2=139719342385236, key3=0, key4=0) at syscache.c:1109
#6  0x000000000095e80b in SearchSysCacheAttName (relid=37208, attname=0x7f12f1c56854 "name") at syscache.c:1209
#7  0x000000000095fead in get_attnum (relid=37208, attname=0x7f12f1c56854 "name") at lsyscache.c:825
#8  0x00007f12ea614fcf in TypeForColumnName (relationId=37208, tupleDescriptor=0x7f12f1c567a8, columnName=0x7f12f1c56854 "name") at commands/multi_copy.c:1367
#9  0x00007f12ea6151c1 in ColumnCoercionPaths (destTupleDescriptor=0x7f12f1c567a8, inputTupleDescriptor=0x7f12f1c567a8, destRelId=37208, columnNameList=0x2c33720, 
    finalColumnTypeArray=0x2c33c20) at commands/multi_copy.c:1436
#10 0x00007f12ea61657b in CitusCopyDestReceiverStartup (dest=0x2ba4438, operation=0, inputTupleDescriptor=0x7f12f1c567a8) at commands/multi_copy.c:2193
#11 0x00007f12ea6102eb in CopyLocalDataIntoShards (distributedRelationId=37208) at commands/create_distributed_table.c:1289
#12 0x00007f12ea60eb0b in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:409
#13 0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#14 0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#15 0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#16 0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#17 0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#18 0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#19 0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#20 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#21 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#22 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#23 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#24 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#25 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#26 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#27 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
---Type <return> to continue, or q <return> to quit---
#28 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#29 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#30 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#31 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#32 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 2, PopActiveSnapshot () at snapmgr.c:816
816		newstack = ActiveSnapshot->as_next;
(gdb) bt
#0  PopActiveSnapshot () at snapmgr.c:816
#1  0x00007f12ea61056d in CopyLocalDataIntoShards (distributedRelationId=37208) at commands/create_distributed_table.c:1339
#2  0x00007f12ea60eb0b in CreateDistributedTable (relationId=37208, distributionColumn=0x2c5abb8, distributionMethod=104 'h', colocateWithTableName=0x2c5b4b0 "default", 
    viaDeprecatedAPI=0 '\000') at commands/create_distributed_table.c:409
#3  0x00007f12ea60e7ae in create_distributed_table (fcinfo=0x2afc1a8) at commands/create_distributed_table.c:230
#4  0x00000000006702c9 in ExecInterpExpr (state=0x2afc0d0, econtext=0x2afbdc8, isnull=0x7ffe4144b0e7 "") at execExprInterp.c:672
#5  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x2afc0d0, econtext=0x2afbdc8, isNull=0x7ffe4144b0e7 "") at ../../../src/include/executor/executor.h:308
#6  0x00000000006a5105 in ExecProject (projInfo=0x2afc0c8) at ../../../src/include/executor/executor.h:342
#7  0x00000000006a5274 in ExecResult (pstate=0x2afbcb8) at nodeResult.c:136
#8  0x000000000067f485 in ExecProcNodeFirst (node=0x2afbcb8) at execProcnode.c:430
#9  0x0000000000678445 in ExecProcNode (node=0x2afbcb8) at ../../../src/include/executor/executor.h:250
#10 0x000000000067a888 in ExecutePlan (estate=0x2afbaa8, planstate=0x2afbcb8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x2b14200, execute_once=1 '\001') at execMain.c:1722
#11 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#12 0x00007f12ea625490 in CitusExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#13 0x0000000000678763 in ExecutorRun (queryDesc=0x2b248f8, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#14 0x00000000008198f0 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:932
#15 0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#16 0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#17 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#18 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#19 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#20 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#21 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#22 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 2, PopActiveSnapshot () at snapmgr.c:816
816		newstack = ActiveSnapshot->as_next;
(gdb) bt
#0  PopActiveSnapshot () at snapmgr.c:816
#1  0x0000000000819908 in PortalRunSelect (portal=0x2b289c8, forward=1 '\001', count=0, dest=0x2b14200) at pquery.c:935
#2  0x00000000008195c7 in PortalRun (portal=0x2b289c8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x2b14200, altdest=0x2b14200, completionTag=0x7ffe4144b4b0 "")
    at pquery.c:773
#3  0x0000000000813b59 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1099
#4  0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#5  0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#6  0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#7  0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#8  0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#9  0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9bb28, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9bb28) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9bb28) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2a9bb28, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2a9bb28) at snapmgr.c:910
#3  0x0000000000678ac4 in standard_ExecutorEnd (queryDesc=0x2b248f8) at execMain.c:498
#4  0x0000000000678a6c in ExecutorEnd (queryDesc=0x2b248f8) at execMain.c:466
#5  0x000000000061c917 in PortalCleanup (portal=0x2b289c8) at portalcmds.c:302
#6  0x000000000099c189 in PortalDrop (portal=0x2b289c8, isTopCommit=0 '\000') at portalmem.c:489
#7  0x0000000000813b7b in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1109
#8  0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#9  0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#10 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#11 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#12 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#13 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9bb28, owner=0x2aedb38) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9bb28) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2aedb38, snapshot=0x2a9bb28) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2a9bb28, owner=0x2aedb38) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2a9bb28) at snapmgr.c:910
#3  0x0000000000818832 in FreeQueryDesc (qdesc=0x2b248f8) at pquery.c:111
#4  0x000000000061c923 in PortalCleanup (portal=0x2b289c8) at portalcmds.c:303
#5  0x000000000099c189 in PortalDrop (portal=0x2b289c8, isTopCommit=0 '\000') at portalmem.c:489
#6  0x0000000000813b7b in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1109
#7  0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#8  0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#9  0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#10 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#11 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#12 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 4, ResourceOwnerDelete (owner=0x2aedb38) at resowner.c:708
708		while (owner->firstchild != NULL)
(gdb) bt
#0  ResourceOwnerDelete (owner=0x2aedb38) at resowner.c:708
#1  0x000000000099c2db in PortalDrop (portal=0x2b289c8, isTopCommit=0 '\000') at portalmem.c:555
#2  0x0000000000813b7b in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1109
#3  0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#4  0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#5  0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#6  0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#7  0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#8  0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2a451b8, snapshot=0x2a9bb28) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2a451b8, snapshot=0x2a9bb28) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2a451b8) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2659, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144b0d0) at genam.c:353
#4  0x000000000095174b in RelationBuildTupleDesc (relation=0x7f12f1c55890) at relcache.c:527
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=20519, insertIt=1 '\001') at relcache.c:1325
#6  0x000000000095509c in RelationIdGetRelation (relationId=20519) at relcache.c:2107
#7  0x00000000004ba793 in relation_open (relationId=20519, lockmode=3) at heapam.c:1125
#8  0x00000000004ba9e7 in heap_open (relationId=20519, lockmode=3) at heapam.c:1288
#9  0x00007f12ea671527 in LogTransactionRecord (groupId=4, transactionName=0x2b4b871 "citus_0_128889_5_68") at transaction/transaction_recovery.c:427
#10 0x00007f12ea66eec6 in StartRemoteTransactionPrepare (connection=0x2b4b6b0) at transaction/remote_transaction.c:488
#11 0x00007f12ea66f421 in CoordinatedRemoteTransactionsPrepare () at transaction/remote_transaction.c:813
#12 0x00007f12ea6706c9 in CoordinatedTransactionCallback (event=XACT_EVENT_PRE_COMMIT, arg=0x0) at transaction/transaction_management.c:344
#13 0x000000000050b913 in CallXactCallbacks (event=XACT_EVENT_PRE_COMMIT) at xact.c:3347
#14 0x000000000050a64d in CommitTransaction () at xact.c:1984
#15 0x000000000050b1ba in CommitTransactionCommand () at xact.c:2773
#16 0x0000000000815d9f in finish_xact_command () at postgres.c:2459
#17 0x0000000000813ba5 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1131
#18 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#19 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#20 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#21 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#22 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#23 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9bb28, owner=0x2a451b8) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2a451b8, snapshot=0x2a9bb28) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2a451b8, snapshot=0x2a9bb28) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2a9bb28, owner=0x2a451b8) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2a9bb28) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2c4d708) at genam.c:510
#4  0x00000000009518f6 in RelationBuildTupleDesc (relation=0x7f12f1c55890) at relcache.c:576
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=20519, insertIt=1 '\001') at relcache.c:1325
#6  0x000000000095509c in RelationIdGetRelation (relationId=20519) at relcache.c:2107
#7  0x00000000004ba793 in relation_open (relationId=20519, lockmode=3) at heapam.c:1125
#8  0x00000000004ba9e7 in heap_open (relationId=20519, lockmode=3) at heapam.c:1288
#9  0x00007f12ea671527 in LogTransactionRecord (groupId=4, transactionName=0x2b4b871 "citus_0_128889_5_68") at transaction/transaction_recovery.c:427
#10 0x00007f12ea66eec6 in StartRemoteTransactionPrepare (connection=0x2b4b6b0) at transaction/remote_transaction.c:488
#11 0x00007f12ea66f421 in CoordinatedRemoteTransactionsPrepare () at transaction/remote_transaction.c:813
#12 0x00007f12ea6706c9 in CoordinatedTransactionCallback (event=XACT_EVENT_PRE_COMMIT, arg=0x0) at transaction/transaction_management.c:344
#13 0x000000000050b913 in CallXactCallbacks (event=XACT_EVENT_PRE_COMMIT) at xact.c:3347
#14 0x000000000050a64d in CommitTransaction () at xact.c:1984
#15 0x000000000050b1ba in CommitTransactionCommand () at xact.c:2773
#16 0x0000000000815d9f in finish_xact_command () at postgres.c:2459
#17 0x0000000000813ba5 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1131
#18 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#19 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#20 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#21 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#22 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#23 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2a451b8, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2a451b8, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2a451b8) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a78398, indexId=2678, indexOK=1 '\001', snapshot=0x0, nkeys=1, key=0x7ffe4144b120) at genam.c:353
#4  0x0000000000958e9f in RelationGetIndexList (relation=0x7f12f1c55890) at relcache.c:4383
#5  0x0000000000676d65 in ExecOpenIndices (resultRelInfo=0x2c4d758, speculative=0 '\000') at execIndexing.c:168
#6  0x000000000053b61d in CatalogOpenIndexes (heapRel=0x7f12f1c55890) at indexing.c:49
#7  0x000000000053b801 in CatalogTupleInsert (heapRel=0x7f12f1c55890, tup=0x2a9bb28) at indexing.c:167
#8  0x00007f12ea671565 in LogTransactionRecord (groupId=4, transactionName=0x2b4b871 "citus_0_128889_5_68") at transaction/transaction_recovery.c:432
#9  0x00007f12ea66eec6 in StartRemoteTransactionPrepare (connection=0x2b4b6b0) at transaction/remote_transaction.c:488
#10 0x00007f12ea66f421 in CoordinatedRemoteTransactionsPrepare () at transaction/remote_transaction.c:813
#11 0x00007f12ea6706c9 in CoordinatedTransactionCallback (event=XACT_EVENT_PRE_COMMIT, arg=0x0) at transaction/transaction_management.c:344
#12 0x000000000050b913 in CallXactCallbacks (event=XACT_EVENT_PRE_COMMIT) at xact.c:3347
#13 0x000000000050a64d in CommitTransaction () at xact.c:1984
#14 0x000000000050b1ba in CommitTransactionCommand () at xact.c:2773
#15 0x0000000000815d9f in finish_xact_command () at postgres.c:2459
#16 0x0000000000813ba5 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1131
#17 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#18 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#19 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#20 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#21 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#22 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2a451b8) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2a451b8, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2a451b8, snapshot=0x2a9da18) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2a451b8) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2a9da18) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2c4d708) at genam.c:510
#4  0x000000000095920e in RelationGetIndexList (relation=0x7f12f1c55890) at relcache.c:4442
#5  0x0000000000676d65 in ExecOpenIndices (resultRelInfo=0x2c4d758, speculative=0 '\000') at execIndexing.c:168
#6  0x000000000053b61d in CatalogOpenIndexes (heapRel=0x7f12f1c55890) at indexing.c:49
#7  0x000000000053b801 in CatalogTupleInsert (heapRel=0x7f12f1c55890, tup=0x2a9bb28) at indexing.c:167
#8  0x00007f12ea671565 in LogTransactionRecord (groupId=4, transactionName=0x2b4b871 "citus_0_128889_5_68") at transaction/transaction_recovery.c:432
#9  0x00007f12ea66eec6 in StartRemoteTransactionPrepare (connection=0x2b4b6b0) at transaction/remote_transaction.c:488
#10 0x00007f12ea66f421 in CoordinatedRemoteTransactionsPrepare () at transaction/remote_transaction.c:813
#11 0x00007f12ea6706c9 in CoordinatedTransactionCallback (event=XACT_EVENT_PRE_COMMIT, arg=0x0) at transaction/transaction_management.c:344
#12 0x000000000050b913 in CallXactCallbacks (event=XACT_EVENT_PRE_COMMIT) at xact.c:3347
#13 0x000000000050a64d in CommitTransaction () at xact.c:1984
#14 0x000000000050b1ba in CommitTransactionCommand () at xact.c:2773
#15 0x0000000000815d9f in finish_xact_command () at postgres.c:2459
#16 0x0000000000813ba5 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1131
#17 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#18 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#19 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#20 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#21 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#22 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2a451b8, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2a451b8, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2a451b8) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2659, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144b000) at genam.c:353
#4  0x000000000095174b in RelationBuildTupleDesc (relation=0x7f12f1c71290) at relcache.c:527
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=20525, insertIt=1 '\001') at relcache.c:1325
#6  0x000000000095509c in RelationIdGetRelation (relationId=20525) at relcache.c:2107
#7  0x00000000004ba793 in relation_open (relationId=20525, lockmode=3) at heapam.c:1125
#8  0x00000000004d1fb2 in index_open (relationId=20525, lockmode=3) at indexam.c:155
#9  0x0000000000676e03 in ExecOpenIndices (resultRelInfo=0x2c4d758, speculative=0 '\000') at execIndexing.c:197
#10 0x000000000053b61d in CatalogOpenIndexes (heapRel=0x7f12f1c55890) at indexing.c:49
#11 0x000000000053b801 in CatalogTupleInsert (heapRel=0x7f12f1c55890, tup=0x2a9bb28) at indexing.c:167
#12 0x00007f12ea671565 in LogTransactionRecord (groupId=4, transactionName=0x2b4b871 "citus_0_128889_5_68") at transaction/transaction_recovery.c:432
#13 0x00007f12ea66eec6 in StartRemoteTransactionPrepare (connection=0x2b4b6b0) at transaction/remote_transaction.c:488
#14 0x00007f12ea66f421 in CoordinatedRemoteTransactionsPrepare () at transaction/remote_transaction.c:813
#15 0x00007f12ea6706c9 in CoordinatedTransactionCallback (event=XACT_EVENT_PRE_COMMIT, arg=0x0) at transaction/transaction_management.c:344
#16 0x000000000050b913 in CallXactCallbacks (event=XACT_EVENT_PRE_COMMIT) at xact.c:3347
#17 0x000000000050a64d in CommitTransaction () at xact.c:1984
#18 0x000000000050b1ba in CommitTransactionCommand () at xact.c:2773
#19 0x0000000000815d9f in finish_xact_command () at postgres.c:2459
#20 0x0000000000813ba5 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1131
#21 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#22 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#23 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#24 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#25 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#26 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2a451b8) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2a451b8, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2a451b8, snapshot=0x2a9da18) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2a451b8) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2a9da18) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2c4d708) at genam.c:510
#4  0x00000000009518f6 in RelationBuildTupleDesc (relation=0x7f12f1c71290) at relcache.c:576
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=20525, insertIt=1 '\001') at relcache.c:1325
#6  0x000000000095509c in RelationIdGetRelation (relationId=20525) at relcache.c:2107
#7  0x00000000004ba793 in relation_open (relationId=20525, lockmode=3) at heapam.c:1125
#8  0x00000000004d1fb2 in index_open (relationId=20525, lockmode=3) at indexam.c:155
#9  0x0000000000676e03 in ExecOpenIndices (resultRelInfo=0x2c4d758, speculative=0 '\000') at execIndexing.c:197
#10 0x000000000053b61d in CatalogOpenIndexes (heapRel=0x7f12f1c55890) at indexing.c:49
#11 0x000000000053b801 in CatalogTupleInsert (heapRel=0x7f12f1c55890, tup=0x2a9bb28) at indexing.c:167
#12 0x00007f12ea671565 in LogTransactionRecord (groupId=4, transactionName=0x2b4b871 "citus_0_128889_5_68") at transaction/transaction_recovery.c:432
#13 0x00007f12ea66eec6 in StartRemoteTransactionPrepare (connection=0x2b4b6b0) at transaction/remote_transaction.c:488
#14 0x00007f12ea66f421 in CoordinatedRemoteTransactionsPrepare () at transaction/remote_transaction.c:813
#15 0x00007f12ea6706c9 in CoordinatedTransactionCallback (event=XACT_EVENT_PRE_COMMIT, arg=0x0) at transaction/transaction_management.c:344
#16 0x000000000050b913 in CallXactCallbacks (event=XACT_EVENT_PRE_COMMIT) at xact.c:3347
#17 0x000000000050a64d in CommitTransaction () at xact.c:1984
#18 0x000000000050b1ba in CommitTransactionCommand () at xact.c:2773
#19 0x0000000000815d9f in finish_xact_command () at postgres.c:2459
#20 0x0000000000813ba5 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1131
#21 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#22 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#23 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#24 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#25 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#26 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 6, ResourceOwnerRememberSnapshot (owner=0x2a451b8, snapshot=0x2a9da18) at resowner.c:1156
1156		ResourceArrayAdd(&(owner->snapshotarr), PointerGetDatum(snapshot));
(gdb) bt
#0  ResourceOwnerRememberSnapshot (owner=0x2a451b8, snapshot=0x2a9da18) at resowner.c:1156
#1  0x00000000009b1c29 in RegisterSnapshotOnOwner (snapshot=0xe17020 <CatalogSnapshotData>, owner=0x2a451b8) at snapmgr.c:889
#2  0x00000000009b1bb7 in RegisterSnapshot (snapshot=0xe17020 <CatalogSnapshotData>) at snapmgr.c:868
#3  0x00000000004d190f in systable_beginscan (heapRelation=0x2a74518, indexId=2659, indexOK=1 '\001', snapshot=0x0, nkeys=2, key=0x7ffe4144b000) at genam.c:353
#4  0x000000000095174b in RelationBuildTupleDesc (relation=0x7f12f1c4abb0) at relcache.c:527
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=20526, insertIt=1 '\001') at relcache.c:1325
#6  0x000000000095509c in RelationIdGetRelation (relationId=20526) at relcache.c:2107
#7  0x00000000004ba793 in relation_open (relationId=20526, lockmode=3) at heapam.c:1125
#8  0x00000000004d1fb2 in index_open (relationId=20526, lockmode=3) at indexam.c:155
#9  0x0000000000676e03 in ExecOpenIndices (resultRelInfo=0x2c4d758, speculative=0 '\000') at execIndexing.c:197
#10 0x000000000053b61d in CatalogOpenIndexes (heapRel=0x7f12f1c55890) at indexing.c:49
#11 0x000000000053b801 in CatalogTupleInsert (heapRel=0x7f12f1c55890, tup=0x2a9bb28) at indexing.c:167
#12 0x00007f12ea671565 in LogTransactionRecord (groupId=4, transactionName=0x2b4b871 "citus_0_128889_5_68") at transaction/transaction_recovery.c:432
#13 0x00007f12ea66eec6 in StartRemoteTransactionPrepare (connection=0x2b4b6b0) at transaction/remote_transaction.c:488
#14 0x00007f12ea66f421 in CoordinatedRemoteTransactionsPrepare () at transaction/remote_transaction.c:813
#15 0x00007f12ea6706c9 in CoordinatedTransactionCallback (event=XACT_EVENT_PRE_COMMIT, arg=0x0) at transaction/transaction_management.c:344
#16 0x000000000050b913 in CallXactCallbacks (event=XACT_EVENT_PRE_COMMIT) at xact.c:3347
#17 0x000000000050a64d in CommitTransaction () at xact.c:1984
#18 0x000000000050b1ba in CommitTransactionCommand () at xact.c:2773
#19 0x0000000000815d9f in finish_xact_command () at postgres.c:2459
#20 0x0000000000813ba5 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1131
#21 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#22 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#23 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#24 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#25 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#26 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 3, UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2a451b8) at snapmgr.c:920
920		if (snapshot == NULL)
(gdb) 
Continuing.

Breakpoint 7, ResourceOwnerForgetSnapshot (owner=0x2a451b8, snapshot=0x2a9da18) at resowner.c:1165
1165		if (!ResourceArrayRemove(&(owner->snapshotarr), PointerGetDatum(snapshot)))
(gdb) bt
#0  ResourceOwnerForgetSnapshot (owner=0x2a451b8, snapshot=0x2a9da18) at resowner.c:1165
#1  0x00000000009b1ca9 in UnregisterSnapshotFromOwner (snapshot=0x2a9da18, owner=0x2a451b8) at snapmgr.c:926
#2  0x00000000009b1c7b in UnregisterSnapshot (snapshot=0x2a9da18) at snapmgr.c:910
#3  0x00000000004d1c8b in systable_endscan (sysscan=0x2c4d708) at genam.c:510
#4  0x00000000009518f6 in RelationBuildTupleDesc (relation=0x7f12f1c4abb0) at relcache.c:576
#5  0x0000000000953463 in RelationBuildDesc (targetRelId=20526, insertIt=1 '\001') at relcache.c:1325
#6  0x000000000095509c in RelationIdGetRelation (relationId=20526) at relcache.c:2107
#7  0x00000000004ba793 in relation_open (relationId=20526, lockmode=3) at heapam.c:1125
#8  0x00000000004d1fb2 in index_open (relationId=20526, lockmode=3) at indexam.c:155
#9  0x0000000000676e03 in ExecOpenIndices (resultRelInfo=0x2c4d758, speculative=0 '\000') at execIndexing.c:197
#10 0x000000000053b61d in CatalogOpenIndexes (heapRel=0x7f12f1c55890) at indexing.c:49
#11 0x000000000053b801 in CatalogTupleInsert (heapRel=0x7f12f1c55890, tup=0x2a9bb28) at indexing.c:167
#12 0x00007f12ea671565 in LogTransactionRecord (groupId=4, transactionName=0x2b4b871 "citus_0_128889_5_68") at transaction/transaction_recovery.c:432
#13 0x00007f12ea66eec6 in StartRemoteTransactionPrepare (connection=0x2b4b6b0) at transaction/remote_transaction.c:488
#14 0x00007f12ea66f421 in CoordinatedRemoteTransactionsPrepare () at transaction/remote_transaction.c:813
#15 0x00007f12ea6706c9 in CoordinatedTransactionCallback (event=XACT_EVENT_PRE_COMMIT, arg=0x0) at transaction/transaction_management.c:344
#16 0x000000000050b913 in CallXactCallbacks (event=XACT_EVENT_PRE_COMMIT) at xact.c:3347
#17 0x000000000050a64d in CommitTransaction () at xact.c:1984
#18 0x000000000050b1ba in CommitTransactionCommand () at xact.c:2773
#19 0x0000000000815d9f in finish_xact_command () at postgres.c:2459
#20 0x0000000000813ba5 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1131
#21 0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#22 0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#23 0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#24 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#25 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#26 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.

Breakpoint 8, AtEOXact_Snapshot (isCommit=1 '\001', resetXmin=0 '\000') at snapmgr.c:1070
1070		if (FirstXactSnapshot != NULL)
(gdb) bt
#0  AtEOXact_Snapshot (isCommit=1 '\001', resetXmin=0 '\000') at snapmgr.c:1070
#1  0x000000000050a7ee in CommitTransaction () at xact.c:2137
#2  0x000000000050b1ba in CommitTransactionCommand () at xact.c:2773
#3  0x0000000000815d9f in finish_xact_command () at postgres.c:2459
#4  0x0000000000813ba5 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1131
#5  0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#6  0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#7  0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#8  0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#9  0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#10 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) n
1076		FirstXactSnapshot = NULL;
(gdb) 
1081		if (exportedSnapshots != NIL)
(gdb) 
1112		InvalidateCatalogSnapshot();
(gdb) 
1115		if (isCommit)
(gdb) 
1119			if (!pairingheap_is_empty(&RegisteredSnapshots))
(gdb) 
1123			for (active = ActiveSnapshot; active != NULL; active = active->as_next)
(gdb) 
1131		ActiveSnapshot = NULL;
(gdb) p ActiveSnapshot
$2 = (ActiveSnapshotElt *) 0x0
(gdb) n
1132		OldestActiveSnapshot = NULL;
(gdb) c
Continuing.

Breakpoint 4, ResourceOwnerDelete (owner=0x2a451b8) at resowner.c:708
708		while (owner->firstchild != NULL)
(gdb) bt
#0  ResourceOwnerDelete (owner=0x2a451b8) at resowner.c:708
#1  0x000000000050a81c in CommitTransaction () at xact.c:2142
#2  0x000000000050b1ba in CommitTransactionCommand () at xact.c:2773
#3  0x0000000000815d9f in finish_xact_command () at postgres.c:2459
#4  0x0000000000813ba5 in exec_simple_query (query_string=0x2aa0a38 "SELECT create_distributed_table('test1', 'id', 'hash');") at postgres.c:1131
#5  0x0000000000817b1f in PostgresMain (argc=1, argv=0x2a423d8, dbname=0x2a422b8 "postgres", username=0x2a40248 "cituscluster") at postgres.c:4088
#6  0x000000000078b2d2 in BackendRun (port=0x2a38820) at postmaster.c:4357
#7  0x000000000078aa7b in BackendStartup (port=0x2a38820) at postmaster.c:4029
#8  0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#9  0x0000000000786a6d in PostmasterMain (argc=1, argv=0x29f3c00) at postmaster.c:1361
#10 0x00000000006cf26f in main (argc=1, argv=0x29f3c00) at main.c:228
(gdb) c
Continuing.
^C
Program received signal SIGINT, Interrupt.
0x00007f12f0f0b163 in __epoll_wait_nocancel () at ../sysdeps/unix/syscall-template.S:81
81	T_PSEUDO (SYSCALL_SYMBOL, SYSCALL_NAME, SYSCALL_NARGS)
(gdb) q
A debugging session is active.

	Inferior 1 [process 128889] will be detached.

Quit anyway? (y or n) y
Detaching from program: /opt/pgsql-10.1/bin/postgres, process 128889
[cituscluster@gtm1 ~]$ ps -ef | grep postgres
cituscl+  13817      1  0 03:02 pts/0    00:00:00 /opt/pgsql-10.1/bin/postgres
cituscl+  13837  13817  0 03:02 ?        00:00:00 postgres: checkpointer process  
cituscl+  13838  13817  0 03:02 ?        00:00:00 postgres: writer process   
cituscl+  13839  13817  0 03:02 ?        00:00:00 postgres: wal writer process  
cituscl+  13840  13817  0 03:02 ?        00:00:00 postgres: autovacuum launcher process  
cituscl+  13841  13817  0 03:02 ?        00:00:00 postgres: stats collector process  
cituscl+  13843  13817  0 03:02 ?        00:00:00 postgres: bgworker: task tracker  
cituscl+  13844  13817  0 03:02 ?        00:00:00 postgres: bgworker: logical replication launcher  
cituscl+  13853  97902  0 03:02 pts/0    00:00:00 psql -d postgres
cituscl+  13854  13817  0 03:02 ?        00:00:00 postgres: cituscluster postgres [local] idle
cituscl+  13855  13817  0 03:02 ?        00:00:00 postgres: bgworker: Citus Maintenance Daemon: 13212/10  
cituscl+  13857 113190  0 03:02 pts/3    00:00:00 grep --color=auto postgres
cituscl+ 127146 113138  0 Jun05 pts/1    00:00:00 psql -d postgres
[cituscluster@gtm1 ~]$ gdb attach 13854
GNU gdb (GDB) Red Hat Enterprise Linux 7.6.1-110.el7
Copyright (C) 2013 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-redhat-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
attach: No such file or directory.
Attaching to process 13854
Reading symbols from /opt/pgsql-10.1/bin/postgres...done.
Reading symbols from /lib64/libpthread.so.0...Reading symbols from /usr/lib/debug/usr/lib64/libpthread-2.17.so.debug...done.
done.
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib64/libthread_db.so.1".
Loaded symbols for /lib64/libpthread.so.0
Reading symbols from /lib64/librt.so.1...Reading symbols from /usr/lib/debug/usr/lib64/librt-2.17.so.debug...done.
done.
Loaded symbols for /lib64/librt.so.1
Reading symbols from /lib64/libdl.so.2...Reading symbols from /usr/lib/debug/usr/lib64/libdl-2.17.so.debug...done.
done.
Loaded symbols for /lib64/libdl.so.2
Reading symbols from /lib64/libm.so.6...Reading symbols from /usr/lib/debug/usr/lib64/libm-2.17.so.debug...done.
done.
Loaded symbols for /lib64/libm.so.6
Reading symbols from /lib64/libc.so.6...Reading symbols from /usr/lib/debug/usr/lib64/libc-2.17.so.debug...done.
done.
Loaded symbols for /lib64/libc.so.6
Reading symbols from /lib64/ld-linux-x86-64.so.2...Reading symbols from /usr/lib/debug/usr/lib64/ld-2.17.so.debug...done.
done.
Loaded symbols for /lib64/ld-linux-x86-64.so.2
Reading symbols from /opt/pgsql-10.1/lib/citus.so...done.
Loaded symbols for /opt/pgsql-10.1/lib/citus.so
Reading symbols from /opt/pgsql-10.1/lib/libpq.so.5...done.
Loaded symbols for /opt/pgsql-10.1/lib/libpq.so.5
Reading symbols from /lib64/libnss_files.so.2...Reading symbols from /usr/lib/debug/usr/lib64/libnss_files-2.17.so.debug...done.
done.
Loaded symbols for /lib64/libnss_files.so.2
0x00007faa51982163 in __epoll_wait_nocancel () at ../sysdeps/unix/syscall-template.S:81
81	T_PSEUDO (SYSCALL_SYMBOL, SYSCALL_NAME, SYSCALL_NARGS)
(gdb) b FDD_ExchangeNodeRole
Breakpoint 1 at 0x7faa4b0fce1b: file utils/node_metadata.c, line 1357.
(gdb) c
Continuing.

Breakpoint 1, FDD_ExchangeNodeRole (promoteNode=0x1764098, demoteNode=0x17789c0, isCloseConnections=0 '\000', isFailover=0 '\000') at utils/node_metadata.c:1357
1357		List *placementList = NIL;
(gdb) n
1358		bool hasShardOnNode = false;
(gdb) 
1359		bool hasMetadataNode = false;
(gdb) 
1360		char *nodeRoleUpdateCommand = NULL;
(gdb) b PopActiveSnapshot
Breakpoint 2 at 0x9b1ad6: file snapmgr.c, line 816.
(gdb) b PushActiveSnapshot
Breakpoint 3 at 0x9b198c: file snapmgr.c, line 739.
(gdb) c
Continuing.

Breakpoint 3, PushActiveSnapshot (snap=0xe16f20 <CurrentSnapshotData>) at snapmgr.c:739
739		newactive = MemoryContextAlloc(TopTransactionContext, sizeof(ActiveSnapshotElt));
(gdb) bt
#0  PushActiveSnapshot (snap=0xe16f20 <CurrentSnapshotData>) at snapmgr.c:739
#1  0x00007faa4b0fd01f in FDD_ExchangeNodeRole (promoteNode=0x1764098, demoteNode=0x17789c0, isCloseConnections=0 '\000', isFailover=0 '\000') at utils/node_metadata.c:1420
#2  0x00007faa4b0fcbc9 in citus_switchover (fcinfo=0x171c198) at utils/node_metadata.c:1289
#3  0x00000000006702c9 in ExecInterpExpr (state=0x171c0c0, econtext=0x171bdb8, isnull=0x7ffef1b7f2c7 "") at execExprInterp.c:672
#4  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x171c0c0, econtext=0x171bdb8, isNull=0x7ffef1b7f2c7 "") at ../../../src/include/executor/executor.h:308
#5  0x00000000006a5105 in ExecProject (projInfo=0x171c0b8) at ../../../src/include/executor/executor.h:342
#6  0x00000000006a5274 in ExecResult (pstate=0x171bca8) at nodeResult.c:136
#7  0x000000000067f485 in ExecProcNodeFirst (node=0x171bca8) at execProcnode.c:430
#8  0x0000000000678445 in ExecProcNode (node=0x171bca8) at ../../../src/include/executor/executor.h:250
#9  0x000000000067a888 in ExecutePlan (estate=0x171ba98, planstate=0x171bca8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x16d1810, execute_once=1 '\001') at execMain.c:1722
#10 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x171e388, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#11 0x00007faa4b09c490 in CitusExecutorRun (queryDesc=0x171e388, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#12 0x0000000000678763 in ExecutorRun (queryDesc=0x171e388, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#13 0x00000000008198f0 in PortalRunSelect (portal=0x177dfe8, forward=1 '\001', count=0, dest=0x16d1810) at pquery.c:932
#14 0x00000000008195c7 in PortalRun (portal=0x177dfe8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x16d1810, altdest=0x16d1810, completionTag=0x7ffef1b7f690 "")
    at pquery.c:773
#15 0x0000000000813b59 in exec_simple_query (query_string=0x1643128 "select citus_switchover('192.168.221.131', 5432);") at postgres.c:1099
#16 0x0000000000817b1f in PostgresMain (argc=1, argv=0x166e748, dbname=0x166e628 "postgres", username=0x166e608 "cituscluster") at postgres.c:4088
#17 0x000000000078b2d2 in BackendRun (port=0x1668820) at postmaster.c:4357
#18 0x000000000078aa7b in BackendStartup (port=0x1668820) at postmaster.c:4029
#19 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#20 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x1623c00) at postmaster.c:1361
#21 0x00000000006cf26f in main (argc=1, argv=0x1623c00) at main.c:228
(gdb) n

Program received signal SIGSEGV, Segmentation fault.
0x000000000099ac51 in MemoryContextAlloc (context=0x0, size=24) at mcxt.c:717
717		context->isReset = false;
(gdb) bt
#0  0x000000000099ac51 in MemoryContextAlloc (context=0x0, size=24) at mcxt.c:717
#1  0x00000000009b19a0 in PushActiveSnapshot (snap=0xe16f20 <CurrentSnapshotData>) at snapmgr.c:739
#2  0x00007faa4b0fd01f in FDD_ExchangeNodeRole (promoteNode=0x1764098, demoteNode=0x17789c0, isCloseConnections=0 '\000', isFailover=0 '\000') at utils/node_metadata.c:1420
#3  0x00007faa4b0fcbc9 in citus_switchover (fcinfo=0x171c198) at utils/node_metadata.c:1289
#4  0x00000000006702c9 in ExecInterpExpr (state=0x171c0c0, econtext=0x171bdb8, isnull=0x7ffef1b7f2c7 "") at execExprInterp.c:672
#5  0x00000000006a509c in ExecEvalExprSwitchContext (state=0x171c0c0, econtext=0x171bdb8, isNull=0x7ffef1b7f2c7 "") at ../../../src/include/executor/executor.h:308
#6  0x00000000006a5105 in ExecProject (projInfo=0x171c0b8) at ../../../src/include/executor/executor.h:342
#7  0x00000000006a5274 in ExecResult (pstate=0x171bca8) at nodeResult.c:136
#8  0x000000000067f485 in ExecProcNodeFirst (node=0x171bca8) at execProcnode.c:430
#9  0x0000000000678445 in ExecProcNode (node=0x171bca8) at ../../../src/include/executor/executor.h:250
#10 0x000000000067a888 in ExecutePlan (estate=0x171ba98, planstate=0x171bca8, use_parallel_mode=0 '\000', operation=CMD_SELECT, sendTuples=1 '\001', numberTuples=0, 
    direction=ForwardScanDirection, dest=0x16d1810, execute_once=1 '\001') at execMain.c:1722
#11 0x00000000006788e1 in standard_ExecutorRun (queryDesc=0x171e388, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:363
#12 0x00007faa4b09c490 in CitusExecutorRun (queryDesc=0x171e388, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at executor/multi_executor.c:149
#13 0x0000000000678763 in ExecutorRun (queryDesc=0x171e388, direction=ForwardScanDirection, count=0, execute_once=1 '\001') at execMain.c:304
#14 0x00000000008198f0 in PortalRunSelect (portal=0x177dfe8, forward=1 '\001', count=0, dest=0x16d1810) at pquery.c:932
#15 0x00000000008195c7 in PortalRun (portal=0x177dfe8, count=9223372036854775807, isTopLevel=1 '\001', run_once=1 '\001', dest=0x16d1810, altdest=0x16d1810, completionTag=0x7ffef1b7f690 "")
    at pquery.c:773
#16 0x0000000000813b59 in exec_simple_query (query_string=0x1643128 "select citus_switchover('192.168.221.131', 5432);") at postgres.c:1099
#17 0x0000000000817b1f in PostgresMain (argc=1, argv=0x166e748, dbname=0x166e628 "postgres", username=0x166e608 "cituscluster") at postgres.c:4088
#18 0x000000000078b2d2 in BackendRun (port=0x1668820) at postmaster.c:4357
#19 0x000000000078aa7b in BackendStartup (port=0x1668820) at postmaster.c:4029
#20 0x00000000007873e6 in ServerLoop () at postmaster.c:1753
#21 0x0000000000786a6d in PostmasterMain (argc=1, argv=0x1623c00) at postmaster.c:1361
#22 0x00000000006cf26f in main (argc=1, argv=0x1623c00) at main.c:228
(gdb) 
Socket error Event: 32 Error: 10053.
Connection closing...Socket close.

Connection closed by foreign host.

Disconnected from remote host(citus-cn1) at 18:52:13.

Type `help' to learn how to use Xshell prompt.
